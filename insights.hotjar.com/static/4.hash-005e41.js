"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[4],{38933:(e,t,n)=>{n.d(t,{oo:()=>C,Fw:()=>g,of:()=>L,n9:()=>x,Kd:()=>H,uC:()=>F});var i=n(33474),r=n(95851),a=n(68212),o=n(91995);const s=(0,r.Z)("div",{target:"e1ov3q1b4"})("position:relative;display:flex;flex-direction:row;justify-content:space-between;background-color:",a.TV.BRAND_COLORS.cobalt_100,";border:1px solid ",a.TV.color.ui_border_light,";border-radius:",a.TV.radius.l,";margin-bottom:",a.TV.spacer.x3,";overflow:hidden;&:before{content:'';position:absolute;right:0;top:50px;width:300px;height:300px;background:radial-gradient(\n      105% 117.79% at 48.77% 80.34%,\n      rgba(161, 143, 214, 0.5) 8.43%,\n      rgba(195, 240, 247, 0.5) 58.85%,\n      rgba(195, 240, 247, 0) 100%\n    );filter:blur(100px);}"),l=(0,r.Z)("div",{target:"e1ov3q1b3"})("display:flex;flex-direction:column;flex:1;padding:",a.TV.spacer.x2,";position:relative;max-width:540px;"),c=(0,r.Z)("div",{target:"e1ov3q1b2"})("position:relative;width:40%;min-height:184px;max-width:320px;padding:",(e=>{let{withDismiss:t}=e;return t?`${a.TV.spacer.x1pt5} ${a.TV.spacer.x4} ${a.TV.spacer.x1pt5} ${a.TV.spacer.x1pt5}`:`${a.TV.spacer.x1pt5}`}),";"),d=(0,r.Z)("h3",{target:"e1ov3q1b1"})(a.TV.text("header5"),";margin-bottom:",a.TV.spacer.x2,";"),h=(0,r.Z)(a.hU,{target:"e1ov3q1b0"})("position:absolute;top:",a.TV.spacer.x1,";right:",a.TV.spacer.x1,";>button{width:",a.TV.spacer.x2,";height:",a.TV.spacer.x2,";}"),g=e=>{let{media:t,label:n="",title:r,description:g,actions:u,onDismiss:p}=e;return(0,o.BX)(s,{children:[(0,o.BX)(l,{children:[n?(0,o.tZ)(a.xv,{textType:"caption",textColor:"text_light",css:(0,i.iv)({textTransform:"uppercase",marginBottom:a.TV.spacer.x0},"",""),children:n}):null,(0,o.tZ)(d,{children:r}),(0,o.tZ)(a.xv,{css:(0,i.iv)({marginBottom:a.TV.spacer.x2},"",""),textType:"body2",textColor:"text_light",children:g}),u||null]}),(0,o.tZ)(c,{withDismiss:!!p,children:t}),p?(0,o.tZ)(h,{"data-testid":"dismiss-button",icon:"close",kind:"ghost",tooltipText:"Dismiss",description:"Dismiss",onClick:()=>p()}):null]})};var u=n(64934);const p=(0,r.Z)("a",{target:"evc97x93"})("display:flex;overflow:hidden;position:relative;flex-direction:column;gap:",a.TV.spacer.x0,";",a.TV.transition("background-color"),";padding:",a.TV.spacer.x1pt5,";border-radius:",a.TV.radius.l,";border:1px solid ",a.TV.color.ui_border_light,";background-color:",a.TV.BRAND_COLORS.cobalt_100,";&:before{content:'';display:block;position:absolute;width:160px;height:160px;right:-130px;top:-100px;background-image:radial-gradient(\n      105% 117.79% at 48.77% 80.34%,\n      rgba(161, 143, 214, 0.3) 8.43%,\n      rgba(195, 240, 247, 0.3) 58.85%,\n      rgba(195, 240, 247, 0) 100%\n    );mix-blend-mode:darken;filter:blur(40px);}&:hover,&:focus{text-decoration:none;background-color:",a.TV.BRAND_COLORS.cobalt_200,";}"),m=(0,r.Z)("article",{target:"evc97x92"})("width:190px;min-width:190px;overflow:hidden;position:relative;&:nth-child(3n + 2) ",p,":before{top:auto;bottom:-150px;transform:rotate(120deg);}&:nth-child(3n + 3) ",p,":before{right:auto;left:-90px;transform:rotate(-120deg);}"),f=(0,r.Z)("span",{target:"evc97x91"})({name:"1lhq28y",styles:"height:100px;width:100%;background-size:contain;background-position:center center;background-repeat:no-repeat"}),v=(0,r.Z)(a.hU,{target:"evc97x90"})({name:"1lby940",styles:"position:absolute;top:0;right:0"}),x=e=>{let{id:t,href:n,image:r,title:s,description:l,isExternalLink:c,onClick:d,onDismiss:h,onView:g}=e;const[x,_]=(0,u.useState)(!1);return(0,u.useEffect)((()=>{x||(g(t),_(!0))}),[t,g,x]),(0,o.BX)(m,{children:[(0,o.BX)(p,{href:n,onClick:d,"aria-label":s,"aria-details":l,target:c?"_blank":"_self",children:[(0,o.tZ)(f,{css:(0,i.iv)({backgroundImage:`url(${r})`},"",""),"aria-hidden":!0}),(0,o.tZ)(a.xv,{as:"span",textType:"subtitle2",children:s}),(0,o.tZ)(a.xv,{as:"span",textType:"caption",textColor:"text_light",children:l})]}),(0,o.tZ)(v,{icon:"close",kind:"ghost",tooltipText:"Dismiss",description:"Dismiss",onClick:()=>{h()}})]})};var _=n(62162),T=n(65611);const y=(0,r.Z)("aside",{target:"e7e23wm6"})("position:fixed;z-index:",9991,";bottom:",a.TV.spacer.x2,";",(e=>{let{position:t,isSidebarMinimized:n}=e;return"left"===t?`\n      transition: left 300ms ease-in-out;\n      left: calc(${n?a.TV.spacer.x8:"220px"} + ${a.TV.spacer.x1});\n      `:`right: ${a.TV.spacer.x8};`}),";"),w=(0,r.Z)("div",{target:"e7e23wm5"})("overflow:hidden;position:relative;background:",a.TV.BRAND_COLORS.cobalt_100,";border-radius:",a.TV.radius.l,";transition:max-width 400ms ease-in-out,max-height 400ms ease-in-out;border:1px solid ",a.TV.color.ui_border_light,";",a.TV.elevation(2),";",(e=>{let{isCollapsed:t}=e;return t?`\n  max-width: 250px;\n  max-height: 40px;\n\n  &:focus-within {\n    ${a.TV.focus()};\n  }\n  `:"\n  max-width: 400px;\n  max-height: calc(100vh - 140px);\n  display: flex;\n  flex-direction: column;\n\n  &:before {\n    content: '';\n    display: block;\n    position: absolute;\n    width: 262px;\n    height: 262px;\n    right: -140px;\n    top: 0;\n    z-index: 0;\n\n    background: radial-gradient(\n      105% 117.79% at 48.77% 80.34%,\n      rgba(161, 143, 214, 0.5) 8.43%,\n      rgba(195, 240, 247, 0.5) 58.85%,\n      rgba(195, 240, 247, 0) 100%\n    );\n    mix-blend-mode: darken;\n    filter: blur(100px);\n    transform: rotate(-30deg);\n  }\n  "}),";"),b=(0,r.Z)("header",{target:"e7e23wm4"})("display:flex;align-items:center;border:0;width:100%;box-shadown:0;background:none;text-align:left;cursor:pointer;position:relative;z-index:1;",(e=>{let{isCollapsed:t}=e;return t?`\n    padding: ${a.TV.spacer.x1} ${a.TV.spacer.x2};\n\n    &:focus {\n      outline: 0;\n    }\n    `:`\n    padding: ${a.TV.spacer.x2} 6px ${a.TV.spacer.x2} ${a.TV.spacer.x2};\n    `}),";"),S=(0,r.Z)("span",{target:"e7e23wm3"})("flex-grow:1;margin:0;",a.TV.truncateText()," ",a.TV.text("caption")," text-transform:uppercase;",(e=>{let{isCollapsed:t}=e;return t?`\n          text-transform: unset;\n          ${a.TV.text("header5")}\n          font-size: 14px;\n        `:""}),";transition:font-size 100ms ease-in-out;"),Z=(0,r.Z)("div",{target:"e7e23wm2"})("display:block;position:relative;z-index:1;padding:0 ",a.TV.spacer.x1," ",a.TV.spacer.x2,";width:",400,"px;flex:1 1 auto;overflow-y:auto;overflow-x:hidden;"),k=(0,r.Z)("span",{target:"e7e23wm1"})("background:",a.TV.color.primary_cta,";font-size:",a.TV.text("subtitle3"),";color:",a.TV.color.white,";width:",a.TV.spacer.x2,";height:",a.TV.spacer.x2,";border-radius:50%;display:flex;align-items:center;justify-content:center;position:absolute;top:-",a.TV.spacer.x1,";right:-",a.TV.spacer.x1,";"),E=(0,r.Z)(a.JO,{target:"e7e23wm0"})("position:absolute;top:-",a.TV.spacer.x1,";right:-",a.TV.spacer.x1,";"),C=(0,u.forwardRef)(((e,t)=>{let{title:n,remainingTasks:i,onDismiss:r,onToggle:s,collapsedStateKey:l,children:c,position:d="right"}=e;const[h,g]=(0,_.Nt)(l);(0,u.useEffect)((()=>{s&&s(!!h)}),[h,s]);const{isSidebarMinimized:p}=(0,T.HJ)();return(0,o.BX)(y,{position:d,isSidebarMinimized:p,ref:t,children:[(0,o.BX)(w,{isCollapsed:h,children:[(0,o.BX)(b,{tabIndex:h?0:void 0,role:h?"button":void 0,isCollapsed:h,onKeyPress:h?e=>{"Enter"===e.key&&g(!h)}:void 0,onClick:()=>g(!h),children:[(0,o.tZ)(S,{isCollapsed:h,children:n}),r&&!h&&(0,o.tZ)(a.hU,{icon:"close",kind:"ghost",size:"s",title:"Dismiss",tooltipText:"Dismiss",onClick:e=>{r&&(e.stopPropagation(),r())}}),!h&&(0,o.tZ)(a.hU,{icon:"chevron_bottom",kind:"ghost",size:"s",tooltipText:"Minimize",title:"Minimize"})]}),!h&&(0,o.tZ)(Z,{children:c})]}),(h??!1)&&(0,o.tZ)(o.HY,{children:i>0?(0,o.tZ)(k,{children:i}):(0,o.tZ)(E,{icon:"check_alt",color:"text_success"})})]})})),I=(0,r.Z)("div",{target:"e3qs4s26"})("position:relative;display:flex;flex-direction:column;min-width:365px;min-height:240px;box-sizing:content-box;overflow:hidden;background-color:",a.TV.color.ui_background,";border:1px solid ",a.TV.color.ui_border,";border-radius:",a.TV.spacer.x1,";&:hover{background-color:",a.TV.color.bg_hover,";}"),R=(0,r.Z)("div",{target:"e3qs4s25"})("position:relative;display:flex;z-index:0;justify-content:center;align-items:center;width:100%;min-height:150px;overflow:hidden;padding:20px;background-color:",(e=>{let{backgroundColor:t}=e;return"magenta"===t?`${a.TV.color.magenta_100}`:`${a.TV.color.lilac_100}`}),";&:before{content:'';position:absolute;top:0;left:-105px;z-index:0;min-width:359px;min-height:308px;background:",(e=>{let{backgroundColor:t}=e;return"lilac"===t?"radial-gradient(122.33% 145.31% at 34.58% 107.85%, #E4DFF3 0%, #F3F1FA 47.4%)":"radial-gradient(122.33% 145.31% at 34.58% 107.85%, #ffb49d 0%, #ffece6 47.4%)"}),";filter:blur(65.2238px);transform:matrix(0.77, 0.5, -0.76, 0.8, 0, 0);}"),A=(0,r.Z)("img",{target:"e3qs4s24"})({name:"1k38of2",styles:"z-index:1;max-width:100%;max-height:100%;box-shadow:0px 2px 8px rgba(0, 0, 0, 0.12);border-radius:2px;object-fit:cover"}),O=(0,r.Z)("div",{target:"e3qs4s23"})({name:"i563hg",styles:"padding:12px 16px"}),V=(0,r.Z)("a",{target:"e3qs4s22"})({name:"6bz2qw",styles:"display:block;width:100%;height:100%;:hover{text-decoration:none;}"}),N=(0,r.Z)(a.xv,{target:"e3qs4s21"})({name:"o1ltfa",styles:"display:block;margin-bottom:5px"}),D=(0,r.Z)(a.xv,{target:"e3qs4s20"})({name:"4zleql",styles:"display:block"}),L=e=>{let{backgroundColor:t="lilac",className:n,description:i,href:r,image:a,isExternalLink:s,onClick:l,title:c}=e;return(0,o.tZ)(I,{className:n,children:(0,o.BX)(V,{href:r,onClick:l,"data-testid":"quick-link-card","aria-label":c,"aria-details":i,target:s?"_blank":"_self",children:[(0,o.tZ)(R,{backgroundColor:t,children:(0,o.tZ)(A,{src:a,alt:"title","aria-hidden":!0})}),(0,o.BX)(O,{children:[(0,o.tZ)(N,{as:"span",textType:"subtitle1",children:c}),(0,o.tZ)(D,{as:"span",textType:"body2",textColor:"text_light",children:i})]})]})})},P=(0,r.Z)("iframe",{target:"e17fsca81"})({name:"11xuit1",styles:"border:none;width:100%;height:400px;display:block"}),B=(0,r.Z)(a.u_.Body,{target:"e17fsca80"})({name:"179o4tp",styles:"padding:0;height:400px"}),H=e=>{let{isOpen:t,closeModal:n,videoUrl:i,title:r,description:s,contentLabel:l}=e;return(0,o.BX)(a.u_,{isOpen:t,onClose:n,size:"m",contentLabel:l,children:[(0,o.tZ)(a.u_.Header,{title:r,subtitle:s}),(0,o.tZ)(B,{children:(0,o.tZ)(P,{src:i,title:r,allowFullScreen:!0})})]})},U=(0,r.Z)("div",{target:"empcz4u6"})("position:relative;height:100%;background-color:",(e=>{let{backgroundColor:t}=e;return t}),";:before{content:'';position:absolute;width:100%;height:100%;background-image:url('",(e=>{let{thumbnail:t}=e;return t}),"');background-repeat:no-repeat;background-position:center center;background-size:cover;opacity:0.5;}"),$=(0,r.Z)("div",{target:"empcz4u5"})("display:flex;flex-direction:column;justify-content:center;align-items:center;width:48px;height:48px;background-color:",a.TV.color.primary_cta,";border-radius:50%;transition:transform 150ms linear;"),M=(0,r.Z)("div",{target:"empcz4u4"})("position:absolute;width:100%;height:100%;background-color:transparent;display:flex;flex-direction:column;justify-content:center;align-items:center;transition:all 150ms linear;:hover{cursor:pointer;background-color:",a.TV.color.primary_cta,"30;& ",$,"{transform:scale(1.2);}}"),z=(0,r.Z)(a.JO,{target:"empcz4u3"})("width:24px;height:24px;left:2px;color:",a.TV.color.text_default_inverse,";"),G=(0,r.Z)("div",{target:"empcz4u2"})("position:absolute;display:flex;width:100%;bottom:0;with:100%;background-color:",(e=>{let{withDescription:t}=e;return t?`${a.TV.color.text_light}`:"transparent"}),";flex-direction:row;padding:6px ",a.TV.spacer.x5pt5," 6px ",a.TV.spacer.x1pt5,";"),j=(0,r.Z)("span",{target:"empcz4u1"})("display:block;color:",a.TV.color.text_default_inverse,";",a.TV.text("subtitle2"),";white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"),X=(0,r.Z)("span",{target:"empcz4u0"})("display:flex;position:absolute;right:",a.TV.spacer.x1,";bottom:",a.TV.spacer.x1,";padding:0 ",a.TV.spacer.x0,";background-color:",a.TV.BRAND_COLORS.neutral_900,";border-radius:2px;",a.TV.text("subtitle3"),";font-weight:600;color:",a.TV.color.text_default_inverse,";"),F=e=>{let{title:t,videoUrl:n,thumbnail:i,duration:r,description:s,modalContentLabel:l,backgroundColor:c=a.TV.BRAND_COLORS.noon_100,onClick:d}=e;const[h,g]=(0,u.useState)(!1),p=Boolean(s);return(0,o.BX)(o.HY,{children:[(0,o.BX)(U,{backgroundColor:c,thumbnail:i,children:[(0,o.tZ)(M,{"aria-label":"thumbnail",role:"button",onClick:()=>{g(!0),d&&d()},children:(0,o.tZ)($,{children:(0,o.tZ)(z,{icon:"play_alt"})})}),(0,o.BX)(G,{withDescription:p,children:[p?(0,o.tZ)(j,{"data-testid":"description",children:s}):null,(0,o.tZ)(X,{children:r})]})]}),(0,o.tZ)(H,{contentLabel:l,title:t,videoUrl:n,isOpen:h,closeModal:()=>{g(!1)}})]})}},82:(e,t,n)=>{n.d(t,{x:()=>g});var i=n(95851),r=n(46714),a=n(15725),o=n(6767),s=n(52556),l=n(71209),c=n(33424),d=n(91995);const h=(0,i.Z)(s.Z,{target:"eulzvs20"})("max-height:",30,"px;overflow:hidden;"),g=e=>{let{data:t,stroke:n=c.Ic[0].shade_400}=e;const i=e=>e.value??0,s=(0,a.Z)({range:[5,25],domain:[Math.max(...t.map(i)),0]});return(0,d.tZ)(h,{children:e=>{const a=(0,o.Z)({range:[5,e.width-5],domain:[t[0].date,t[t.length-1].date]});return(0,d.tZ)("svg",{width:e.width,height:30,children:(0,d.tZ)(r.Z,{data:t,x:e=>a((e=>e.date)(e)),y:e=>s(i(e)),strokeWidth:2,stroke:n,curve:l.curveCardinal})})}})}},33424:(e,t,n)=>{n.d(t,{Eu:()=>l,Ic:()=>i,be:()=>s,j6:()=>a,qN:()=>r});const i=[{shade_400:"#324FBE",shade_300:"#7484CB",shade_200:"#A0ABDD",shade_100:"#CFD5EE"},{shade_400:"#EE6382",shade_300:"#F78DA0",shade_200:"#FDB4BE",shade_100:"#FFD9DE"},{shade_400:"#15A1C1",shade_300:"#6CB8D0",shade_200:"#A1CFE0",shade_100:"#D1E7EF"},{shade_400:"#C246AC",shade_300:"#D479C1",shade_200:"#E5A6D5",shade_100:"#F3D2EA"},{shade_400:"#23A68E",shade_300:"#6ABDA9",shade_200:"#9ED3C5",shade_100:"#CFE9E2"}],r={shade_400:"#636985",shade_300:"#888CA2",shade_200:"#AFB1C0",shade_100:"#D6D7DF"},a=r.shade_100,o=i.map((e=>e.shade_400)),s=e=>Array.from({length:e},((e,t)=>o[t%o.length])),l=e=>o[e%o.length]},61824:(e,t,n)=>{n.d(t,{A:()=>l});var i=n(68212),r=n(2758),a=n(32009),o=n(91995);const s={m:16,l:32,xl:48};function l(e){let{code:t="",size:n="m",...l}=e;if(null==t||!(0,a.Z)(t.toUpperCase()))return(0,o.tZ)(i.JO,{size:n,icon:"unknown",color:"text_light",...l});const c=t.toUpperCase(),d=r.ZP[c];return(0,o.tZ)(d,{width:s[n],...l})}},34447:(e,t,n)=>{n.d(t,{Sq:()=>l,WQ:()=>s,ZO:()=>a,dQ:()=>o});var i=n(58946),r=n(36365);function a(e,t){const n=new URL(window.location.href),a=n.searchParams.get(`filters${0===t?"":t+1}`),o=n.searchParams.get(`segment${0===t?"":t+1}`);let s,l=(0,i.S)();if(null!=a)l=JSON.parse(a);else if(null!=o){const t=parseInt(o,10)||-1,n=e.find((e=>e.id===t));n&&(s=n.id,l=n.filters)}return{filtersInUiFormat:(0,r.rm)(l),segmentId:s,isDefaultValue:null==a}}function o(e){return a(e,0)}function s(){const e=new URL(window.location.href).searchParams.get("date"),t=null==e;return{dateRange:t?(0,i.g)().dateRange:(0,r.rm)(JSON.parse(e)).dateRange,isDefaultValue:t}}function l(){const e=new URL(window.location.href).searchParams.get("steps"),t=null==e;return{stepsList:t?[[],[]]:JSON.parse(e).map((e=>(0,r.rm)(e).filterList)),isDefaultValue:t}}},77286:(e,t,n)=>{n.d(t,{oM:()=>Se,f8:()=>Ze,uZ:()=>$n,Kg:()=>ht,L7:()=>Qe,S6:()=>Ye,wz:()=>Je,co:()=>G,Ho:()=>at,FL:()=>q,yU:()=>Yn,Lp:()=>ti,cN:()=>Ke,aJ:()=>K,Yf:()=>ii,ut:()=>f,mh:()=>Mn,mt:()=>Qn,XR:()=>et,Gj:()=>Jn,Hj:()=>re,td:()=>P,DC:()=>N,am:()=>U,PG:()=>be,Ak:()=>hn,Io:()=>x,o9:()=>we,ZR:()=>Te,YS:()=>ze,VV:()=>ei,Aw:()=>ye,iF:()=>Bn,g9:()=>Ge,O$:()=>Me,ok:()=>$e,nY:()=>je,vj:()=>Gn,ap:()=>ni,Jc:()=>qn,vA:()=>A,IC:()=>mi,iL:()=>Si,SB:()=>Ei,Pb:()=>Oe,Bi:()=>gn,dt:()=>Ve,qp:()=>Zi,WV:()=>pi,aQ:()=>wi,QF:()=>Xe,G9:()=>It,OA:()=>fi,Mw:()=>xi,zD:()=>bi,ux:()=>ki,xL:()=>_i,gX:()=>vi,UA:()=>w,c1:()=>Q});var i=n(16346),r=n(68212),a=n(95851);const o=(0,a.Z)("div",{target:"e5diavk9"})({name:"11en623",styles:"display:flex;flex-direction:column;align-items:center;justify-content:center"}),s=(0,a.Z)("div",{target:"e5diavk8"})({name:"1azakc",styles:"text-align:center"}),l=(0,a.Z)(r.xv,{target:"e5diavk7"})(r.TV.text("subtitle1"),";"),c=(0,a.Z)("div",{target:"e5diavk6"})("padding-top:",(e=>{let{hasExtraPadding:t}=e;return!0===t?r.TV.spacer.x2:r.TV.spacer.x1}),";"),d=((0,a.Z)("div",{target:"e5diavk5"})("padding-top:",r.TV.spacer.x1,";"),(0,a.Z)(r.xv,{target:"e5diavk4"})({name:"ti75j2",styles:"margin:0"})),h=(0,a.Z)("div",{target:"e5diavk3"})("display:block;margin-bottom:",r.TV.spacer.x3,";"),g=(0,a.Z)("img",{target:"e5diavk2"})("margin-bottom:",r.TV.spacer.x2pt5,";"),u=(0,a.Z)(d,{target:"e5diavk1"})("margin-bottom:",r.TV.spacer.x0,";"),p=(0,a.Z)(d,{target:"e5diavk0"})({name:"1l0p3iw",styles:"white-space:pre-line"});var m=n(91995);const f=e=>{let{shouldOpenManualRetaker:t,onRetry:n}=e;const{t:a}=(0,i.$G)("heatmaps");return(0,m.tZ)(o,{children:(0,m.BX)(s,{children:[(0,m.tZ)(h,{children:(0,m.tZ)(r.JO,{icon:"warning_alt",size:"l",color:"text_disabled"})}),(0,m.tZ)(l,{children:a("error-states.generation-error.title")}),(0,m.tZ)(c,{children:(0,m.tZ)(d,{as:"p",textType:"caption",color:"text_light",children:a("error-states.generation-error."+(!0===t?"subtitle-open-manual-retaker":"subtitle"))})}),(0,m.tZ)(c,{hasExtraPadding:!0,children:(0,m.tZ)(r.zx,{kind:"secondary",onClick:n,children:a("error-states.generation-error."+(!0===t?"action-retaker":"action"))})})]})})},v=(0,a.Z)(d,{target:"ec0ma5q0"})({name:"1l0p3iw",styles:"white-space:pre-line"}),x=()=>{const{t:e}=(0,i.$G)();return(0,m.tZ)(o,{children:(0,m.BX)(s,{children:[(0,m.tZ)(h,{children:(0,m.tZ)(r.JO,{icon:"warning_alt",size:"l",color:"text_disabled"})}),(0,m.tZ)(l,{children:e("heatmaps:regex-error.title")}),(0,m.tZ)(c,{children:(0,m.tZ)(v,{as:"p",textType:"caption",color:"text_light",children:e("heatmaps:regex-error.description")})})]})})};var _=n(98870),T=n(73132),y=n(91998);function w(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;const{data:n}=(0,_.U)({sessionFilters:{dateRange:{type:y.A.RELATIVE,amount:30,unit:y.u.DAYS},filterList:[]},siteId:e,operation:T.cm.COUNT,groupBy:T.NF.PAGE_URL,limit:t},!0,T.dK.Mid);return null!=n?.data?.resultSeries&&n.data.resultSeries[0].values.length>0?n.data.resultSeries[0].values.map((e=>{let{category:t,value:n}=e;return{pageUrl:t,sessionCount:n}})):null}var b=n(72963),S=n(24654);const Z=e=>{let{sessionCount:t,isAbbreviated:n}=e;const{t:r}=(0,i.$G)();return!0===n?(0,m.tZ)(m.HY,{children:`${(0,b.Hr)(t)} ${(0,S.H)({one:r("heatmaps:session-counts.session-text"),other:r("heatmaps:session-counts.sessions-text")},t)}`}):(0,m.BX)(i.cC,{i18nKey:"heatmaps:session-counts.number-of-sessions",count:t,children:[{sessionCount:t}," sessions"]})},k=n.p+"8ed4ffc0780f7af2a568.svg",E=(0,a.Z)("div",{target:"e1ixd6d3"})("margin-top:",r.TV.spacer.x2pt5,";"),C=(0,a.Z)(r.xv,{target:"e1ixd6d2"})("margin-bottom:",r.TV.spacer.x1pt5,";"),I=(0,a.Z)("div",{target:"e1ixd6d1"})("margin-bottom:",r.TV.spacer.x1,";display:flex;flex-direction:row;gap:",r.TV.spacer.x2,";"),R=(0,a.Z)(r.rU,{target:"e1ixd6d0"})("flex-grow:1;",r.TV.text("caption")," text-align:initial;"),A=e=>{let{showSuggestions:t,siteId:n,onNavigateToHeatmap:a}=e;const{t:l}=(0,i.$G)(),c=w(n,3);return(0,m.tZ)(o,{children:(0,m.BX)(s,{children:[(0,m.tZ)(g,{alt:"Title",src:k}),(0,m.tZ)(u,{as:"p",textType:"subtitle1",children:l("heatmaps:error-states.wait-longer.title")}),(0,m.tZ)(p,{as:"p",textType:"caption",textColor:"text_light",children:l("heatmaps:error-states.wait-longer.subtitle")}),!0===t&&c&&(0,m.BX)(E,{children:[(0,m.tZ)(C,{as:"p",textType:"caption",textColor:"text_light",children:l("heatmaps:error-states.wait-longer.suggestions")}),c.map((e=>(0,m.BX)(I,{children:[(0,m.tZ)(R,{as:"button",kind:"standalone",onClick:()=>{void 0!==a&&a(e.pageUrl)},children:e.pageUrl}),(0,m.tZ)(r.xv,{textType:"caption",textColor:"text_disabled",children:(0,m.tZ)(Z,{sessionCount:e.sessionCount})})]},e.pageUrl)))]})]})})},O=n.p+"bdc52fe20ac64673e0e5.svg",V=(0,a.Z)(s,{target:"efyl62v0"})({name:"51hfk1",styles:"max-width:320px"}),N=()=>{const{t:e}=(0,i.$G)();return(0,m.tZ)(o,{children:(0,m.BX)(V,{children:[(0,m.tZ)(g,{alt:"Title",src:O}),(0,m.tZ)(u,{as:"p",textType:"subtitle1",children:e("heatmaps:error-states.no-data-found.title")}),(0,m.tZ)(p,{as:"p",textType:"caption",textColor:"text_light",children:e("heatmaps:error-states.no-data-found.subtitle")})]})})},D=n.p+"49917f502bce7ce9bdc3.svg",L=(0,a.Z)(s,{target:"e141wk6q0"})({name:"51hfk1",styles:"max-width:320px"}),P=()=>{const{t:e}=(0,i.$G)();return(0,m.tZ)(o,{children:(0,m.BX)(L,{children:[(0,m.tZ)(g,{alt:"Title",src:D}),(0,m.tZ)(u,{as:"p",textType:"subtitle1",children:e("heatmaps:error-states.check-tracking-code.title")}),(0,m.tZ)(p,{as:"p",textType:"caption",textColor:"text_light",children:e("heatmaps:error-states.check-tracking-code.subtitle")}),(0,m.tZ)(c,{hasExtraPadding:!0,children:(0,m.tZ)(r.zx,{as:"a",icon:"open_new_window",kind:"secondary",isExternal:!0,href:"https://help.hotjar.com/hc/en-us/articles/360016303294-How-to-Check-That-Hotjar-Is-Working",children:e("heatmaps:error-states.check-tracking-code.action-verify")})})]})})},B=n.p+"d3b895ff460e95cdf059.svg",H=(0,a.Z)(s,{target:"e15aubk30"})({name:"51hfk1",styles:"max-width:320px"}),U=e=>{let{onUpgrade:t}=e;const{t:n}=(0,i.$G)();return(0,m.tZ)(o,{children:(0,m.BX)(H,{children:[(0,m.tZ)(g,{alt:"Title",src:B}),(0,m.tZ)(u,{as:"p",textType:"subtitle1",children:n("heatmaps:error-states.increase-coverage.title")}),(0,m.tZ)(p,{as:"p",textType:"caption",textColor:"text_light",children:n("heatmaps:error-states.increase-coverage.subtitle")}),(0,m.tZ)(c,{hasExtraPadding:!0,children:(0,m.tZ)(r.rU,{kind:"standalone",isExternal:!0,href:"https://help.hotjar.com/hc/en-us/articles/1500011350202-How-Does-Sampling-Work",children:n("heatmaps:error-states.increase-coverage.action-how-sampling-work")})}),(0,m.tZ)(c,{hasExtraPadding:!0,children:(0,m.tZ)(r.zx,{icon:"crown",kind:"secondary",onClick:t,children:n("heatmaps:error-states.increase-coverage.action-upgrade")})})]})})};var $=n(64934);const M=(0,a.Z)("div",{target:"eogx2ei1"})("position:absolute;left:0;right:0;margin:",r.TV.spacer.x2pt5," auto 0;display:flex;padding-left:",r.TV.spacer.x2,";"),z=(0,a.Z)(r.xv,{target:"eogx2ei0"})("display:inline-flex;align-items:center;margin-right:",r.TV.spacer.x1,";"),G=e=>{let{onThumbsUpClick:t,onThumbsDownClick:n,onSurveyVisible:a}=e;const{t:o}=(0,i.$G)(),s=(0,$.useRef)(null);return(0,$.useEffect)((()=>{let e=null;const t=new IntersectionObserver((e=>{let[n]=e;n.isIntersecting&&(a(),s.current&&t.unobserve(s.current))}));return s.current&&(t.observe(s.current),e=s.current),()=>{e&&t.unobserve(e)}}),[a]),(0,m.BX)(M,{ref:s,children:[(0,m.tZ)(z,{textType:"caption",children:o("heatmaps:general-survey.title")}),(0,m.tZ)(r.hU,{size:"s",kind:"ghost",description:o("heatmaps:general-survey.thumbs-up-tooltip"),tooltipText:o("heatmaps:general-survey.thumbs-up-tooltip"),icon:"thumbs_up",onClick:t}),(0,m.tZ)(r.hU,{size:"s",kind:"ghost",description:o("heatmaps:general-survey.thumbs-down-tooltip"),tooltipText:o("heatmaps:general-survey.thumbs-down-tooltip"),icon:"thumbs_down",onClick:n})]})};var j=n(55794),X=n(13212);let F=null;function W(){F&&(F.close(),F=null)}let q;!function(e){e.DESKTOP="desktop",e.PHONE="phone",e.TABLET="tablet"}(q||(q={}));const K={[q.PHONE]:380,[q.TABLET]:800,[q.DESKTOP]:1280},Y=e=>{const t=new URL(e);return`${t.protocol}//${t.hostname}`};function Q(e,t){const[n,i]=(0,$.useState)(!1),r=(0,$.useRef)(""),a=(0,$.useRef)(void 0),o=t=>{t&&function(e,t,n){F&&W(),F=window.open(e,t,n),F&&F.focus()}(function(e){const t=/^https?:\/\//i;return t.test(e)?e.replace(t,"https://"):`https://${e}`}(t),"_blank",`width=${K[e]},height=${window.screen.availHeight-150}`)},s=(0,$.useCallback)((e=>{if("retaker_ready"===e?.data?.type&&void 0!==e.data.origin&&Boolean(e.data.origin)){if(Boolean(r.current)&&e.data.origin!==r.current)return;r.current=e.data.origin,"retaker_start",n=e.data.origin,i=a.current,F&&F.window.postMessage({type:"retaker_start",mode:i},n)}var n,i;"retaker_send_html"===e?.data?.type&&Y(e.origin)===Y(r.current)&&e?.data?.payload?(t(e.data.payload.html,e.data.payload.trigger),W()):j.uT(`Error retaking screenshot of ${e.origin}, originRef: ${r.current}`,X.z.Warning)}),[t]);return(0,$.useEffect)((()=>(window.addEventListener("message",s),()=>{window.removeEventListener("message",s)})),[s]),(0,$.useEffect)((()=>()=>{W()}),[]),{handleManualRetakerClick:(e,t)=>{a.current=t,e?o(e):i(!0)},isManualRetakerUrlModalOpen:n,handleManualRetakerUrlSubmit:e=>{o(e),i(!1)},handleManualRetakerUrlModalClose:()=>{i(!1)}}}var J=n(79558),ee=n(19349);const te=(0,a.Z)(r.gN,{target:"ehe6o6u1"})({name:"fzuqnb",styles:"width:unset"}),ne=(0,a.Z)(r.xv,{target:"ehe6o6u0"})("display:inline-block;margin-top:",r.TV.spacer.x0,";"),ie="url-form",re=e=>{let{isOpen:t,onSubmit:n,onClose:a}=e;const{t:o}=(0,i.$G)(),{register:s,handleSubmit:l,errors:c}=(0,J.cI)({mode:"onSubmit",reValidateMode:"onChange"});return(0,m.BX)(r.u_,{appElementSelector:"#root",contentLabel:o("heatmaps:manual-retaker.url-modal.content-label"),isOpen:t,onClose:a,children:[(0,m.tZ)(r.u_.Header,{title:o("heatmaps:manual-retaker.url-modal.title"),subtitle:o("heatmaps:manual-retaker.url-modal.subtitle")}),(0,m.tZ)(r.u_.Body,{children:(0,m.tZ)("form",{onSubmit:l((e=>{let{url:t}=e;return n(t)})),id:ie,children:(0,m.tZ)(r.Kq,{direction:"column",preset:"form",children:(0,m.BX)(te,{labelText:o("heatmaps:manual-retaker.url-modal.enter-url"),inputId:"manual-retaker-url-input",children:[(0,m.tZ)(r.oi,{name:"url",placeholder:o("heatmaps:manual-retaker.url-modal.placeholder"),ref:s({required:o("heatmaps:manual-retaker.url-modal.required-url"),validate:e=>ee.mQ(e,!0)||o("heatmaps:manual-retaker.url-modal.invalid-url")}),isInvalid:!!c.url}),c.url&&(0,m.tZ)(ne,{as:"span",textColor:"text_danger",textType:"caption",children:c.url?.message})]})})})}),(0,m.BX)(r.u_.Footer,{children:[(0,m.tZ)(r.zx,{kind:"ghost",onClick:a,children:o("heatmaps:manual-retaker.url-modal.cancel")}),(0,m.tZ)(r.zx,{kind:"primary",type:"submit",form:ie,children:o("heatmaps:manual-retaker.url-modal.continue")})]})]})};var ae=n(33474),oe=n(80495),se=n(15690);n(91018),n(74870);const le=(0,$.createContext)({size:"s"});let ce;!function(e){e[e.ERROR=0]="ERROR",e[e.SUCCESS=1]="SUCCESS"}(ce||(ce={}));const de={s:{horizontal:r.TV.spacer.x3,vertical:r.TV.spacer.x2},m:{horizontal:r.TV.spacer.x4,vertical:r.TV.spacer.x3}},he=(0,a.Z)(oe.Qd,{target:"e1kbkyuq6"})({name:"1su3dps",styles:"position:relative;border-bottom:none;z-index:1;&:focus-within,&:hover{z-index:2;}"}),ge=(0,a.Z)(oe.KF,{target:"e1kbkyuq5"})("position:relative;z-index:3;border:none;background:none;padding:",r.TV.spacer.x3," ",r.TV.spacer.x2," ",r.TV.spacer.x1," ",r.TV.spacer.x2,";display:flex;align-items:center;text-align:left;width:100%;cursor:pointer;&:hover{background-color:",r.TV.color.neutral_100,";box-shadow:0 0 0 1px ",r.TV.color.ui_border_alt,";}&:focus{outline:none;box-shadow:0 0 0 1px ",r.TV.color.ui_border_alt,",0 0 0 2px ",r.TV.color.ui_background,",0 0 0 4px ",r.TV.color.focus,";}"),ue=(0,a.Z)(r.su,{target:"e1kbkyuq4"})({name:"ozd7xs",styles:"flex-shrink:0"}),pe=(0,a.Z)(ue,{target:"e1kbkyuq3"})("transform:rotate(0deg);",r.TV.transition("transform"),";"),me=(0,a.Z)(r.xv,{target:"e1kbkyuq2"})({name:"9sfftg",styles:"white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block"}),fe=(0,a.Z)("div",{target:"e1kbkyuq1"})((e=>{let{size:t}=e;return`\n    padding-right: ${de[t].horizontal};\n    flex-grow: 1;\n  `}),";"),ve=(0,a.Z)(oe.Hk,{target:"e1kbkyuq0"})((e=>{let{size:t}=e;return`\n    position: relative;\n    z-index: 2;\n    padding: ${r.TV.spacer.x1} ${de[t].horizontal} ${r.TV.spacer.x2}\n      ${de[t].horizontal};\n    &:focus {\n      outline: none;\n    }\n  `}),";"),xe=e=>{let{title:t,icon:n,iconSize:i=24,className:r,size:a="s",onToggle:o}=e;const{isExpanded:s,index:l}=(0,oe.bB)(),{onToggleSection:c}=(0,$.useContext)(le),{openPanels:d}=(0,oe.EF)(),h=(0,$.useRef)(d),g=(0,$.useCallback)(((e,t)=>{o&&o(t),c&&c({index:e,open:t})}),[o,c]);return(0,$.useEffect)((()=>{h.current=d;const e=d.includes(l);return e&&g(l,!0),()=>{setTimeout((()=>{e&&!h.current.includes(l)&&g(l,!1)}),0)}}),[d,l,g]),(0,m.BX)(ge,{className:r,children:[n&&(0,m.tZ)(ue,{color:"text_default",icon:n,pixelSize:i,css:(0,ae.iv)("margin-right:",de[a].horizontal,";","")}),(0,m.tZ)(fe,{size:a,children:(0,m.tZ)(me,{textType:"subtitle1",children:t})}),(0,m.tZ)(pe,{color:"text_default",icon:"chevron_bottom",pixelSize:16,css:s?{transform:"rotate(180deg)"}:{}})]})},_e=e=>{let{title:t,description:n,icon:i,iconSize:r,dataTestId:a,status:o,children:s,className:l,headerCustomCss:c,onToggle:d}=e;const{size:h}=(0,$.useContext)(le);return(0,m.BX)(he,{"data-testid":null!=a?`accordion-item-${a}`:void 0,children:[(0,m.tZ)(xe,{title:t,description:n,icon:i,iconSize:r,className:l,status:o,onToggle:d}),(0,m.tZ)(ve,{size:h,css:c,children:s})]})},Te=230,ye=320,we=r.TV.spacer.x8,be=r.TV.spacer.x5,Se=r.TV.spacer.x5,Ze=r.TV.spacer.x4,ke=r.TV.spacer.x1pt5;var Ee=n(3413);let Ce,Ie;!function(e){e.LAST_24_HOURS="Last 24 hours",e.LAST_7_DAYS="Last 7 days",e.LAST_15_DAYS="Last 15 days",e.LAST_30_DAYS="Last 30 days",e.LAST_3_MONTHS="Last 3 months",e.LAST_6_MONTHS="Last 6 months",e.LAST_12_MONTHS="Last 12 months"}(Ce||(Ce={})),function(e){e.LAST_24_HOURS="24h",e.LAST_7_DAYS="7d",e.LAST_15_DAYS="15d",e.LAST_30_DAYS="30d",e.LAST_3_MONTHS="3m",e.LAST_6_MONTHS="6m",e.LAST_12_MONTHS="12m"}(Ie||(Ie={}));const Re={type:y.A.RELATIVE,label:Ce.LAST_30_DAYS,amount:30,unit:y.u.DAYS,short:Ie.LAST_30_DAYS},Ae=(y.A.RELATIVE,y.u.DAYS,[{type:y.A.RELATIVE,label:Ce.LAST_24_HOURS,amount:24,unit:y.u.HOURS,short:Ie.LAST_24_HOURS},{type:y.A.RELATIVE,label:Ce.LAST_7_DAYS,amount:7,unit:y.u.DAYS,short:Ie.LAST_7_DAYS},{type:y.A.RELATIVE,label:Ce.LAST_15_DAYS,amount:15,unit:y.u.DAYS,short:Ie.LAST_15_DAYS},Re,{type:y.A.RELATIVE,label:Ce.LAST_3_MONTHS,amount:3,unit:y.u.MONTHS,short:Ie.LAST_3_MONTHS},{type:y.A.RELATIVE,label:Ce.LAST_6_MONTHS,amount:6,unit:y.u.MONTHS,short:Ie.LAST_6_MONTHS},{type:y.A.RELATIVE,label:Ce.LAST_12_MONTHS,amount:12,unit:y.u.MONTHS,short:Ie.LAST_12_MONTHS}]),Oe=(e,t)=>Ae.find((n=>n.amount===e&&n.unit===t))||Re,Ve=e=>{switch(e.type){case y.A.ABSOLUTE:return{fromTimestamp:(0,Ee._)(e.from).startOf("d").unix(),toTimestamp:(0,Ee._)(e.to).endOf("day").unix()};case y.A.RELATIVE:return(e=>{const t=(e=>Ae.find((t=>t.short===e))||Re)(e);let n=(0,Ee._)().subtract(t.amount,t.unit);return t.label!==Ce.LAST_24_HOURS&&(n=n.startOf("day")),{fromTimestamp:n.unix(),toTimestamp:(0,Ee._)().endOf("day").unix()}})(Oe(e.amount,e.unit).short);default:throw new Error("Unknown date range type")}};var Ne=n(62339);const De=(0,a.Z)("div",{target:"encnddn2"})("display:flex;flex-direction:column;width:100%;border-bottom:4px solid ",r.TV.color.ui_border_light,";&:last-of-type{border-bottom:0;}");var Le={name:"1crufmv",styles:"&:last-of-type{border-bottom:0;}"};const Pe=(0,a.Z)("div",{target:"encnddn1"})("display:flex;width:100%;padding:",ke,";border-bottom:1px solid ",r.TV.color.ui_border_light,";",(e=>{let{keepLastBorder:t}=e;return!t&&Le}),";"),Be=(0,a.Z)(Pe,{target:"encnddn0"})({name:"qdeacm",styles:"flex-direction:column"}),He=e=>{let{onDeActivateSecondaryView:t,children:n}=e;const{t:a}=(0,i.$G)("heatmaps"),o=(0,Ne.k)(a("general-terms.back"));return(0,m.BX)(m.HY,{children:[(0,m.tZ)(Pe,{children:(0,m.tZ)(r.hU,{kind:"ghost",icon:"arrow_left_alone",size:"s",title:o,tooltipText:o,description:o,onClick:t})}),(0,m.tZ)(Be,{children:n})]})};var Ue=n(12245);let $e;!function(e){e.EXACT="exact",e.CONTAINS="contains",e.STARTS_WITH="starts_with",e.ENDS_WITH="ends_with",e.SIMPLE="simple_match",e.REGEX="regex"}($e||($e={}));const Me={[$e.EXACT]:"heatmaps:targeting.exact.placeholder",[$e.SIMPLE]:"heatmaps:targeting.simple.placeholder",[$e.CONTAINS]:"heatmaps:targeting.contains.placeholder",[$e.STARTS_WITH]:"heatmaps:targeting.starts-with.placeholder",[$e.ENDS_WITH]:"heatmaps:targeting.ends-with.placeholder",[$e.REGEX]:"heatmaps:targeting.regex.placeholder"},ze="heatmaps:targeting.simple.autocomplete-placeholder";let Ge;!function(e){e.SINGLE_PAGE="single_page",e.EXACT="exact",e.CONTAINS="contains",e.STARTS_WITH="starts_with",e.ENDS_WITH="ends_with",e.REGEX="regex"}(Ge||(Ge={}));const je={[$e.EXACT]:"heatmaps:targeting.exact.label",[$e.CONTAINS]:"heatmaps:targeting.contains.label",[$e.STARTS_WITH]:"heatmaps:targeting.starts-with.label",[$e.ENDS_WITH]:"heatmaps:targeting.ends-with.label",[$e.SIMPLE]:"heatmaps:targeting.simple.label",[$e.REGEX]:"heatmaps:targeting.regex.label"};function Xe(e){return e===$e.SIMPLE||e===$e.EXACT}const Fe=n.p+"543195bd90a1b0b41aa1.svg",We=n.p+"f6a57d01d25ea5c87944.svg",qe={REFRESH:"refresh",TAKE_NEW:"take_new",MANUAL_RETAKE:"manual_retake",MANUAL_RETAKE_DYNAMIC:"manual_retake_dynamic_elements",MANUAL_RETAKE_COOKIES_BANNERS:"manual_retake_cookies_banners",MANUAL_RETAKER_SHORTCUT:"manual_retaker_shortcut"},Ke={URL_SEARCH:"url_search",AUTOCOMPLETE:"autocomplete",DEFAULT_PAGE:"default_page",SAVED_HEATMAP:"saved_heatmap",...qe},Ye={SEARCH_BAR:"heatmap_search_bar",SIDE_BAR:"heatmap_sidebar",SAVE_BUTTON:"heatmap_save_button",...qe},Qe={REPORT:"heatmap.report.continuous-capture",SIDE_BAR:"heatmap.list.continuous-capture-sidebar",HEADER:"heatmap.list.continuous-capture-header"},Je={CC_HEATMAPS:"Continuous Capture Heatmaps",REPORT:"Heatmap Report",TC_PENDING_STATE:"Pending Installation Empty State",URL_SEARCH:"Heatmap URL Search",SIDE_BAR:"Heatmap Sidebar",HEATMAP_GENERATION_ERROR:"Heatmap Generation Error",HEADER:"Heatmap Header",SMART_PANEL:"Smart Panel"},et={basicScreenshot:"basicScreenshot",dynamicElements:"dynamicElements",cookiesBanners:"cookiesBanners"},tt={[et.basicScreenshot]:Ye.MANUAL_RETAKE,[et.dynamicElements]:Ye.MANUAL_RETAKE_DYNAMIC,[et.cookiesBanners]:Ye.MANUAL_RETAKE_COOKIES_BANNERS},nt=(0,a.Z)(Pe,{target:"eirn1ut1"})("align-items:center;cursor:pointer;&:hover{background-color:",r.TV.color.bg_hover,";}"),it=(0,a.Z)("img",{target:"eirn1ut0"})("margin-right:",r.TV.spacer.x2,";"),rt=e=>{let{currentSite:t,handleManualRetakerClick:n,originUrl:a,selectedTargetingValue:o}=e;const{t:s}=(0,i.$G)("heatmaps"),l=Xe(o),c=e=>{n(l&&null!==a&&a.length>0?a:"",e),void 0!==t&&(0,Ue.ob)({name:tt[e],uiPosition:Je.SMART_PANEL,groupData:Ue.P6.extractSiteGroupingProps(t),data:{state_event_was_triggered_on:Qe.REPORT}})};return(0,m.tZ)(m.HY,{children:(0,m.BX)(De,{children:[(0,m.BX)(nt,{role:"button",onClick:()=>c(et.dynamicElements),children:[(0,m.tZ)(it,{alt:s("smart-panel.retake.retake-dynamic"),src:Fe}),(0,m.tZ)(r.xv,{textType:"subtitle2",as:"span",children:s("smart-panel.retake.retake-dynamic")})]}),(0,m.BX)(nt,{role:"button",onClick:()=>c(et.basicScreenshot),children:[(0,m.tZ)(it,{alt:s("smart-panel.retake.take-screenshot"),src:We}),(0,m.tZ)(r.xv,{textType:"subtitle2",as:"span",children:s("smart-panel.retake.take-screenshot")})]})]})})};let at;!function(e){e.CLICK="click",e.MOVEMENT="movement",e.SCROLL="scroll"}(at||(at={}));const ot=(0,a.Z)("span",{target:"e1stw91j3"})("align-items:center;display:inline-flex;width:100%;justify-content:space-between;padding:",r.TV.spacer.x1," 0;"),st=(0,a.Z)("span",{target:"e1stw91j2"})({name:"8irbms",styles:"display:inline-flex;align-items:center"}),lt=(0,a.Z)(r.JO,{target:"e1stw91j1"})("margin-right:",r.TV.spacer.x1pt5,";"),ct=(0,a.Z)(r.xv,{target:"e1stw91j0"})("border-bottom:1px dotted ",r.TV.color.text_light,";cursor:help;"),dt=e=>{let{leftText:t,leftIcon:n,rightText:i,isDisabled:a,disabledTooltipText:o,popoverProps:s}=e;const l=a?"text_disabled":"text_default";return(0,m.BX)(ot,{children:[(0,m.tZ)(r.u,{text:o??"",isDisabled:!a,children:(0,m.BX)(st,{children:[void 0!==n&&(0,m.tZ)(lt,{icon:n,color:l}),s&&!a?(0,m.tZ)(r.J2,{withCloseButton:!1,...s,children:(0,m.tZ)(ct,{as:"span",textColor:l,children:t})}):(0,m.tZ)(r.xv,{as:"span",textColor:l,children:t})]})}),(0,m.tZ)(r.u,{text:o??"",isDisabled:!a,children:(0,m.tZ)(r.xv,{as:"span",textColor:l,children:i})})]})},ht={RATE:"Rate Heatmap",INSTALL_TRACKING_CODE:"Install Tracking Code",CREATE_HEATMAP:"Save Heatmap",REMOVE_HEATMAP:"Remove Heatmap",EDIT_HEATMAP:"Edit Heatmap",OPEN_HEATMAP:"Open Heatmap",HEATMAP_ACCURATE:"Heatmap Accurate",HEATMAP_INACCURATE:"Heatmap Inaccurate",GENERAL_SURVEY:"General Survey",SHARE_LINK:"Short Link Heatmaps",HM_DOES_NOT_LOOK_RIGHT:"Heatmap Does Not Look Right",HM_NOT_CAPTURING_URL:"Heatmap Not Capturing Url",HM_SHOWS_COOKIES_BANNER:"Heatmap Shows Cookies Banner",HM_DOES_NOT_LOOK_RIGHT_RETAKER:"Heatmap Does Not Look Right Retaker",HM_NOT_CAPTURING_URL_RETAKER:"Heatmap Not Capturing Url Retaker",HM_SHOWS_COOKIES_BANNER_RETAKER:"Heatmap Shows Cookies Banner Retaker",FEEDBACK_CARD:"Feedback Card",TOP_CLICKS_WIDGET:"Top Clicks Widget",ERROR_WIDGET_VIEW_RECORDINGS_LIST:"View Recordings - Error Widget",ERROR_WIDGET_VIEW_TRENDS:"View Trends - Error Widget"},gt=(0,a.Z)("div",{target:"e1wf7wce1"})("width:100%;display:flex;align-items:center;justify-content:space-between;padding:",r.TV.spacer.x1," 0;"),ut=(0,a.Z)(r.rs,{target:"e1wf7wce0"})({name:"1ykowef",styles:"margin-bottom:0"}),pt=e=>{let{currentSite:t,device:n,isTopClicksWidgetActive:a,onTopClicksWidgetToggle:o}=e;const{t:s}=(0,i.$G)("heatmaps"),l=n===q.DESKTOP?s("smart-panel.top-clicks"):s("smart-panel.top-taps");return(0,m.BX)(gt,{className:"jh-hm-sp-top-clicks",children:[(0,m.tZ)(r.xv,{textType:"caption",children:l}),(0,m.tZ)(ut,{isChecked:a,onChange:e=>{void 0===t||e||(0,Ue.ob)({name:ht.TOP_CLICKS_WIDGET,uiPosition:Je.SMART_PANEL,groupData:Ue.P6.extractSiteGroupingProps(t),data:{state_event_was_triggered_on:Qe.REPORT}}),o(e)}})]})};function mt(e){let{currentSite:t,device:n,value:r,heatType:a,isTopClicksWidgetActive:o,onTopClicksWidgetToggle:s}=e;const{t:l}=(0,i.$G)("heatmaps");if(a!==at.CLICK)return null;const c=n===q.DESKTOP?l("general-terms.clicks"):l("general-terms.taps"),d=void 0!==r?`${(0,b.Hr)(r)}`:"-",h=`${(0,Ne.k)(l("general-terms.total"))} ${c}`;return(0,m.BX)(Be,{children:[(0,m.tZ)(dt,{leftText:h,rightText:d}),(0,m.tZ)(pt,{currentSite:t,device:n,isTopClicksWidgetActive:o,onTopClicksWidgetToggle:s})]})}var ft=n(54806),vt=n(14928),xt=n(23852),_t=n(4165),Tt=n(86422),yt=n(68733),wt=n(14334),bt=n(55885),St=n(48104),Zt=n(81084),kt=n(738);function Et(e){return{id:(0,wt.v4)(),kind:bt.w_.DeviceType,value:[e]}}function Ct(e){switch(e){case $e.EXACT:return St.qC.IS_EXACTLY;case $e.SIMPLE:return St.qC.IS;case $e.CONTAINS:return St.qC.CONTAINS;case $e.STARTS_WITH:return St.qC.STARTS_WITH;case $e.ENDS_WITH:return St.qC.ENDS_WITH;case $e.REGEX:return St.qC.REGEX;default:return St.qC.IS}}function It(e,t){const n=(0,yt.Z)(e.filters);t||n.filterList.push(Et(e.device));const i=Ct(e.match);return n.filterList.push({id:(0,wt.v4)(),kind:bt.w_.VisitedURL,value:{operation:i,value:e.url}}),n}function Rt(e){let{type:t,selectedDateRange:n,selectedTargetingValue:r,selectedDeviceType:a,searchPattern:o,currentSite:s,isDisabled:l,disabledTooltipText:c}=e,d="filters.rage_click",h=xt.Bh.RAGE_CLICK,g="rage_click",u="smart-panel.rage-clicks",p="hj-hm-sp-rage-clicks";"u-turns"===t&&(d="filters.u_turn",h=xt.Bh.U_TURN,g="uturn",u="smart-panel.u-turns",p="hj-hm-sp-u-turns");const{t:f}=(0,i.$G)("heatmaps"),v=(0,ft.y)(d,s),x=function(e){let{eventType:t,selectedDateRange:n,selectedTargetingValue:i,selectedDeviceType:r,searchPattern:a,siteId:o,enabled:s}=e;const l=_t.Ey(Ct(i))?.operation,c=l?l.toString():"SIMPLE_MATCH",d=(0,$.useMemo)((()=>({dateRange:n,filterList:[Et(r)]})),[n,r]),{data:h}=(0,_.U)({sessionFilters:d,siteId:o,operation:T.cm.COUNT,eventType:T.zL.AUTOTAG_RECORDING,eventFilters:{AND:[{EQUAL:{autotag_name:t}},{[c]:{[Tt.Bb.page_path]:a}}]}},s,T.dK.Mid);return h?.data.result}({eventType:h,selectedDateRange:n,selectedTargetingValue:r,selectedDeviceType:a,searchPattern:o,siteId:s.id,enabled:Boolean(!l&&v&&void 0!==n&&r&&a&&o)});if(!v)return null;const y=void 0!==x?`${(0,b.Hr)(x)}`:"-";return(0,m.tZ)(Pe,{className:p,"data-testid":p,children:(0,m.tZ)(dt,{leftText:f(u),rightText:y,leftIcon:g,isDisabled:l,disabledTooltipText:c})})}function At(e){let{selectedDateRange:t,selectedTargetingValue:n,selectedDeviceType:i,searchPattern:r,isDisabled:a,disabledTooltipText:o}=e;const{data:s}=(0,vt.PD)();return s&&s.id?(0,m.BX)(m.HY,{children:[(0,m.tZ)(Rt,{type:"rage-clicks",selectedDateRange:t,selectedTargetingValue:n,selectedDeviceType:i,searchPattern:r,currentSite:s,isDisabled:a,disabledTooltipText:o}),(0,m.tZ)(Rt,{type:"u-turns",selectedDateRange:t,selectedTargetingValue:n,selectedDeviceType:i,searchPattern:r,currentSite:s,isDisabled:a,disabledTooltipText:o})]}):null}function Ot(e){let{selectedDateRange:t,selectedTargetingValue:n,selectedDeviceType:r,searchPattern:a,currentSite:o,isDisabled:s,disabledTooltipText:l}=e;const{t:c}=(0,i.$G)("heatmaps"),d=Boolean(o.effectivePlan)&&"basic"!==o.effectivePlan,h=function(e){let{selectedTargetingValue:t,selectedDateRange:n,selectedDeviceType:i,searchPattern:r,siteId:a,enabled:o}=e;const s=_t.Ey(Ct(t))?.operation,l=s?s.toString():"SIMPLE_MATCH",c=(0,$.useMemo)((()=>({dateRange:n,filterList:[Et(i)]})),[n,i]),{data:d}=(0,_.U)({sessionFilters:c,siteId:a,operation:T.cm.COUNT,groupBy:T.NF.DROP_OFF,eventType:T.zL.PAGE_VISIT,eventFilters:{[l]:{[Tt.Bb.page_path]:r}}},o,T.dK.Mid);if(null!=d?.data?.resultSeries&&null!=d?.data?.total&&d.data.total>0&&d.data.resultSeries[0].values.length>0){const e=(d.data.resultSeries[0].values.find((e=>"1"===e.category))||{value:0}).value/d.data.total;return Math.round(1e3*e)/10}}({selectedDateRange:t,selectedTargetingValue:n,selectedDeviceType:r,searchPattern:a,siteId:o.id,enabled:!s}),g=void 0!==h?`${h}%`:"-";return d?(0,m.tZ)(Pe,{"data-testid":"hj-hm-sp-drop-off-rate",children:(0,m.tZ)(dt,{leftText:`${c("smart-panel.drop-off-rate")}`,rightText:g,leftIcon:"flow",isDisabled:s,disabledTooltipText:l,popoverProps:{title:c("smart-panel.drop-off-rate"),text:c("smart-panel.drop-off-rate-help"),actionText:c("smart-panel.read-more"),onActionPress:()=>{window.open("https://help.hotjar.com/hc/en-us/articles/360048489874-How-to-Change-Session-Capture-and-Site-Settings#session-targeting-tracking","_blank","noopener noreferrer")}}})}):null}function Vt(e){let{selectedDateRange:t,selectedTargetingValue:n,selectedDeviceType:i,searchPattern:r,currentSite:a,isDisabled:o,disabledTooltipText:s}=e;return a&&a.id?(0,m.tZ)(Ot,{selectedDateRange:t,selectedTargetingValue:n,selectedDeviceType:i,searchPattern:r,currentSite:a,isDisabled:o,disabledTooltipText:s}):null}function Nt(e){let{selectedDateRange:t,selectedTargetingValue:n,selectedDeviceType:r,searchPattern:a,currentSite:o,isDisabled:s,disabledTooltipText:l}=e;const{t:c}=(0,i.$G)("heatmaps"),d=function(e){let{selectedDateRange:t,selectedTargetingValue:n,selectedDeviceType:i,searchPattern:r,siteId:a,enabled:o}=e;const s=_t.Ey(Ct(n))?.operation,l=s?s.toString():"SIMPLE_MATCH",c=(0,$.useMemo)((()=>({dateRange:t,filterList:[Et(i)]})),[t,i]),{data:d}=(0,_.U)({sessionFilters:c,siteId:a,operation:T.cm.AVERAGE,property:T.NF.PAGE_VISIT_DURATION,eventType:T.zL.PAGE_VISIT,eventFilters:{[l]:{[Tt.Bb.page_path]:r}}},o,T.dK.Mid);return d?.data.result}({selectedDateRange:t,selectedTargetingValue:n,selectedDeviceType:r,searchPattern:a,siteId:o.id,enabled:!s}),h=void 0!==d?`${function(e){const t=Math.round(e/1e3),n=Math.floor(t/60);return`${n}:${String(t-60*n).padStart(2,"0")}`}(d)}`:"-";return(0,m.tZ)(Pe,{"data-testid":"hj-hm-sp-visit-duration",children:(0,m.tZ)(dt,{leftText:c("smart-panel.average-visit-duration"),rightText:h,leftIcon:"time",isDisabled:s,disabledTooltipText:l,popoverProps:{title:c("smart-panel.average-visit-duration"),text:c("smart-panel.average-visit-duration-help"),actionText:c("smart-panel.read-more"),onActionPress:()=>{window.open("https://help.hotjar.com/hc/en-us/articles/360048489874-How-to-Change-Session-Capture-and-Site-Settings#session-targeting-tracking","_blank","noopener noreferrer")}}})})}function Dt(e){let{selectedDateRange:t,selectedTargetingValue:n,selectedDeviceType:i,searchPattern:r,currentSite:a,isDisabled:o,disabledTooltipText:s}=e;return a&&a.id?(0,m.tZ)(Nt,{selectedDateRange:t,selectedTargetingValue:n,selectedDeviceType:i,searchPattern:r,currentSite:a,isDisabled:o,disabledTooltipText:s}):null}var Lt=n(65412),Pt=n(42365),Bt=n(73646),Ht=n(82),Ut=n(20387);const $t=e=>{let{view:t,siteId:n,selectedFiltersInUiFormat:i,selectedDeviceType:r,selectedTargetingValue:a,searchPattern:o,applyErrorFilter:s=!1}=e;const l=`/sites/${n}/${t}`,c=(0,yt.Z)(i);var d;d=r,c.filterList.push(Et(d)),s?((e,t,n)=>{n.filterList.push(function(e,t){return{id:(0,wt.v4)(),kind:bt.w_.Error,value:{operation:Zt.o.OCCURRED,subFilters:[{id:(0,wt.v4)(),kind:kt.C.PAGE_PATH,value:{operation:Ct(e),value:t}}]}}}(e,t))})(a,o,c):((e,t,n)=>{const i=Ct(e);n.filterList.push({id:(0,wt.v4)(),kind:bt.w_.VisitedURL,value:{operation:i,value:t}})})(a,o,c);const h=JSON.stringify((0,Ut.L)(c)),g=new URLSearchParams({filters:h});return new URL(`${l}?${g}`,window.location.href).toString()},Mt=(0,a.Z)("div",{target:"e1scbbwx7"})({name:"1yv7p8m",styles:"display:flex;flex-direction:row;flex:1;justify-content:flex-start;align-items:center"}),zt=(0,a.Z)(r.xv,{target:"e1scbbwx6"})({name:"1ky3h8p",styles:"margin:0;min-width:10%"}),Gt=(0,a.Z)("div",{target:"e1scbbwx5"})("height:",40,"px;display:flex;justify-content:center;"),jt=(0,a.Z)("div",{target:"e1scbbwx4"})("height:",40,"px;display:flex;align-items:center;gap:",r.TV.spacer.x1,";"),Xt=(0,a.Z)(jt,{target:"e1scbbwx3"})({name:"2o6p8u",styles:"justify-content:space-between"}),Ft=(0,a.Z)("div",{target:"e1scbbwx2"})({name:"1t29t6p",styles:"width:50%"}),Wt=(0,a.Z)(r.JO,{target:"e1scbbwx1"})("margin-right:",r.TV.spacer.x0pt5,";"),qt=(0,a.Z)("div",{target:"e1scbbwx0"})({name:"82a6rk",styles:"flex:1"}),Kt=e=>{let{value:t,lineChartData:n,currentSite:a,selectedDeviceType:o,selectedTargetingValue:s,searchPattern:l,isLoading:c=!1,isError:d=!1,isEmpty:h=!1,selectedFiltersInUiFormat:g}=e;const{t:u}=(0,i.$G)("heatmaps"),p=a.id,f=(0,$.useCallback)((e=>$t({view:e,siteId:p,selectedDeviceType:o,selectedTargetingValue:s,selectedFiltersInUiFormat:g,searchPattern:l,applyErrorFilter:!0})),[g,l,o,s,p]),v=(e,t)=>{(0,Ue.ob)({name:e,uiPosition:Je.SMART_PANEL,groupData:Ue.P6.extractSiteGroupingProps(a),data:{state_event_was_triggered_on:Qe.REPORT}}).finally((()=>t&&t()))},x=u("smart-panel.session-errors.widget.view-trends"),_={kind:"ghost",icon:"trends",tooltipText:x,description:x},T={kind:"ghost",icon:"play",tooltipText:u("smart-panel.session-errors.widget.view-recordings"),description:u("smart-panel.session-errors.widget.view-recordings")};return c?(0,m.tZ)(Gt,{children:(0,m.tZ)(r.aN,{})}):d?(0,m.BX)(jt,{children:[(0,m.tZ)(Wt,{icon:"error"}),(0,m.tZ)(r.xv,{children:u("smart-panel.session-errors.widget.error")})]}):h?(0,m.BX)(Xt,{children:[(0,m.tZ)(r.xv,{textType:"subtitle1",children:u("smart-panel.session-errors.widget.empty")}),(0,m.BX)("div",{children:[(0,m.tZ)(r.hU,{isDisabled:!0,...T}),(0,m.tZ)(r.hU,{isDisabled:!0,..._})]})]}):(0,m.BX)(Mt,{children:[(0,m.tZ)(zt,{textType:"subtitle1",children:t}),(0,m.tZ)(Ft,{children:n&&(0,m.tZ)(Ht.x,{data:n,stroke:r.TV.BRAND_COLORS.ember_700})}),(0,m.tZ)(qt,{"aria-hidden":"true"}),(0,m.tZ)(r.hU,{as:"a",href:f("playbacks/list"),onClick:()=>v(ht.ERROR_WIDGET_VIEW_RECORDINGS_LIST),...T}),(0,m.tZ)(r.hU,{as:"a",href:f("trends"),onClick:()=>v(ht.ERROR_WIDGET_VIEW_TRENDS),..._})]})};var Yt=n(86599),Qt=n.n(Yt);const Jt=()=>(0,ae.iv)("margin-left:-",ke,";margin-right:-",ke,";border-radius:0;border-left:0;border-right:0;&:focus{border-color:",r.TV.color.ui_border_active,";border-top:2px;border-bottom:2px;border-style:solid;}",""),en=(0,a.Z)(r.xv,{target:"e1oc98pn1"})("padding:",r.TV.spacer.x1," 0;"),tn=(0,a.Z)(r.zx,{target:"e1oc98pn0"})("margin:0;",Jt(),";&&:focus{box-shadow:unset;border-color:",r.TV.color.ui_border_active,";}"),nn=e=>{let{hasSessionSettingsUpdatePermission:t,siteId:n}=e;const{t:a}=(0,i.$G)("heatmaps"),{showToast:o}=(0,r.d$)(),[s,l]=(0,$.useState)(!1),c=(0,$.useCallback)((async()=>{try{await Qt().post(`/api/v1/sites/${n}/settings/sessions`,{session_capture_console_consent:!0,action:"update_session_settings"}),o({kind:"success",text:a("smart-panel.session-errors.empty-state.console-tracking-enabled-success")}),l(!0)}catch{o({kind:"danger",text:a("smart-panel.session-errors.empty-state.console-tracking-enabled-error")})}}),[n,o,a]);return s?(0,m.tZ)(en,{as:"span",textType:"caption",textColor:"text_light",children:a("smart-panel.session-errors.empty-state.console-tracking-enabled")}):(0,m.BX)(m.HY,{children:[(0,m.tZ)(en,{as:"span",textType:"caption",textColor:"text_light",children:a("smart-panel.session-errors.empty-state.description")}),t?(0,m.tZ)(tn,{kind:"ghost",onClick:c,children:a("smart-panel.session-errors.empty-state.button")}):(0,m.tZ)(r.xv,{as:"span",textType:"caption",textColor:"text_light",children:a("smart-panel.session-errors.empty-state.admin-info")})]})};function rn(e){let{selectedDateRange:t,selectedTargetingValue:n,selectedDeviceType:i,searchPattern:r,currentSite:a,selectedFiltersInUiFormat:o}=e;const s=a.id,{isLoading:l,isError:c,isEmpty:d,data:h}=function(e){let{selectedDateRange:t,selectedTargetingValue:n,selectedDeviceType:i,searchPattern:r,siteId:a,selectedFiltersInUiFormat:o}=e;const{filterList:s}=o,l=_t.Ey(Ct(n))?.operation,c=l?l.toString():"SIMPLE_MATCH",d=(0,$.useMemo)((()=>({dateRange:t,filterList:[...(0,yt.Z)(s),Et(i)]})),[t,i,s]),{isLoading:h,isError:g,data:u}=(0,_.U)({sessionFilters:d,siteId:a,operation:T.cm.COUNT,eventType:T.zL.ERROR,eventFilters:{[c]:{[Tt.Bb.page_path]:r}},windowed:!0},!0,T.dK.Mid);return{isLoading:h,isError:g,isEmpty:null==u||null==u?.data?.resultSeries||void 0===u.data.resultSeries[0]||0===u?.data?.resultSeries?.[0].values.length||0===u?.data?.total||void 0===u?.data?.total,data:u}}({selectedDateRange:t,selectedTargetingValue:n,selectedDeviceType:i,searchPattern:r,siteId:s,selectedFiltersInUiFormat:o}),g=((e,t)=>{const[n,i]=(0,$.useState)(!1);return(0,$.useEffect)((()=>{t&&(async()=>{try{const t=await Qt().get(`/api/v1/sites/${e}/settings/sessions`);i(!0===t?.data?.session_capture_console_consent)}catch{throw new Error("Request error")}})()}),[e,t]),n})(s,d),u=(0,Bt.xJ)().data,{hasPermission:p}=(0,Pt.r2)(u?.id),f=p("site",`${s}`,"session-settings-update");return d&&!g?(0,m.tZ)(nn,{hasSessionSettingsUpdatePermission:f,siteId:s}):(0,m.tZ)(Kt,{value:(v=h?.data.total,void 0!==v?(0,b.Hr)(v):""),lineChartData:h?.data.resultSeries?.[0].values,isLoading:l,isError:c,isEmpty:d,selectedTargetingValue:n,selectedDeviceType:i,searchPattern:r,currentSite:a,selectedFiltersInUiFormat:o});var v}const an="text_default",on=e=>{let{text:t,icon:n,badge:i}=e;return(0,m.BX)(ot,{children:[(0,m.BX)(st,{children:[void 0!==n&&(0,m.tZ)(lt,{icon:n,color:an}),(0,m.tZ)(r.xv,{as:"span",textColor:an,children:t})]}),i]})},sn=(0,a.Z)(Lt.t,{target:"e12xggjj1"})("margin-left:",r.TV.spacer.x2,";"),ln=(0,a.Z)(Pe,{target:"e12xggjj0"})("border-bottom:",r.TV.spacer.x0pt5," solid ",r.TV.color.ui_border_light,";flex-direction:column;");function cn(e){let{selectedDateRange:t,selectedTargetingValue:n,selectedDeviceType:r,searchPattern:a,selectedFiltersInUiFormat:o,currentSite:s}=e;const{t:l}=(0,i.$G)("heatmaps"),c="business"===s.effectivePlan;return(0,m.BX)(ln,{children:[(0,m.tZ)(on,{text:l("smart-panel.session-errors.title"),icon:"code_dev",badge:c?(0,m.tZ)(sn,{}):null}),(0,m.tZ)(rn,{selectedDateRange:t,selectedTargetingValue:n,selectedDeviceType:r,searchPattern:a,selectedFiltersInUiFormat:o,currentSite:s})]})}function dn(e){let{selectedDateRange:t,selectedTargetingValue:n,selectedDeviceType:i,searchPattern:r,currentSite:a,selectedFiltersInUiFormat:o}=e;return a&&a.id?(0,m.tZ)(cn,{selectedDateRange:t,selectedTargetingValue:n,selectedDeviceType:i,searchPattern:r,selectedFiltersInUiFormat:o,currentSite:a}):null}const hn=e=>{let{isSelectedDateRangeAbsolute:t,isOpen:n,onCancelOrClose:a,onRefreshScreenshot:o}=e;const{t:s}=(0,i.$G)("heatmaps");return(0,m.BX)(r.u_,{size:"s",isOpen:n,onClose:a,contentLabel:s("refresh-screenshot-modal.content-label"),children:[(0,m.tZ)(r.u_.Header,{title:s("refresh-screenshot-modal.header")}),(0,m.tZ)(r.u_.Body,{children:(0,m.tZ)(r.xv,{as:"p",children:s("refresh-screenshot-modal.message",{context:t?"absolute_date_range":null})})}),(0,m.BX)(r.u_.Footer,{children:[(0,m.tZ)(r.zx,{kind:"ghost",onClick:a,children:(0,Ne.k)(s("general-terms.cancel"))}),(0,m.tZ)(r.zx,{kind:"primary",onClick:o,children:(0,Ne.k)(s("general-terms.refresh"))})]})]})},gn=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"MMMM DD, YYYY";return Ee._.unix(e).format(t)},un=(0,a.Z)(Pe,{target:"e4zemn02"})({name:"qdeacm",styles:"flex-direction:column"}),pn=(0,a.Z)(r.xv,{target:"e4zemn01"})("padding:",r.TV.spacer.x1," 0;"),mn=(0,a.Z)(r.zx,{target:"e4zemn00"})("margin:0;",Jt(),";&&:focus{box-shadow:unset;border-color:",r.TV.color.ui_border_active,";}");function fn(e){let{currentSite:t,selectedDateRange:n,onRefreshScreenshotClicked:r,screenshotTimestamp:a}=e;const{t:o}=(0,i.$G)("heatmaps"),[s,l]=(0,$.useState)(!1);return(0,m.BX)(un,{children:[(0,m.tZ)(dt,{leftText:o("smart-panel.screenshot-date"),rightText:gn(a,"MMM DD, YYYY")}),(0,m.tZ)(pn,{as:"span",textType:"caption",textColor:"text_light",children:o("smart-panel.screenshot-date-description")}),(0,m.tZ)(mn,{kind:"ghost",onClick:()=>{l(!0),void 0!==t&&(0,Ue.ob)({name:Ye.REFRESH,uiPosition:Je.SMART_PANEL,groupData:Ue.P6.extractSiteGroupingProps(t),data:{state_event_was_triggered_on:Qe.REPORT}})},children:o("smart-panel.refresh-screenshot")}),(0,m.tZ)(hn,{isSelectedDateRangeAbsolute:n.type===y.A.ABSOLUTE,isOpen:s,onCancelOrClose:()=>l(!1),onRefreshScreenshot:()=>{r(),l(!1)}})]})}const vn="HM_DOES_NOT_LOOK_RIGHT",xn="HM_NOT_CAPTURING_URL",_n="HM_SHOWS_COOKIES_BANNER",Tn=(0,a.Z)(r.JO,{target:"e12lnbhn1"})("margin-left:",r.TV.spacer.x2,";"),yn=(0,a.Z)(Pe,{target:"e12lnbhn0"})("align-items:center;cursor:pointer;justify-content:space-between;&:hover{background-color:",r.TV.color.bg_hover,";}"),wn=()=>(0,m.tZ)(Tn,{icon:"chevron_right"}),bn=e=>{let{currentSite:t,onActivateSecondarySection:n}=e;const{t:a}=(0,i.$G)("heatmaps"),o=(e,i)=>{void 0!==t&&(0,Ue.ob)({name:e,uiPosition:Je.SMART_PANEL,groupData:Ue.P6.extractSiteGroupingProps(t),data:{state_event_was_triggered_on:Qe.REPORT}}),n(i)};return(0,m.tZ)(m.HY,{children:(0,m.BX)(De,{children:[(0,m.BX)(yn,{role:"button",onClick:()=>o(ht.HM_DOES_NOT_LOOK_RIGHT,vn),children:[(0,m.tZ)(r.xv,{as:"span",children:a("smart-panel.support.does-not-look-right")}),(0,m.tZ)(wn,{})]}),(0,m.BX)(yn,{role:"button",onClick:()=>o(ht.HM_NOT_CAPTURING_URL,xn),children:[(0,m.tZ)(r.xv,{as:"span",children:a("smart-panel.support.not-capturing-right-url")}),(0,m.tZ)(wn,{})]}),(0,m.BX)(yn,{role:"button",onClick:()=>o(ht.HM_SHOWS_COOKIES_BANNER,_n),keepLastBorder:!0,children:[(0,m.tZ)(r.xv,{as:"span",children:a("smart-panel.support.cookies-banners")}),(0,m.tZ)(wn,{})]})]})})},Sn=(0,a.Z)(r.xv,{target:"eul6d1y3"})("display:flex;margin-bottom:",r.TV.spacer.x4,";"),Zn=(0,a.Z)("video",{target:"eul6d1y2"})("width:100%;border:1px solid ",r.TV.color.ui_border_light,";margin-bottom:",r.TV.spacer.x4,";"),kn=(0,a.Z)(r.xv,{target:"eul6d1y1"})("margin-top:",r.TV.spacer.x3,";margin-bottom:",r.TV.spacer.x2pt5,";"),En=(0,a.Z)(r.zx,{target:"eul6d1y0"})("margin-top:",r.TV.spacer.x4,";justify-content:center;"),Cn=e=>{let{titleText:t,videoPath:n,description:r,howToFix:a,onTakeNewScreenshotClick:o}=e;const{t:s}=(0,i.$G)("heatmaps");return(0,m.BX)(m.HY,{children:[(0,m.tZ)(Sn,{textType:"subtitle1",children:t}),(0,m.tZ)(Zn,{"data-testid":"hm-support-video",src:n,autoPlay:!0,loop:!0}),r,(0,m.tZ)(kn,{textType:"subtitle2",children:s("smart-panel.support.how-to-fix")}),a,(0,m.tZ)(En,{onClick:o,children:s("smart-panel.support.take-new-screenshot")})]})},In=e=>{let{activeView:t,currentSite:n,handleManualRetakerClick:a,selectedTargetingValue:o,originUrl:s}=e;const{t:l}=(0,i.$G)("heatmaps"),c=Xe(o);if(void 0===t)return null;const d=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,m.BX)(r.xv,{textType:"body2",children:[l("smart-panel.support.try")," ",(0,m.tZ)(r.xv,{textType:"subtitle2",children:l("smart-panel.support.taking-a-screenshot")}),e&&(0,m.BX)(m.HY,{children:[l("smart-panel.support.read-about")," ",(0,m.tZ)(r.rU,{href:"https://help.hotjar.com/hc/en-us/articles/5215291845143-How-to-Update-a-Heatmap-Screenshot",kind:"inline",isExternal:!0,children:l("smart-panel.support.screenshot-troubleshooting")})]})]})};return(0,m.tZ)(m.HY,{children:(0,m.tZ)(Cn,{titleText:(()=>{switch(t){case vn:return l("smart-panel.support.does-not-look-right");case xn:return l("smart-panel.support.not-capturing-right-url");case _n:return l("smart-panel.support.cookies-banners");default:return""}})(),videoPath:(()=>{let e="https://assets.hotjar.com/content/hm-sp-support-flow-b.mp4";return t===_n&&(e="https://assets.hotjar.com/content/hm-sp-support-flow-c.mp4"),e})(),description:(()=>{switch(t){case vn:return(0,m.BX)(m.HY,{children:[(0,m.tZ)(r.xv,{children:l("smart-panel.support.does-not-look-right-description.most-common-issues")}),(0,m.BX)("ul",{children:[(0,m.tZ)(r.xv,{as:"li",children:l("smart-panel.support.does-not-look-right-description.issue-cut-off")}),(0,m.tZ)(r.xv,{as:"li",children:l("smart-panel.support.does-not-look-right-description.issue-missing-elements")}),(0,m.tZ)(r.xv,{as:"li",children:l("smart-panel.support.does-not-look-right-description.issue-white-spaces")}),(0,m.tZ)(r.xv,{as:"li",children:l("smart-panel.support.does-not-look-right-description.issue-mobile-elements")})]})]});case xn:return(0,m.tZ)(r.xv,{children:l("smart-panel.support.not-capturing-right-url-description")});case _n:return(0,m.tZ)(r.xv,{children:l("smart-panel.support.cookies-banners-description")});default:return(0,m.tZ)(m.HY,{})}})(),howToFix:(()=>{switch(t){case vn:case _n:return d(!0);case xn:return d();default:return(0,m.tZ)(m.HY,{})}})(),onTakeNewScreenshotClick:()=>{let e=et.basicScreenshot;if(t===_n&&(e=et.cookiesBanners),a(c&&null!==s&&s.length>0?s:"",e),void 0!==n){let e=ht.HM_DOES_NOT_LOOK_RIGHT_RETAKER;t===xn&&(e=ht.HM_NOT_CAPTURING_URL_RETAKER),t===_n&&(e=ht.HM_SHOWS_COOKIES_BANNER_RETAKER),(0,Ue.ob)({name:e,uiPosition:Je.SMART_PANEL,groupData:Ue.P6.extractSiteGroupingProps(n),data:{state_event_was_triggered_on:Qe.REPORT}})}}})})};var Rn=n(9875);const An=e=>{let{currentSite:t,selectedTargetingValue:n,pageUrl:i}=e;const r=(0,$.useRef)(!1),a=Xe(n);if(!t||!a)return null;const o=(e,n)=>{if(void 0!==t){const i={name:`${(0,Ne.k)(n.toString())} ${ht.FEEDBACK_CARD}`,uiPosition:Je.SMART_PANEL,groupData:Ue.P6.extractSiteGroupingProps(t),data:{state_event_was_triggered_on:Qe.REPORT}};"view"===e?(0,Ue.Ye)(i):(0,Ue.ob)(i)}};return(0,m.tZ)(De,{children:(0,m.tZ)(Pe,{children:(0,m.tZ)(Rn.Uy,{siteId:t.id,pageUrl:i,pageOperation:"exact"===n?"exact":"simple_match",onRatingSet:e=>{r.current||(o("view",e),r.current=!0)},onClick:e=>{o("click",e)}})})})},On=(0,a.Z)("aside",{target:"ei0wgo35"})("display:flex;flex-direction:column;position:absolute;min-height:calc(100% - ",50,"px);top:",50,"px;width:",(e=>{let{isOpen:t}=e;return t?ye:64}),"px;right:-",Se,";background-color:",r.TV.color.ui_background,";border-left:1px solid ",r.TV.color.ui_border_light,";border-right:0;border-top:0;z-index:",r.P6.ZINDEX.MODAL-1,";"),Vn=(0,a.Z)("header",{target:"ei0wgo34"})("display:flex;flex-direction:column;align-content:center;padding:",ke,";border-bottom:1px solid ",r.TV.color.ui_border_light,";"),Nn=(0,a.Z)("div",{target:"ei0wgo33"})({name:"1066lcq",styles:"display:flex;justify-content:space-between;align-items:center"}),Dn=(0,a.Z)("div",{target:"ei0wgo32"})({name:"oofe2g",styles:"margin:0;text-transform:uppercase"}),Ln=(0,a.Z)(r.hU,{target:"ei0wgo31"})("margin:",ke," auto;"),Pn=(0,a.Z)("div",{target:"ei0wgo30"})("display:",(e=>{let{isPanelOpen:t}=e;return t?"initial":"none"}),";"),Bn=e=>{let{isOpen:t,isTopClicksWidgetActive:n,toggle:a,clickCount:o,currentSite:s,onRetakeScreenshotClicked:l,onTopClicksWidgetToggle:c,originUrl:d,screenshotTimestamp:h,selectedDeviceType:g,selectedHeatType:u,selectedDateRange:p,selectedTargetingValue:f,searchPattern:v,selectedFiltersInUiFormat:x,isErrorReportingEnabled:_}=e;const{t:T}=(0,i.$G)("heatmaps"),[w,b]=(0,$.useState)(!1),[S,Z]=(0,$.useState)(void 0),k=(0,$.useCallback)(((e,t)=>{l({html:e},!0,t)}),[l]),{handleManualRetakerClick:E,handleManualRetakerUrlModalClose:C,handleManualRetakerUrlSubmit:I,isManualRetakerUrlModalOpen:R}=Q(g,k),A=(e=>{if(e.type!==y.A.ABSOLUTE&&e.type!==y.A.RELATIVE)return!0;const t=Ve(e),n=Ee._.unix(t.toTimestamp).diff(Ee._.unix(t.fromTimestamp),"months",!0);return Math.abs(n)>3.1})(p),O=T("smart-panel.disabled-insight");return(0,m.BX)(On,{isOpen:t,children:[!w&&(t?(0,m.BX)(Vn,{children:[(0,m.BX)(Nn,{children:[(0,m.tZ)(r.xv,{textType:"subtitle1",children:T("smart-panel.heading")}),(0,m.tZ)(r.hU,{kind:"ghost",icon:"close",size:"s",title:T("smart-panel.collapse"),tooltipText:T("smart-panel.collapse"),description:T("smart-panel.collapse"),onClick:a})]}),(0,m.tZ)(Dn,{children:(0,m.tZ)(r.xv,{as:"span",textColor:"text_light",textType:"caption",children:(0,se.T)(p)})})]}):(0,m.tZ)(Ln,{kind:"ghost",icon:"expand_left",size:"s",title:T("smart-panel.expand"),tooltipText:T("smart-panel.expand"),description:T("smart-panel.expand"),onClick:a})),(0,m.BX)(Pn,{isPanelOpen:t,children:[!w&&(0,m.tZ)(m.HY,{children:(0,m.BX)(oe.UQ,{defaultIndex:[0,1,2],multiple:!0,children:[(0,m.tZ)(_e,{headerCustomCss:(0,ae.iv)("padding:",r.TV.spacer.x0pt5,";border-bottom:4px solid ",r.TV.color.ui_border_light,";",""),title:(0,m.tZ)(r.xv,{textType:"subtitle2",children:T("smart-panel.quick-stats")}),children:(0,m.BX)(De,{children:[(0,m.tZ)(mt,{currentSite:s,device:g,value:o,heatType:u,isTopClicksWidgetActive:n,onTopClicksWidgetToggle:c}),(0,m.tZ)(At,{selectedDateRange:p,selectedTargetingValue:f,selectedDeviceType:g,searchPattern:v,isDisabled:A,disabledTooltipText:O}),(0,m.tZ)(Vt,{selectedDateRange:p,selectedTargetingValue:f,selectedDeviceType:g,searchPattern:v,currentSite:s,isDisabled:A,disabledTooltipText:O}),(0,m.tZ)(Dt,{selectedDateRange:p,selectedTargetingValue:f,selectedDeviceType:g,searchPattern:v,currentSite:s,isDisabled:A,disabledTooltipText:O}),_&&(0,m.tZ)(dn,{selectedDateRange:p,selectedTargetingValue:f,selectedDeviceType:g,searchPattern:v,currentSite:s,selectedFiltersInUiFormat:x})]})}),(0,m.tZ)(_e,{headerCustomCss:(0,ae.iv)("padding:",r.TV.spacer.x0pt5,";border-bottom:4px solid ",r.TV.color.ui_border_light,";",""),title:(0,m.tZ)(r.xv,{textType:"subtitle2",children:T("smart-panel.screenshot-details")}),children:(0,m.BX)(De,{children:[null!==h&&(0,m.tZ)(fn,{currentSite:s,onRefreshScreenshotClicked:l,screenshotTimestamp:h,selectedDateRange:p}),(0,m.tZ)(rt,{currentSite:s,handleManualRetakerClick:E,originUrl:d,selectedTargetingValue:f})]})}),(0,m.tZ)(An,{currentSite:s,pageUrl:v,selectedTargetingValue:f}),(0,m.tZ)(_e,{headerCustomCss:(0,ae.iv)("padding:",r.TV.spacer.x0pt5,";",""),title:(0,m.tZ)(r.xv,{textType:"subtitle2",children:T("smart-panel.common-questions")}),children:(0,m.tZ)(bn,{currentSite:s,onActivateSecondarySection:e=>{b(!0),Z(e)}})})]})}),w&&(0,m.tZ)(He,{onDeActivateSecondaryView:()=>{b(!1),Z(void 0)},children:(0,m.tZ)(In,{activeView:S,currentSite:s,handleManualRetakerClick:E,originUrl:d,selectedTargetingValue:f})})]}),(0,m.tZ)(re,{isOpen:R,onSubmit:I,onClose:C})]})};var Hn=n(361),Un=n.n(Hn);const $n=e=>{let{link:t,onCopyLink:n}=e;const{t:a}=(0,i.$G)("heatmaps"),{showToast:o}=(0,r.d$)();return(0,m.tZ)(r.J2,{title:a("copy-link-button.title-short-link"),text:t,placement:"bottom-end",children:(0,m.tZ)(r.zx,{icon:"hyperlink",kind:"ghost",onClick:()=>{Un()(t),o({text:a("copy-link-button.link-copied"),kind:"success"}),n()},children:a("copy-link-button.copy-link")})})},Mn=(0,a.Z)("div",{target:"e1laf6ce0"})({name:"rs0gp6",styles:"grid-row-start:1;grid-column-start:1"});var zn=n(41377);const Gn="top-clicked-region-",jn=Mn.withComponent((0,a.Z)("div",{target:"eo2ubs41"})("position:relative;width:100%;",(e=>{let{height:t,zoom:n}=e;return`\n    max-height: ${t}px;\n    zoom: ${n};\n  `}),";"),{target:"eo2ubs42"}),Xn=(0,a.Z)("div",{target:"eo2ubs40"})("position:absolute;background:",r.TV.color.ui_background,";border:1px solid ",r.TV.color.ui_border,";border-radius:",r.TV.radius.m,";padding:",r.TV.spacer.x0," ",r.TV.spacer.x1,";",r.TV.elevation(2),";",(e=>{let{position:t}=e;return`\n    left: ${t.left}px;\n    top: ${t.top}px;\n  `})," z-index:",(e=>{let{zIndex:t}=e;return t}),";"),Fn=(e,t,n)=>{const i=(0,b.uZ)(n/t,0,1);let r=e[1]*i;return r<0&&(r=0),{left:r,top:e[2]*i}};function Wn(e,t){const n=document.querySelector(`.${Gn}${e+1}`);n&&(n.style.cssText=t?"opacity: 1":"")}const qn=e=>{let{topClickedElements:t,selectedDeviceType:n,width:i,height:r,clickRegionsCount:a}=e;const o=K[n]/i,s=(0,$.useRef)(null),[l]=(0,zn.z)(s,i);return(0,m.tZ)(jn,{ref:s,zoom:o,height:r,children:t.map(((e,t)=>{const n=a+100+(3-t);return(0,m.tZ)(Xn,{position:Fn(e,i,l),zIndex:n,onMouseEnter:()=>{Wn(t,!0)},onMouseLeave:()=>{Wn(t,!1)},children:t+1},e[0])}))})};let Kn,Yn;!function(e){e.CSV="csv",e.JPG="jpg"}(Kn||(Kn={})),function(e){e.SCREENSHOT_GENERATION_FAILURE="screenshot_generation_failure",e.HEATMAP_GENERATION_FAILURE="heatmap_generation_failure",e.NO_HEATMAP_DATA_FOUND="no_heatmap_data_found",e.NO_HEATMAP_DATA_CHECK_TRACKING="no_heatmap_data_check_tracking",e.NO_HEATMAP_DATA_INCREASE_COVERAGE="no_heatmap_data_increase_coverage",e.TRACKING_CODE_INSTALLED_NO_SESSIONS="tracking_code_installed_no_sessions",e.NO_SESSIONS_FOR_URL="no_sessions_for_url",e.REGEX_MATCH_NOT_SUPPORTED="regex_match_not_supported",e.CANCELLED="cancelled"}(Yn||(Yn={}));const Qn="heatmap.continuous.manual_retaker",Jn="heatmap.continuous.manual_retaker_online",ei="heatmap.smart_panel";let ti;!function(e){e.URL="url",e.MATCH="match",e.DEVICE="device",e.TYPE="type"}(ti||(ti={}));const ni={CONTINUOUS_FIRST_SEEN:"e7882fae-28a6-4851-9f83-02aab8ff73c9"},ii={HEATMAP_ACCURATE:"heatmap_accurate",HEATMAP_INACCURATE:"heatmap_inaccurate",HEATMAP_RATE:"heatmap_rate",HEATMAP_REFRESH:"heatmap_refresh",HEATMAP_TAKENEW:"heatmap_takenew"};let ri;!function(e){e.WAITING="waiting",e.QUEUED="queued",e.IN_PROGRESS="in progress",e.DONE="done",e.FAILED="failed"}(ri||(ri={}));var ai=n(92979),oi=n(68816);function si(e){return{heatmap_type:e.type,screenshot_id:e.screenshotId,url:e.url,json_query_string:e.jsonQueryString,match_operation:e.matchOperation}}function li(e){return{heatmap_type:e.heatmapType,device:e.deviceType,match_operation:e.matchOperation,results_found:e.resultsFound,url:encodeURIComponent(e.url),date_range_selected:e.dateRangeLabel,date_range_applied:e.dateRangeType,date_range_start_timestamp:e.dateRangeStartTimestamp,date_range_end_timestamp:e.dateRangeEndTimestamp,clicks_count:e.clicksCount,session_count:e.sessionCount,trigger:e.trigger,autocomplete_rank:e.autocompleteRank,display_type:e.displayType,...e.failureReason&&{failure_reason:e.failureReason}}}function ci(e){return{id:e.id,name:e.name,pattern:e.pattern,matchOperation:e.match_operation,createdBy:e.created_by,jsonQueryString:e.json_query_string}}function di(e){return e.map(ci)}function hi(e){return{pin_title:e.name,url:e.pattern,match_operation:e.matchOperation,trigger:e.trigger,display_type:e.displayType}}const gi=e=>{let{siteId:t,pinId:n}=e;return`${["/api/heatmaps/v1/sites",t,"saved_heatmaps",n].filter(Boolean).join("/")}/`},ui=e=>e.data;async function pi(e){const{siteId:t}=e;return di(await Qt().get(gi({siteId:t})).then(ui))}async function mi(e){const{siteId:t,...n}=e,i=await Qt().post(gi({siteId:t}),function(e){return{name:e.name,pattern:e.pattern,match_operation:e.matchOperation,json_query_string:e.jsonQueryString}}(n)).then(ui);return ci(i)}async function fi(e){const{siteId:t,id:n}=e;return Qt().delete(gi({siteId:t,pinId:n}))}async function vi(e){const{siteId:t,...n}=e,{id:i}=n,{created_by:r,id:a,...o}=function(e){return{id:e.id,name:e.name,pattern:e.pattern,match_operation:e.matchOperation,created_by:e.createdBy,json_query_string:e.jsonQueryString}}(n);return ci(await Qt().post(gi({siteId:t,pinId:i}),o).then(ui))}async function xi(e){const{siteId:t,...n}=e;return di(await Qt().get(gi({siteId:t}),{params:{match_operation:n.matchOperation,pattern:encodeURIComponent(n.pattern)}}).then(ui))}async function _i(e){const{siteId:t,eventType:n}=e;return Qt().get(`/api/v1/sites/${t}/pinned_pages/${n}/track`,{params:hi(e)}).then(ui)}const Ti=(e,t)=>`/api/v${t}/sites/${e}`,yi=e=>(e=>e.success?Promise.resolve(e):Promise.reject(new Error(e.error)))((e=>e.data)(e));async function wi(e,t){const{siteId:n,deviceType:i,url:r}=e,a=await Qt().post(`${Ti(n,2)}/screenshots/${i}/${(0,ai.xw)(r)}/search`,function(e){return{match_operation:e.matchOperation,json_query_string:e.jsonQueryString}}(e),{cancelToken:t}).then(yi);return{screenshotId:(o=a).screenshot_id,image:o.image,imageSize:o.image_size,isCropped:o.is_cropped,originUrl:o.origin_url,status:o.status,recordingId:o.recording_id,recordingStartTime:o.recording_start_time,recordingCreated:o.recording_created,firstSessionCreated:o.first_session_created,lastSessionCreated:o.last_session_created};var o}function bi(e){const{siteId:t,deviceType:n,url:i}=e;return Qt().post(`${Ti(t,2)}/screenshots/${n}/${(0,ai.xw)(i)}`,function(e){return"recordingId"in e&&void 0!==e.recordingId&&void 0!==e.startTime&&void 0!==e.previousStartTime?function(e){return{action:"take_tuned_screenshot",match_operation:e.matchOperation,json_query_string:e.jsonQueryString,replace_document_version:"v2",recording_id:e.recordingId,start_time:e.startTime,previous_start_time:e.previousStartTime}}(e):"html"in e&&void 0!==e.html?function(e){return{action:"take_html_screenshot",match_operation:e.matchOperation,json_query_string:e.jsonQueryString,origin_url:e.url,raw_html_content:e.html,online_screenshot:Boolean(e.online)}}(e):{action:"take_screenshot",match_operation:e.matchOperation,json_query_string:e.jsonQueryString}}(e)).then(yi)}function Si(e){const{siteId:t,deviceType:n,url:i}=e;return Qt().post(`${Ti(t,2)}/screenshots/${n}/${(0,ai.xw)(i)}/delete`,function(e){return{match_operation:e.matchOperation,json_query_string:e.jsonQueryString}}(e)).then(yi)}async function Zi(e,t){const{siteId:n}=e,i=await Qt().post(`${Ti(n,2)}/heat/search`,si(e),{cancelToken:t}).then(yi);return function(e,t){const n={averageWindowHeight:t.average_window_height,image:t.image,imageSize:t.image_size,samplingApplies:t.sampling_applies,visitCount:t.visit_count,sessionCount:t.session_count};switch(e){case at.CLICK:return{type:e,...n,clickCount:t.click_count,clickRegions:t.click_region_count,topClickedElements:t.top_clicked_elements};case at.MOVEMENT:return{type:e,...n};case at.SCROLL:return{type:e,...n,scrollReach:t.scroll_reach};default:{const t=new Error(`getHeatData(...): Invalid response object type: [${e}].`);throw(0,oi.H)(t),t}}}(e.type,i)}function ki(e){const{siteId:t}=e;return Qt().get(`${Ti(t,1)}/heat/track`,{params:li(e)}).then(yi)}function Ei(e){const{siteId:t}=e;return Qt()({url:`${Ti(t,1)}/heat/download`,method:"POST",data:si(e),responseType:"blob"}).then((e=>e.data))}},41377:(e,t,n)=>{n.d(t,{o:()=>o,z:()=>a});var i=n(64934),r=n(43473);function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const[n,r]=(0,i.useState)(t),a=(0,i.useCallback)((()=>{if(e&&e.current){const{width:t}=e.current.getBoundingClientRect();r(t)}}),[e]);return(0,i.useEffect)((()=>(a(),window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)})),[a,t]),[n]}function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const[n,a]=(0,i.useState)(t);return(0,i.useEffect)((()=>{const t=(0,r.Z)((()=>{if(e&&e.current){const{width:t}=e.current.getBoundingClientRect();a(t)}}),100);return t(),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}}),[t,e]),[n]}},49259:(e,t,n)=>{n.d(t,{G:()=>i});const i=e=>{if(void 0===e)return":";const t=Math.round(e/1e3);return`${Math.floor(t/60)}:${String(t%60).padStart(2,"0")}`}},24654:(e,t,n)=>{n.d(t,{H:()=>i});const i=(e,t)=>{let{one:n,other:i}=e;return 1===t?n:i}},44490:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>i});const i="8be9341a-86eb-4b28-9638-536b717d1486",r="07d8b460-e62d-428c-9ea4-1574cc042586"},7664:(e,t,n)=>{n.d(t,{T:()=>l});var i=n(64934),r=n(2417),a=n(16431),o=n(48139),s=n(91995);const l=e=>{let{children:t}=e;const n=(0,i.useMemo)((()=>({calculateOverflow:o.i,event:a.event})),[]);return(0,s.tZ)(r.Fq,{value:n,children:t})}},39015:(e,t,n)=>{n.d(t,{CR:()=>s,Od:()=>g,PQ:()=>h,Ue:()=>u,V:()=>p,_P:()=>f,go:()=>d,no:()=>v,r5:()=>l,x$:()=>m});var i=n(86599),r=n.n(i),a=n(63857);const o="/api/v1/sites";class s extends Error{}const l="collections";function c(e,t){return void 0===t?`${o}/${e}/collections`:`${o}/${e}/collections/${t}`}async function d(e){const t=c(e);return(await r().get(t)).data.items.map(a.Y)}async function h(e,t,n){const i=c(e,t);try{await r().patch(i,{name:n})}catch(e){if(400===e?.response?.status)throw new s;throw e}}async function g(e,t){const n=c(e,t);await r().delete(n)}async function u(e,t){const n=c(e);try{const e=await r().post(n,{name:t});return String(e.data.collection_id)}catch(e){if(400===e?.response?.status)throw new s;throw e}}async function p(e,t,n){const i=`${c(e,t)}/highlights`;await r().post(i,{highlight_ids:[n]})}async function m(e,t,n){const i=`${c(e,t)}/highlights/${n}`;await r().delete(i)}async function f(e,t){const n=`${c(e)}/events`,i=Number.parseInt(t,10);i&&r().post(n,{collection_id:i,event:"collection-viewed"})}async function v(e,t){const n=`${c(e)}/events`,i=Number.parseInt(t,10);i&&r().post(n,{collection_id:i,event:"collection-shared"})}},54031:(e,t,n)=>{let i;n.d(t,{v:()=>i}),function(e){e.HIGHLIGHT_SHARED="highlight-shared",e.HIGHLIGHT_DOWNLOADED="highlight-downloaded",e.HIGHLIGHT_VIEWED="highlight-viewed"}(i||(i={}))},4306:(e,t,n)=>{n.d(t,{tl:()=>p,nm:()=>w});var i=n(16346),r=n(68212),a=n(38933),o=n(72007);const s=n.p+"0a12168be558169c33e7.jpg";var l=n(64934),c=n(56551),d=n(95851);const h=n.p+"6ef3af9553a2f510dd59.png",g=(0,d.Z)("div",{target:"ezijmvd0"})("width:100%;height:100%;background-image:url('",(e=>{let{src:t}=e;return t||h}),"');background-color:",r.TV.BRAND_COLORS.noon_100,";background-repeat:no-repeat;background-position:center center;background-size:contain;");var u=n(91995);function p(){const{t:e}=(0,i.$G)(),{click:t}=function(){const{click:e}=(0,c.S)();return(0,l.useMemo)((()=>({click:t=>e(t,"Space Guide Card",{})})),[e])}(),{isGuideCardVisible:n,dismissGuideCard:d}=(0,o.a)("highlights-guide");return n?(0,u.tZ)(a.Fw,{label:e("activation:guides.highlights.label"),title:e("activation:guides.highlights.title"),onDismiss:()=>{d(),t("dismiss guide card")},description:e("activation:guides.highlights.description"),media:(0,u.tZ)(g,{src:s}),actions:(0,u.tZ)(r.Kq,{direction:"row",children:(0,u.tZ)(r.zx,{isExternal:!0,as:"a",kind:"secondary",icon:"open_new_window",onClick:()=>{d(),t("go to course")},href:"https://learning.hotjar.com/courses/collaborating-with-your-team-using-highlights/view/",children:e("activation:guides.highlights.cta")})})}):null}var m=n(19349),f=n(95953),v=n(14928),x=n(45742);const _=n.p+"186bbb524f22e2d8d25b.jpg",T="Recordings Guide",y=e=>{let{onViewFiltersClick:t}=e;const{t:n}=(0,i.$G)(),{data:s}=(0,v.PD)(),{click:l}=(0,c.S)(),{isGuideCardVisible:d,dismissGuideCard:h}=(0,o.a)("recordings-guide"),g="basic"!==s?.plan||s?.trial.active,p=()=>g?"paid":"non-paid",m=()=>{g?(t(),l("view all filters",T,{})):l("go to free course",T,{})},f=()=>{g?l("go to free course",T,{}):(l("view upgrade options",T,{}),(0,x.q)({site:s,referrer:"recordings_guide_card"}))};return d?(0,u.tZ)(a.Fw,{label:n("activation:recordings-guide-card.label"),title:n(`activation:recordings-guide-card.${p()}.title`),description:n(`activation:recordings-guide-card.${p()}.description`),onDismiss:()=>{l("dismiss guide card",T,{}),h()},media:(0,u.tZ)(a.uC,{modalContentLabel:T,duration:"1:24",videoUrl:"https://www.youtube.com/embed/TkrbsJhtad4?autoplay=1",thumbnail:_,onClick:()=>{l("video thumbnail",T,{})},title:n(`activation:recordings-guide-card.${p()}.video-modal-title`)}),actions:(0,u.tZ)(r.Kq,{direction:"row",children:g?(0,u.BX)(u.HY,{children:[(0,u.tZ)(r.zx,{kind:"secondary",onClick:m,children:n(`activation:recordings-guide-card.${p()}.cta`)}),(0,u.tZ)(r.zx,{href:"https://learning.hotjar.com/courses/how-to-find-insights-in-recordings/view/",isExternal:!0,as:"a",icon:"open_new_window",kind:"ghost",onClick:f,children:n(`activation:recordings-guide-card.${p()}.cta-secondary`)})]}):(0,u.BX)(u.HY,{children:[(0,u.tZ)(r.zx,{href:"https://learning.hotjar.com/courses/how-to-find-insights-in-recordings/view/",isExternal:!0,as:"a",icon:"open_new_window",kind:"secondary",onClick:m,children:n(`activation:recordings-guide-card.${p()}.cta`)}),(0,u.tZ)(r.zx,{kind:"ghost",onClick:f,children:n(`activation:recordings-guide-card.${p()}.cta-secondary`)})]})})}):null},w=e=>{let{totalRecordingsCount:t,triggerFiltersModal:n}=e;const{data:i}=(0,v.PD)(),{getState:r}=(0,f.aE)(),a=r(i?.lastData),o=i?.account;return(0,m.XX)(window.location.href,"force_recordings_guide")||o?.id&&a.installed&&t>24?(0,u.tZ)(y,{onViewFiltersClick:n}):null}},14074:(e,t,n)=>{n.d(t,{o:()=>c,y:()=>d}),n(74870);var i=n(67933),r=n(86781),a=n(55794),o=n(13212),s=n(66624);const l=864e5,c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{Object.keys(sessionStorage).filter((t=>t.includes(`recordings_widget_${e}`))).forEach((e=>{sessionStorage.removeItem(e)})),r.E.invalidateQueries(`recordings_widget_${e}`,{refetchActive:!1,refetchInactive:!1,...t})}catch{a.uT("Error invalidating recordings widget cache",o.z.Info)}},d=(e,t,n)=>{const r=t?.id?window.sessionStorage.getItem(`recordings_widget_${e}_${t?.id}`):void 0;return(0,s.useQuery)(`recordings_widget_${e}_${t?.id}`,(()=>(0,i.oE)(e,t,n)),{refetchOnWindowFocus:!1,cacheTime:l,staleTime:l,onSuccess:n=>{window.sessionStorage.setItem(`recordings_widget_${e}_${t?.id}`,JSON.stringify(n))},enabled:!!e&&!!t?.id,initialData:r?JSON.parse(r):void 0})}},76359:(e,t,n)=>{n.d(t,{b:()=>c});var i=n(64934),r=n(16346),a=n(16304),o=n(88543),s=n(80782),l=n(91995);function c(e){let{isOpen:t,onClose:n,onSuccess:c,siteId:d}=e;const{t:h}=(0,r.$G)(),{mutateAsync:g,status:u}=(0,s.A)(d),{success:p,error:m}=(0,a.d)(),[f,v]=(0,i.useState)(null),x=(0,i.useCallback)((()=>{v(null)}),[v]),_=(0,i.useCallback)((async e=>{x();try{const t=await g({name:e});p(h("collections:create.success")),c?.(t),n()}catch(e){if(e instanceof s.C)return void v(h("collections:create.error.existing"));m(h("collections:create.error.unknown"))}}),[m,n,c,g,x,p,h]);return(0,l.tZ)(o.y,{error:f??void 0,editedCollection:null,isLoading:"loading"===u,isOpen:t,loadingText:h("collections:create.progress"),onCancel:n,onConfirm:_,resetError:x})}},34613:(e,t,n)=>{n.d(t,{z:()=>M});var i=n(95851),r=(n(74870),n(64934)),a=n(68212),o=n(93712),s=n(16346),l=n(84751),c=n(14928),d=n(54185),h=n(98816),g=n(65611),u=n(55380),p=n(16873),m=n(39015),f=n(55668),v=n(76359),x=n(39425),_=n(90088),T=n(91995);const y=(0,i.Z)("li",{target:"e1d84t417"})("display:block;&:hover{text-decoration:none;}&:focus{text-decoration:none;}&:not(:last-child){margin-bottom:",a.TV.spacer.x0pt5,";}"),w=(0,i.Z)("span",{target:"e1d84t416"})("width:100%;height:100%;padding:",a.TV.spacer.x1,";"),b=(0,i.Z)("span",{target:"e1d84t415"})((e=>{let{color:t}=e;return t&&"inherited"!==t&&a.TV.ALIAS_TEXT_COLORS[t]?`color: ${a.TV.ALIAS_TEXT_COLORS[t]};`:""}),";"),S=(0,i.Z)(a.JO,{target:"e1d84t414"})("width:16px;height:16px;margin-right:",a.TV.spacer.x1,";"),Z=(0,i.Z)("div",{target:"e1d84t413"})("width:16px;height:16px;margin-right:",a.TV.spacer.x1,";"),k=(0,i.Z)(a.hU,{target:"e1d84t412"})("display:none;pointer-events:none;margin:-",a.TV.spacer.x0," 0;margin-right:",a.TV.spacer.x1,";button:hover{background-color:",a.TV.BRAND_COLORS.neutral_100,"!important;}"),E=(0,i.Z)((e=>(0,T.tZ)(_.rU,{...(0,x.Z)(e,["isEditing","isActive"])})),{target:"e1d84t411"})("position:relative;min-height:",a.TV.spacer.x5,";max-height:",a.TV.spacer.x6,";overflow:hidden;text-overflow:ellipsis;display:-webkit-box;line-clamp:2;-webkit-line-clamp:2;-webkit-box-orient:vertical;display:flex;align-items:center;border-radius:",a.TV.radius.l,";cursor:pointer;justify-content:space-between;&:hover{background-color:",a.TV.BRAND_COLORS.neutral_100,";text-decoration:none;",k,"{display:initial;pointer-events:auto;}}&:focus{text-decoration:none;}",(e=>{let{isActive:t}=e;return t&&`\n    background-color: ${a.TV.BRAND_COLORS.cobalt_200};\n    color: ${a.TV.color.secondary_cta};\n    font-weight: 500;\n    `})," ",(e=>{let{isEditing:t}=e;return t&&"\n    background-color: transparent;\n    padding: 0;\n    border-radius: 0;\n    overflow: visible;\n    cursor: unset;\n    width: 100%;\n    display: block;\n    &:hover {\n      background-color: transparent;\n    }\n  "}),";"),C=(0,i.Z)(a.xv,{target:"e1d84t410"})("word-break:break-all;display:-webkit-box;max-width:200px;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;max-height:",a.TV.spacer.x4,";box-sizing:content-box;margin:0;padding:0;"),I=e=>{let{item:t,actions:n,isActive:i,isReadOnly:o,onItemSave:l,onItemBlur:h}=e;const{t:g}=(0,s.$G)(),u=(0,r.useRef)(null),p=(0,c.$n)(),{isEditing:m}=t;return(0,r.useEffect)((()=>{m&&u.current&&u.current.focus()}),[m]),o?(0,T.tZ)(y,{children:(0,T.tZ)(E,{isActive:i,to:(0,f.Q)(p??d._,t.id),children:(0,T.tZ)(w,{children:(0,T.tZ)(a.u,{text:t.keyName?g(t.keyName):t.name,children:(0,T.tZ)(C,{as:"p",textType:"caption",children:t.keyName?g(t.keyName):t.name})})})})}):(0,T.tZ)(y,{children:(0,T.BX)(E,{isActive:i,isEditing:m,to:(0,f.Q)(p??d._,t.id),children:[m?(0,T.tZ)(a.oi,{size:"s",ref:u,name:"item_title",id:`input_${t.id}`,defaultValue:t.name,placeholder:t.name,onKeyDown:e=>{["Enter","Escape"].includes(e.key)&&("Escape"===e.key&&u?.current?.value&&(u.current.value=t.name),e.currentTarget.blur())},onBlur:e=>{h?.();const n=String(e.currentTarget.value).trim();n.length&&n!==t.name&&l?.({...t,name:n})}}):(0,T.tZ)(w,{children:(0,T.tZ)(a.u,{text:t.keyName?g(t.keyName):t.name,children:(0,T.tZ)(C,{as:"p",textType:"caption",children:t.keyName?g(t.keyName):t.name})})}),n&&!m&&(0,T.tZ)(a.h_,{size:"s",trigger:(0,T.tZ)(k,{description:`${t.name} actions`,kind:"ghost",size:"s",icon:"menu_kebab",tooltipText:g("collections:actions.edit"),onClick:e=>{e.stopPropagation(),e.preventDefault()}}),children:n.map(((e,n)=>(0,T.BX)(a.h_.BaseItem,{hasDivider:n>0,onClick:n=>((e,n)=>{e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),n.cb(t)})(n,e),children:[e.icon?(0,T.tZ)(S,{icon:e.icon,color:e.color??"inherited"}):(0,T.tZ)(Z,{}),(0,T.tZ)(b,{color:e.color,children:e.label})]},e.name)))})]})})},R=(0,i.Z)("ul",{target:"e18okc4c2"})({name:"v5al3",styles:"list-style:none;padding:0;margin:0"}),A=(0,i.Z)(a.aN,{target:"e18okc4c1"})("width:",a.TV.spacer.x4,";margin-left:-",a.TV.spacer.x1,";"),O=(0,i.Z)(a.xv,{target:"e18okc4c0"})("display:block;margin-bottom:",a.TV.spacer.x2pt5,";margin-left:",a.TV.spacer.x1,";"),V=e=>{let{selectedCollectionId:t,errorStateText:n,emptyStateText:i,items:r,className:a,state:o,defaultAllHighlights:l,actions:c,onItemBlur:d,onItemSave:h}=e;const[g]=(0,s.$G)();return(0,T.BX)("div",{className:a,children:["ready"===o&&(0,T.tZ)(T.HY,{children:r?(0,T.BX)(R,{"aria-label":g("collections:sidebar.sidebar-title"),children:[(0,T.tZ)(I,{isActive:t===l.id,item:l,isReadOnly:!1,onItemBlur:d},l.id),r.map((e=>(0,T.tZ)(I,{isActive:t===e.id,item:e,actions:c,isReadOnly:!1,onItemSave:h,onItemBlur:d},e.id)))]}):(0,T.tZ)(O,{textType:"caption",textColor:"text_light",children:i})}),"loading"===o&&(0,T.tZ)(O,{textType:"caption",textColor:"text_light",children:(0,T.tZ)(A,{size:"m"})}),"failed"===o&&(0,T.tZ)(O,{textType:"caption",textColor:"text_light",children:n})]})};var N=n(54095);const D=(0,i.Z)(a.zx,{target:"efjhry60"})("margin:",a.TV.spacer.x1pt5," 0;svg,span{color:",a.TV.color.link,";}"),L=e=>{let{collections:t,currentSiteId:n,setSearchQuery:i,selectedCollectionId:l,defaultAllHighlights:c}=e;const{t:d}=(0,s.$G)(),h=(0,o.s0)(),{topBarHeight:u}=(0,g.HJ)(),[x,_]=(0,r.useState)(!1),[y,w]=(0,r.useState)(t?.map((e=>({...e,isEditing:!1})))),[b,S]=(0,r.useState)(!1),[Z,k]=(0,r.useState)(null);(0,r.useEffect)((()=>{w(t?.map((e=>({...e,isEditing:!1}))))}),[t,w]);const E=(0,r.useCallback)((()=>{S(!1)}),[S]),C=[{icon:"text_field_short",name:"edit",label:d("collections:sidebar.actions.rename"),cb:e=>{w(y?.map((t=>({...t,isEditing:t.id===e.id}))))}},{icon:"trash",color:"text_warning",name:"delete",label:d("collections:sidebar.actions.delete"),cb:e=>{k(e),S(!0)}}];return(0,T.BX)(p.t,{topNavHeight:u,children:[(0,T.tZ)(p.k,{children:(0,T.tZ)(a.Mj,{onChange:e=>{i(e.target.value)},placeholder:d("collections:sidebar.jump-to"),size:"s"})}),(0,T.tZ)(D,{kind:"ghost",icon:"plus","aria-label":d("collections:sidebar.create-new-collection"),onClick:()=>_(!0),children:d("collections:sidebar.create-new-collection")}),(0,T.tZ)(V,{defaultAllHighlights:c,selectedCollectionId:l,errorStateText:"Error",emptyStateText:"Empty",items:y??[],state:"ready",actions:C,onItemSave:async e=>{n&&(await m.PQ(n,e.id,e.name),w(y?.map((t=>t.id===e.id?{...t,name:e.name,isEditing:!1}:t))))},onItemBlur:()=>{w(y?.map((e=>({...e,isEditing:!1}))))}}),null!==n&&(0,T.tZ)(v.b,{isOpen:x,onClose:()=>_(!1),onSuccess:e=>{n&&h((0,f.Q)(n,e))},siteId:n}),b&&Z&&(0,T.tZ)(N.K,{collectionId:Z.id,collectionName:Z.name,isOpen:!!Z,onClose:E,siteId:n})]})};var P=n(91226);const B=230,H=(0,i.Z)("div",{target:"e1ce4f3q2"})("width:",B,"px;min-width:",B,"px;max-width:",B,"px;position:fixed;z-index:1;height:calc(100vh + 2px - ",(e=>{let{topNavHeight:t}=e;return t}),"px);background-color:",a.TV.color.ui_background,";overflow-x:hidden;overflow-y:auto;"),U=(0,i.Z)("div",{target:"e1ce4f3q1"})("width:calc(100% - ",B,"px);margin-left:",B,"px;"),$=(0,i.Z)("div",{target:"e1ce4f3q0"})({name:"zjik7",styles:"display:flex"}),M=()=>{(0,h.T)("Highlights - Hotjar");const{t:e}=(0,s.$G)(),t={highlightsCount:0,id:d._,name:e("collections:sidebar.all-highlights")},[n,i]=(0,r.useState)(""),a=(0,o.bS)("/sites/:siteId/highlights/:collectionId"),p=(0,c.$n)(),{data:m,status:f}=(0,P.L)(p),[v,x]=(0,r.useState)(m??[]),_=m?.[0]||t,{topBarHeight:y}=(0,g.HJ)(),{setIsHidden:w}=(0,u.q)();(0,r.useEffect)((()=>(w(!0),()=>{w(!1)})),[w]),(0,r.useEffect)((()=>{w(!0),x(m||[])}),[m,w]);const b=(0,r.useMemo)((()=>m&&a?.params?.collectionId?m.find((e=>e.id===a?.params?.collectionId))??_:_),[a?.params?.collectionId,m,_]),S=(0,r.useMemo)((()=>v?v.filter((e=>e.id!==d._&&e.name.toLowerCase().includes(n))).sort(((e,t)=>e.name.localeCompare(t.name))):[]),[v,n]);return(0,T.BX)($,{children:[(0,T.tZ)(H,{topNavHeight:y,children:(0,T.tZ)(L,{collections:S,currentSiteId:p,defaultAllHighlights:_,selectedCollectionId:b?.id,setSearchQuery:i})}),(0,T.tZ)(U,{children:(0,T.tZ)(l.d,{collection:b,collectionsStatus:f})})]})}},55668:(e,t,n)=>{n.d(t,{Q:()=>i});const i=(e,t)=>`/sites/${e}/highlights/${t}`},88543:(e,t,n)=>{n.d(t,{y:()=>c});var i=n(95851),r=n(64934),a=n(16346),o=n(68212),s=n(91995);const l=(0,i.Z)(o.gN,{target:"ea77b30"})("width:100%;padding:",o.TV.spacer.x3," 0;label{text-transform:unset;}"),c=e=>{let{editedCollection:t,error:n,isOpen:i,isLoading:c,loadingText:d,onCancel:h,onConfirm:g,resetError:u}=e;const{t:p}=(0,a.$G)(),[m,f]=(0,r.useState)(t?.name??""),v="collection-name-input",x=n?`${v}-helper`:`${v}-helper ${v}-invalid`,_=p(t?"collections:manage-modal.content-label-edit":"collections:manage-modal.content-label-create"),T=p(t?"collections:manage-modal.edit-title":"collections:manage-modal.create-title"),y=p(t?"collections:manage-modal.save-changes":"collections:manage-modal.create-title"),w=(0,r.useCallback)((e=>{f(e.target.value),u()}),[u,f]),b=(0,r.useCallback)((()=>{g(m)}),[m,g]);return(0,s.BX)(o.u_,{contentLabel:_,isOpen:i,onClose:h,size:"s",children:[(0,s.tZ)(o.u_.Header,{title:T}),(0,s.tZ)(o.u_.Body,{children:(0,s.tZ)(l,{inputId:v,labelText:p("collections:manage-modal.input-label"),invalidText:n,isInvalid:Boolean(n),children:(0,s.tZ)(o.oi,{id:v,placeholder:p("collections:manage-modal.input-placeholder"),value:m,onChange:w,isDisabled:c,isInvalid:Boolean(n),isRequired:!0,"aria-describedby":x})})}),(0,s.BX)(o.u_.Footer,{children:[(0,s.tZ)(o.zx,{kind:"ghost",isDisabled:c,onClick:h,children:p("collections:manage-modal.cancel")}),(0,s.tZ)(o.zx,{kind:"primary",onClick:b,isLoading:c,isDisabled:!m||!!n,loadingText:d,children:y})]})]})}},54095:(e,t,n)=>{n.d(t,{K:()=>h});var i=n(64934),r=n(16346),a=n(68212),o=n(16304),s=n(66624),l=n(39015),c=n(86781),d=n(91995);function h(e){let{collectionId:t,collectionName:n,isOpen:h,onClose:g,siteId:u}=e;const{t:p}=(0,r.$G)(),{success:m,error:f}=(0,o.d)(),{mutateAsync:v,status:x}=function(e,t){return(0,s.useMutation)((async()=>{if(null===e)throw new Error("site ID is not defined");return l.Od(e,t)}),{onSuccess(){c.E.invalidateQueries(l.r5)}})}(u,t),_="loading"===x,T=(0,i.useCallback)((async()=>{try{await v({}),m(p("collections:remove.success")),g()}catch{f(p("collections:remove.error"))}}),[f,g,v,m,p]);return(0,d.BX)(a.u_,{contentLabel:p("collections:remove.description"),isOpen:h,onClose:g,children:[(0,d.tZ)(a.u_.Header,{title:p("collections:remove.header",{collectionName:n})}),(0,d.tZ)(a.u_.Body,{children:p("collections:remove.body")}),(0,d.BX)(a.u_.Footer,{children:[(0,d.tZ)(a.zx,{isDisabled:_,kind:"ghost",onClick:g,children:p("collections:remove.abort")}),(0,d.tZ)(a.zx,{isLoading:_,kind:"danger",loadingText:p("collections:remove.progress"),onClick:T,children:p("collections:remove.confirm")})]})]})}},31126:(e,t,n)=>{n.d(t,{H:()=>h});var i=n(64934),r=n(16346),a=n(68212),o=n(16304),s=n(54185),l=n(91226),c=n(80782),d=n(91995);function h(e){let{className:t,onAdd:n,onEventSend:h,onRemove:g,onSelectedIdsChange:u,selectedCollectionIds:p,siteId:m}=e;const{t:f}=(0,r.$G)(),{mutateAsync:v}=(0,c.A)(m),{success:x,error:_}=(0,o.d)(),{data:T}=(0,l.L)(m),y=(0,i.useMemo)((()=>{return[...(e=T,e?e.filter((e=>{let{id:t}=e;return t!==s._})).map((e=>{let{id:t,name:n}=e;return{label:n,value:t}})):[])];var e}),[T]),w=(0,i.useMemo)((()=>{return t=p,(e=T)&&t?e.filter((e=>{let{id:n}=e;return t.has(n)})).map((e=>{let{id:t,name:n}=e;return{label:n,value:t}})):[];var e,t}),[T,p]),b=(0,i.useCallback)((e=>{const t=e.map((e=>{let{value:t}=e;return t})),i=new Set(t);n&&t.filter((e=>!p.has(e))).forEach(n),g&&Array.from(p).filter((e=>!i.has(e))).forEach(g),p.size<t.length&&h(),u(i)}),[n,h,u,g,p]),S=(0,i.useCallback)((e=>{const t=new Set(p);t.add(e),u(t),n?.(e),h()}),[n,h,u,p]),Z=(0,i.useCallback)((async e=>{try{const t=await v({name:e});x(f("collections:create.success")),S(t)}catch(e){if(e instanceof c.C)return;_(f("collections:create.error.unknown"))}}),[_,S,v,x,f]);return(0,d.tZ)(d.HY,{children:(0,d.tZ)(a.NU,{size:"s",className:t,availableOptions:y,selectedOptions:w,onChange:b,placeholder:f("collections:selector.placeholder"),hasAddOption:!0,onAddOption:Z})})}n(34613)},80782:(e,t,n)=>{n.d(t,{A:()=>s,C:()=>r.CR});var i=n(66624),r=n(39015),a=n(86781),o=n(16431);function s(e){return(0,i.useMutation)((t=>{let{name:n}=t;return r.Ue(e,n)}),{onSuccess(){(0,o.event)("collection_created"),a.E.invalidateQueries(r.r5)}})}},91226:(e,t,n)=>{n.d(t,{L:()=>a});var i=n(66624),r=n(39015);function a(e){return(0,i.useQuery)([r.r5,e],(()=>r.go(e)),{enabled:null!==e,staleTime:3e5,refetchOnWindowFocus:"always"})}},77715:(e,t,n)=>{n.d(t,{H:()=>A});var i=n(95851),r=n(64934),a=n(16346),o=n(68212),s=n(31126),l=n(70380),c=n(61123),d=n(71935),h=n(7664),g=n(2417),u=n(16431),p=n(28282),m=n(18278),f=n(13482),v=n(3655),x=n(30076),_=n(43933),T=n(80614),y=n(72963),w=n(36111),b=n(91995);const S=(0,i.Z)("div",{target:"e1tic3c10"})(o.TV.text("subtitle1")," padding:",o.TV.spacer.x1pt5," ",o.TV.spacer.x2,";color:",o.TV.color.text_default,";background:",o.TV.color.bg_active,";border-radius:",o.TV.spacer.x0,";"),Z=e=>{let{clicksCount:t,clicksPercentage:n,isDesktop:i,className:r}=e;const a=(0,w.L)({count:t,isDesktop:i});return t>0&&n>0?(0,b.BX)(S,{className:r,children:[(0,y.TY)(t)," ",a," (",(0,y.TY)(n),"%)"]}):null};var k=n(36735);const E=(0,i.Z)(f.wq,{target:"e1vsk22a3"})("border:1px solid ",o.TV.color.ui_border,";border-radius:",o.TV.radius.m,";overflow:hidden;"),C=(0,i.Z)("div",{target:"e1vsk22a2"})("margin-bottom:",o.TV.spacer.x2,";"),I=(0,i.Z)(Z,{target:"e1vsk22a1"})("margin-bottom:",o.TV.spacer.x2,";"),R=(0,i.Z)("div",{target:"e1vsk22a0"})("background-color:",o.TV.color.bg_active,";margin:-24px;margin-top:0px;padding:24px;border-top:1px solid ",o.TV.color.ui_border,";");function A(e){let{apiToken:t=null,currentUser:n,deactivateCurrentItem:i,isPlaying:o=!1,item:f,onPause:y=(()=>null),onShare:w=(()=>null),organizationId:S,refetchHighlights:Z=(()=>null),setActiveItem:A=(()=>null),siteId:O,isDesktop:V=!0}=e;const N=(0,m.y)("settings.custom-labels"),{areThreadsFetched:D,threads:L,threadProps:P,removalConfirmationProps:B,renderNewThread:H}=(0,d.M)({apiToken:t,autoFocusTextField:!1,compactNewThread:!0,currentUser:n,isPlaying:o,newThreadMetadata:{},onPause:y,onThreadAdded:()=>Z(),onThreadRemoved:()=>{Z(),i()},organizationId:S,scopeId:f.commentId?Number(f.commentId):null,setActiveItem:A,siteId:O,widgetId:Number(f.id),widgetType:"highlight",invalidateQuery:p.w}),{t:U}=(0,a.$G)(),{add:$,remove:M}=(0,T.x)(O,String(f.id)),{add:z,remove:G}=(0,_.U)(O,String(f.id)),[j,X]=(0,r.useState)(new Set(f.labels.map((e=>e.id)))),[F,W]=(0,r.useState)(new Set(f.collections.map((e=>e.id)))),q=D,K=()=>{(0,u.event)("recording"===f.type?"recording_highlight_added_to_collection":"heatmap_highlight_added_to_collection")};return(0,r.useEffect)((()=>{q&&(0,u.event)("recording"===f.type?x.Qk:x.qq)}),[q,f.type]),q?(0,b.BX)(b.HY,{children:[(0,b.BX)(E,{currentUser:{id:String(n.id)},highlight:{...f,id:String(f.id)},onShare:w,onClose:i,siteId:String(O),children:["heatmap"===f.type&&(0,b.tZ)(I,{clicksCount:f.metadata.clicksCount??0,clicksPercentage:f.metadata.clicksPercentage??0,isDesktop:V}),!N&&(0,b.BX)(b.HY,{children:[(0,b.tZ)(v.v,{as:"p",textType:"subtitle2",children:U("highlights:recordings.collections")}),(0,b.tZ)(s.H,{onAdd:z,onEventSend:K,onRemove:G,onSelectedIdsChange:W,selectedCollectionIds:F,siteId:String(O)})]}),(0,b.tZ)(v.v,{as:"p",textType:"subtitle2",children:U("highlights:recordings.labels")}),!N&&(0,b.tZ)(h.T,{children:(0,b.tZ)(g.YH,{onAdd:$,onRemove:M,onSelectedIdsChange:X,selectedLabelIds:j,siteId:String(O)})}),N&&(0,b.tZ)(k.k,{siteId:O,itemId:f.id,itemLabels:f.labels}),(0,b.tZ)(v.v,{as:"p",textType:"subtitle2",children:U("highlights:recordings.comments")}),0===L.length?(0,b.tZ)(C,{children:H()}):(0,b.tZ)(c.j,{...P,onClose:i,thread:L[0]}),N&&(0,b.BX)(R,{children:[(0,b.tZ)(v.v,{as:"p",textType:"subtitle2",children:U("highlights:recordings.collections")}),(0,b.tZ)(s.H,{onAdd:z,onEventSend:K,onRemove:G,onSelectedIdsChange:W,selectedCollectionIds:F,siteId:String(O)})]})]}),(0,b.tZ)(l.K,{...B})]}):null}},54286:(e,t,n)=>{n.d(t,{gJ:()=>d});var i=n(95851),r=n(64934),a=n(72963),o=n(68212),s=n(36111),l=n(91995);const c=(0,i.Z)("div",{target:"e49tn3t0"})(o.TV.transition("opacity"),";",o.TV.text("subtitle2")," position:absolute;display:flex;align-items:center;justify-content:center;white-space:nowrap;background:",o.TV.color.white,";border-radius:",o.TV.radius.m,";padding:",o.TV.spacer.x1,";top:",(e=>e.top),"px;left:",(e=>e.left),"px;opacity:0;"),d=e=>{let{y1:t,y2:n,left:i,containerHeight:o,containerWidth:d,isDesktop:h,clicksCount:g,clicksPercentage:u,className:p}=e;const m=(0,s.L)({count:g,isDesktop:h}),f=(0,r.useRef)(null),[v,x]=(0,r.useState)(0);if((0,r.useEffect)((()=>{f?.current&&x(f.current.clientWidth)}),[f]),0===g||0===u)return null;const _=function(e){let{y1:t,y2:n,containerHeight:i,margin:r,height:a}=e;const o=n+a>i?t-a-r:n+r;return Math.max(o,0)}({y1:t,y2:n,containerHeight:o,margin:5,height:36}),T=function(e){let{left:t,width:n,containerWidth:i,margin:r}=e;return Math.min(t,i-(n+r))}({containerWidth:d,width:v,left:i,margin:5});return(0,l.BX)(c,{ref:f,className:p,left:T,top:_,children:[(0,a.Y4)(g)," ",m," (",(0,a.Y4)(u),"%)"]})}},94341:(e,t,n)=>{n.d(t,{F:()=>u});var i=n(95851),r=n(64934),a=n(68212),o=n(22677),s=n(54286),l=n(97385),c=n(91995);const d=(0,i.Z)(s.gJ,{target:"e1ewz12f1"})({name:"3ix1vd",styles:"opacity:1"}),h=(0,i.Z)("div",{target:"e1ewz12f0"})({name:"4bgdod",styles:"display:block;position:relative"}),g={w:100,h:100},u=(0,r.forwardRef)(((e,t)=>{let{className:n,url:i,clicksCount:s,clicksPercentage:u,isDesktop:p,selectedArea:m,strokeWidth:f=2,onReady:v}=e;const x=(0,r.useRef)(null),_=(0,r.useRef)(null),[T,y]=(0,r.useState)({x:0,y:0,w:0,h:0}),[w,b]=(0,r.useState)({x:0,y:0,w:0,h:0});(0,r.useImperativeHandle)(t,(()=>({get:()=>x.current})));const{encodedImage:S,size:Z}=(0,o.d)(i),[k,E]=Z;if((0,r.useEffect)((()=>{v&&x.current&&v(x.current??null)})),(0,r.useEffect)((()=>{if(E&&k){if(x.current){const e=x.current.getBoundingClientRect();y({x:e.x,y:e.y,h:e.height,w:e.width})}if(_.current){const e=_.current.getBoundingClientRect();b({x:e.x,y:e.y,h:e.height,w:0})}}}),[E,k,m,x,_]),!(k>0&&E>0))return null;const C={x:m.x1,y:m.y1,w:m.x2-m.x1,h:m.y2-m.y1},I={top:w.y-T.y-f,bottom:w.y-T.y+w.h-f,left:w.x-T.x-f};return(0,c.BX)(h,{className:n,children:[(0,c.tZ)(d,{containerHeight:T.h,containerWidth:T.w,clicksCount:s??0,clicksPercentage:u??0,y1:I.top,y2:I.bottom,left:I.left,isDesktop:p??!0}),(0,c.BX)("svg",{ref:x,viewBox:(0,l.e)(C,g),height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMinYMin meet",children:[(0,c.tZ)("image",{href:S,width:E,height:k}),(0,c.tZ)("rect",{ref:_,x:C.x,y:C.y,width:C.w,height:C.h,fill:"none",stroke:a.TV.color.white,strokeWidth:f,vectorEffect:"non-scaling-stroke"})]})]})}))},29082:(e,t,n)=>{n.d(t,{D:()=>D});var i=n(95851),r=n(68212),a=n(2417),o=n(91995);const s=(0,i.Z)("img",{target:"e11khq4m0"})({name:"1brtr1c",styles:"filter:drop-shadow(1px 0px 2px #c3c3c3)"});var l;!function(e){e.m="m",e.l="l",e.xl="xl"}(l||(l={}));const c={m:16,l:32,xl:48},d=e=>{let{name:t,size:n="m",tiltRight:i=!1}=e;const r=a.Zi[t],l=c[n];return r?(0,o.tZ)(s,{src:r,width:l,height:l,style:{transform:`rotate(${i?8:-8}deg)`}}):null},h=(0,i.Z)("div",{target:"enh9phi0"})("background-color:",r.TV.color.ui_background,";border:",(e=>{let{sizeInPx:t}=e;return 3/32*t}),"px solid ",r.TV.color.white,";border-radius:50%;filter:drop-shadow(1px 0px 2px #c3c3c3);display:flex;justify-content:center;align-items:center;");var g;!function(e){e.s="s",e.m="m",e.l="l",e.xl="xl"}(g||(g={}));const u={s:16,m:24,l:32,xl:48},p=e=>{let{userName:t,src:n,size:i="s"}=e;const a=u[i];return(0,o.tZ)(h,{sizeInPx:a,children:(0,o.tZ)(r.qE,{src:n,userName:t,hideTooltip:!0,size:i})})},m=(0,i.Z)("div",{target:"e1va6td2"})({name:"ho1qnd",styles:"display:flex;flex-direction:row"}),f=(0,i.Z)("div",{target:"e1va6td1"})("position:relative;width:",(e=>{let{backgroundWidth:t}=e;return t}),"px;display:flex;align-items:flex-end;"),v=(0,i.Z)("div",{target:"e1va6td0"})("width:max-content;border-radius:50%;background-color:#64b5f7;color:white;",r.TV.text("caption")," font-size:10px;text-align:center;padding:0 2px;");var x;!function(e){e[e.avatar=0]="avatar",e[e.reaction=1]="reaction",e[e.counter=2]="counter"}(x||(x={}));var _={name:"mrf3qt",styles:"position:absolute;bottom:-2px"},T={name:"a4hmbt",styles:"position:absolute"},y={name:"a4hmbt",styles:"position:absolute"};const w=e=>{let{className:t,commenters:n,reactions:i,onClick:r,onMouseEnter:a}=e;const s=((e,t)=>{const n=[],i=[...e],r=[...t],a=i.length>0;if(a){const{name:e,avatar:t}=i[0];n.push({stickerKind:x.avatar,isMain:!0,userName:e,src:t}),i.shift()}if(r.length>0&&n.length<2){const e=Math.min(r.length,2-n.length);for(let t=0;t<e;t++){const e=r[0];n.push({stickerKind:x.reaction,isMain:!a,reactionName:e}),r.shift()}}if(i.length>0&&n.length<2){const e=2-n.length;for(let t=0;t<e;t++){const{name:e,avatar:t}=i[0];n.push({stickerKind:x.avatar,isMain:!1,userName:e,src:t}),i.shift()}}return(r.length>0||i.length>0)&&n.push({stickerKind:x.counter,count:r.length+i.length}),n})(n,i);return(0,o.tZ)(m,{className:t,onClick:r,onMouseEnter:a,children:s.map(((e,t)=>{switch(e.stickerKind){case x.avatar:return(0,o.tZ)(f,{backgroundWidth:e.isMain?26:14,children:(0,o.tZ)(p,{src:e.src&&-1===e.src.indexOf("default-avatar")?e.src:void 0,userName:e.userName,size:e.isMain?"l":"s",css:y})},t);case x.reaction:return(0,o.tZ)(f,{backgroundWidth:e.isMain?26:14,children:(0,o.tZ)(d,{name:e.reactionName,size:e.isMain?"l":"m",tiltRight:t%2!=0,css:T})},t);case x.counter:return(0,o.tZ)(f,{backgroundWidth:14,children:(0,o.BX)(v,{css:_,children:["+",e.count]})},t);default:return(0,o.tZ)("div",{})}}))})};var b=n(89714),S=n(3094),Z=n(18278),k=n(14928);n(74870);const E=(0,i.Z)("div",{target:"e1iyrw9c3"})({name:"1vnqori",styles:"display:flex;flex-direction:row;align-items:flex-end"}),C=(0,i.Z)("div",{target:"e1iyrw9c2"})("position:relative;width:",(e=>{let{backgroundWidth:t}=e;return t}),"px;display:flex;align-items:flex-end;"),I=(0,i.Z)(a.$i,{target:"e1iyrw9c1"})("transform:rotate(",(e=>{let{rotation:t}=e;return t??0}),"deg);left:",(e=>{let{rotation:t,isMain:n}=e;return t&&n&&t>0?"-3px":"auto"}),";right:",(e=>{let{rotation:t,isMain:n}=e;return t&&n&&t<0?"-3px":"auto"}),";",(e=>{let{rotation:t}=e;return t&&t>0?r.TV.elevation(1):""}),";"),R=(0,i.Z)(a.kv,{target:"e1iyrw9c0"})("position:relative;transform:rotate(",(e=>{let{rotation:t}=e;return t??0}),"deg);left:-8px;");let A;!function(e){e[e.avatar=0]="avatar",e[e.reaction=1]="reaction",e[e.counter=2]="counter"}(A||(A={}));var O={name:"a4hmbt",styles:"position:absolute"};const V=e=>{let{className:t,commenters:n,highlightLabelIds:i,availableLabels:r,onClick:a,onMouseEnter:s}=e;const l=r?.filter((e=>i.includes(e.id))),c=((e,t)=>{const n=[],i=[...e],r=[...t],a=i.length>0;if(a){const{name:e,avatar:t}=i[0];n.push({stickerKind:A.avatar,isMain:!0,userName:e,src:t}),i.shift()}if(r.length>0&&n.length<2){const e=Math.min(r.length,2-n.length);for(let t=0;t<e;t++){const e=r[0];n.push({stickerKind:A.reaction,isMain:!a,reactionName:e.name,icon:e.iconName,rotation:n.length?8:-8,custom:e.custom,keyName:e.keyName}),r.shift()}}if(i.length>0&&n.length<2){const e=2-n.length;for(let t=0;t<e;t++){const{name:e,avatar:t}=i[0];n.push({stickerKind:A.avatar,isMain:!1,userName:e,src:t}),i.shift()}}return(r.length>0||i.length>0)&&n.push({stickerKind:A.counter,count:r.length+i.length,rotation:a?8:0,hasCommenters:a}),n})(n,l??[]);return(0,o.tZ)(E,{className:t,onClick:a,onMouseEnter:s,children:c.map(((e,t)=>{switch(e.stickerKind){case A.avatar:return(0,o.tZ)(C,{backgroundWidth:e.isMain?26:14,children:(0,o.tZ)(p,{src:e.src&&-1===e.src.indexOf("default-avatar")?e.src:void 0,userName:e.userName,size:e.isMain?"l":"s",css:O})},t);case A.reaction:return(0,o.tZ)(I,{size:e.isMain?"l":"m",iconName:e.icon,text:e.reactionName,rotation:e.rotation,isMain:e.isMain,keyName:e.keyName},e.reactionName);case A.counter:return(0,o.tZ)(R,{number:e.count,maxDigits:2,rotation:e.rotation,hasCommenters:e.hasCommenters},"overflow");default:return(0,o.tZ)("div",{})}}))})},N=(0,i.Z)("button",{target:"e1rl55id0"})("display:flex;align-items:center;justify-content:center;background:",r.TV.color.ui_background,";border:3px solid ",r.TV.color.white,";border-radius:50%;outline:none;padding:0;",r.TV.elevation(3),";"),D=e=>{let{className:t,onClick:n,onMouseEnter:i,showReactionIcon:s,author:l,labels:c=[],hasComments:d}=e;const h=(0,Z.y)("settings.custom-labels"),g=(0,k.$n)(),{data:u}=(0,a.cW)(g,h?"all":"default");if(s&&c.length>0){const e=c.map((e=>(0,b.Lr)(e))),r=d?[l]:[];return h?(0,o.tZ)(V,{className:t,commenters:r,highlightLabelIds:c,availableLabels:u??[],onClick:n,onMouseEnter:i}):(0,o.tZ)(w,{className:t,commenters:r,reactions:e,onClick:n,onMouseEnter:i})}return(0,o.tZ)(N,{className:t,type:"button",onClick:n,onMouseEnter:i,children:(0,o.tZ)(r.qE,{src:(0,S.B)(l),userName:l.name,size:"l",hideTooltip:!0})})}},84929:(e,t,n)=>{n.d(t,{R:()=>a});var i=n(72963),r=n(88875);function a(e){const{svg:t,highlight:n,eventCopy:a}=e,{selectedArea:o}=n.metadata,s=document.createElement("canvas"),l=s.getContext("2d");return null===l?Promise.reject(new Error("Canvas context is null")):new Promise(((e,c)=>{const d=(new XMLSerializer).serializeToString(t),h=new Blob([d],{type:"image/svg+xml;charset=utf-8"}),g=window.URL.createObjectURL(h),u=new Image;u.onload=()=>{const t=u.naturalWidth/u.naturalHeight;s.width=Math.max(500,o.x2-o.x1),s.height=s.width/t,l.drawImage(u,0,0),function(e,t){const{highlight:n,eventCopy:r,maxWidth:a}=t,o=n.metadata.clicksCount??0,s=n.metadata.clicksPercentage??0;if(0===o||0===s)return;const l=`${(0,i.Y4)(o)} ${r} (${(0,i.Y4)(s)}%)`;e.font="500 14px Roboto, Arial, sans-serif",e.fillStyle="rgba(255, 255, 255, 0.6)",e.textBaseline="top";const c=e.measureText(l);e.fillRect(0,0,c.width+20,c.fontBoundingBoxAscent+c.fontBoundingBoxDescent+10),e.fillStyle="rgba(0, 0, 0, 0.89)",e.fillText(l,10,0+20/3,a)}(l,{eventCopy:a,highlight:n,maxWidth:s.width});const c=s.toDataURL("image/png").replace("image/png","image/octet-stream");(0,r.O)(c,`${[`Hotjar Highlight ${n.id}`,n.description].filter(Boolean).join(" - ")}.png`),window.URL.revokeObjectURL(g),e(c)},u.onerror=()=>{c(new Error(`Failed to load image: ${g}`))},u.src=g}))}},36111:(e,t,n)=>{n.d(t,{L:()=>a});var i=n(16346),r=n(42862);const a=e=>{let{count:t,isDesktop:n}=e;const{t:a}=(0,i.$G)(),o=(0,r.H)({one:a("highlights:heatmaps.stats.click"),other:a("highlights:heatmaps.stats.clicks")},t),s=(0,r.H)({one:a("highlights:heatmaps.stats.tap"),other:a("highlights:heatmaps.stats.taps")},t);return n?o:s}},97385:(e,t,n)=>{function i(e,t){return[Math.max(0,e.x-t.w/2),Math.max(0,e.y-t.h/2),e.w+t.w,e.h+t.h].join(" ")}n.d(t,{e:()=>i})},58315:(e,t,n)=>{n.d(t,{W:()=>g});var i=n(95851),r=n(16346),a=n(68212),o=n(45366),s=n(72657),l=n(64934),c=n(91995);const d=(0,i.Z)("span",{target:"emju6mu1"})((e=>{let{color:t}=e;return t&&"inherited"!==t&&a.TV.ALIAS_TEXT_COLORS[t]?`color: ${a.TV.ALIAS_TEXT_COLORS[t]};`:""}),";"),h=(0,i.Z)(a.JO,{target:"emju6mu0"})("margin-right:",a.TV.spacer.x1,";"),g=e=>{let{authorIsCurrentUser:t,uiPosition:n,highlight:i,onCloseDeleteModal:g,siteId:u}=e;const{t:p}=(0,r.$G)(),{setHighlightSolved:m}=(0,o.m)(u),{isOpen:f,openModal:v,onModalClose:x}=(e=>{const[t,n]=(0,l.useState)(!1);return{isOpen:t,openModal:(0,l.useCallback)((()=>{n(!0)}),[]),onModalClose:(0,l.useCallback)((t=>{n(!1),t||e()}),[e])}})(g);return(0,c.BX)(c.HY,{children:[(0,c.BX)(a.h_,{trigger:(0,c.tZ)(a.hU,{description:p("highlights:single.actions"),icon:"menu_kebab",kind:"ghost",size:"s",tooltipText:p("collections:actions.description")}),appendTo:"parent",children:[(0,c.BX)(a.h_.BaseItem,{onClick:()=>m(i.id,!i.solved,n),children:[(0,c.tZ)(h,{icon:i.solved?"check_alt":"check",color:i.solved?"text_success":"text_default",size:"m"}),(0,c.tZ)(d,{color:"text_default",children:i.solved?p("highlights:single.unmark_solved"):p("highlights:single.mark_solved")})]}),t?(0,c.BX)(a.h_.BaseItem,{"aria-label":p("highlights:single.remove.description"),onClick:()=>v(),hasDivider:!0,children:[(0,c.tZ)(h,{icon:"trash",color:"text_warning",size:"m"}),(0,c.tZ)(d,{color:"text_warning",children:p("highlights:single.remove.label")})]}):(0,c.tZ)(c.HY,{})]}),(0,c.tZ)(s.p,{siteId:u,highlightId:i.id,onModalClose:x,isOpen:f,uiPosition:n})]})}},98405:(e,t,n)=>{n.d(t,{x:()=>E});var i=n(95851),r=n(64934),a=n(16346),o=n(68212),s=n(24685),l=n(34448),c=n(56551),d=n(91995);const h=/^([0-5]?\d):([0-5]\d)$/;function g(e){let{children:t}=e;const{t:n}=(0,a.$G)();switch(t){case"START_EXCEEDS_MARKER":return(0,d.tZ)("span",{children:n("highlights:single.create.error.clipStartExceedsMarker")});case"END_EXCEEDS_MARKER":return(0,d.tZ)("span",{children:n("highlights:single.create.error.clipEndExceedsMarker")});case"TOO_SHORT":return(0,d.tZ)("span",{children:n("highlights:single.create.error.clipTooShort")});case"TOO_LONG":return(0,d.tZ)("span",{children:n("highlights:single.create.error.clipTooLong")});default:return null}}const u=(0,i.Z)("div",{target:"e13whq6j13"})("position:relative;display:flex;flex-direction:column;margin-top:",o.TV.spacer.x1,";"),p=(0,i.Z)("div",{target:"e13whq6j12"})("margin-top:",o.TV.spacer.x1,";justify-content:end;align-items:center;"),m=(0,i.Z)("div",{target:"e13whq6j11"})("margin-top:",o.TV.spacer.x2,";float:right;width:100%;"),f=(0,i.Z)("div",{target:"e13whq6j10"})({name:"1u90x5t",styles:"float:right;height:100%;display:flex;align-items:center;z-index:1;button{z-index:1;}"}),v=(0,i.Z)(o.hU,{target:"e13whq6j9"})({name:"g0dsyy",styles:"float:left"}),x=(0,i.Z)("div",{target:"e13whq6j8"})({name:"1739oy8",styles:"z-index:1"}),_=(0,i.Z)("span",{target:"e13whq6j7"})(o.TV.text("subtitle3")," color:",o.TV.color.text_light,";position:absolute;z-index:1;margin:",o.TV.spacer.x1pt5,";"),T=(0,i.Z)(o.oi,{target:"e13whq6j6"})("width:112px;height:40px;input{padding:0px 0px 0 ",o.TV.spacer.x6,";}"),y=(0,i.Z)("div",{target:"e13whq6j5"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),w=(0,i.Z)("div",{target:"e13whq6j4"})("margin:0 ",o.TV.spacer.x1,";z-index:1;"),b=(0,i.Z)(o.JO,{target:"e13whq6j3"})({name:"1739oy8",styles:"z-index:1"}),S=(0,i.Z)(o.zx,{target:"e13whq6j2"})("margin-right:",o.TV.spacer.x1,";"),Z=(0,i.Z)(o.xv,{target:"e13whq6j1"})("margin-top:",o.TV.spacer.x1,";"),k=(0,i.Z)(o.xv,{target:"e13whq6j0"})("margin-right:",o.TV.spacer.x2,";"),E=e=>{let{className:t,isSubmitting:n,highlightType:i="heatmap",newHighlightTime:E,newHighlightTimeError:C,onNewHighlightTime:I,onSave:R,onClose:A,jumpTo:O,onPlay:V,pause:N,loaded:D,isPlaying:L}=e;const[P,B]=(0,r.useState)({end:"",start:""}),H=(0,l.hr)((e=>e.currentTime)),{isPlayingStarted:U,togglePlayPause:$}=function(e){let{loaded:t,isPlaying:n,currentTime:i,newHighlightTime:a,onPlay:o,pause:s,jumpTo:l}=e;const[d,h]=(0,r.useState)(!1),{click:g}=(0,c.S)();return(0,r.useEffect)((()=>{o&&s&&t&&(!n&&d?setTimeout((()=>{o()}),500):n&&d&&i>=(a?.end??0)?(s(),h(!1)):n&&!d&&s())}),[t,n,d,i,a,o,s]),{isPlayingStarted:d,togglePlayPause:()=>{n&&d?h(!1):l&&(l(a?.start||0),h(!0),g("Create highlight - preview clip","clicked_on_highlight_preview_button",{}))}}}({loaded:D,isPlaying:L,currentTime:H,newHighlightTime:E,onPlay:V,pause:N,jumpTo:O}),{t:M}=(0,a.$G)();(0,r.useEffect)((()=>{E&&B({end:(0,s.mr)(E.end),start:(0,s.mr)(E.start)})}),[E]);const z=e=>t=>{const n=t.target.value;B((t=>({...t,[e]:n}))),h.test(n)&&E&&I&&I({...E,[e]:(0,s.C)(n)})};return(0,d.BX)(u,{className:t,children:[(0,d.BX)(p,{children:["recording"===i?(0,d.BX)(y,{children:[(0,d.BX)(x,{children:[(0,d.tZ)(_,{children:M("highlights:recordings.start")}),(0,d.tZ)(T,{"aria-label":"Clip duration start",size:"s",value:P.start,onChange:z("start")})]}),(0,d.tZ)(w,{children:(0,d.tZ)(b,{icon:"arrow_right"})}),(0,d.BX)(x,{children:[(0,d.tZ)(_,{children:M("highlights:recordings.end")}),(0,d.tZ)(T,{"aria-label":"Clip duration end",size:"s",value:P.end,onChange:z("end")})]})]}):null,"recording"!==i?(0,d.tZ)(k,{textType:"caption",children:M("highlights:single.create.copy")}):null,(0,d.BX)(m,{children:["recording"===i&&(0,d.tZ)(v,{icon:L&&U?"pause_alt":"play_alt",size:"s",tooltipText:M(L&&U?"highlights:recordings.pause":"highlights:recordings.preview"),onClick:$}),(0,d.BX)(f,{children:[(0,d.tZ)(S,{kind:"ghost",size:"s",onClick:A,children:M("common:player.cancel")}),(0,d.tZ)(o.zx,{isDisabled:n,type:"submit",kind:"primary",size:"s","data-testid":"create-highlight",onClick:R,children:M("common:player.save")})]})]})]}),"recording"===i&&C?(0,d.tZ)(Z,{as:"p",textType:"caption",textColor:"text_default",children:(0,d.tZ)(g,{children:C})}):null]})}},13482:(e,t,n)=>{n.d(t,{wq:()=>P,j4:()=>L,qr:()=>D});var i=n(64934),r=n(95851),a=n(16346),o=n(68212),s=n(54031),l=n(78483),c=n(19516),d=(n(10868),n(52402)),h=n(91364),g=n(91995);const u=(0,r.Z)(o.u_,{target:"e1lyvjj20"})({name:"2iohh1",styles:"width:326px;height:128px;min-height:128px;margin:30% auto"}),p=e=>{let{siteId:t,highlight:n,isOpen:r,onClose:p,uiPosition:m}=e;const f=(0,i.useRef)(null),v=(0,h.t)(t,n.fullItemUrl),{t:x}=(0,a.$G)(),_=(0,i.useCallback)((()=>{null!==f.current&&(0,c.e)(f.current),"success"===v.status&&t&&(0,l.dT)(t,{highlightId:n.id,eventType:s.v.HIGHLIGHT_SHARED},{uiPosition:m})}),[v,t,n.id,m]);return(0,g.tZ)(u,{appElementSelector:"#root",contentLabel:x("common:actions.share"),isOpen:r,onClose:()=>{p()},children:(0,g.tZ)(o.u_.Body,{children:(0,g.tZ)(d.m,{onCopy:_,ref:f})})})};var m=n(55627);const f=(0,r.Z)(o.aN,{target:"e1uq2yzd2"})("margin-right:",o.TV.spacer.x0,";"),v=(0,r.Z)("div",{target:"e1uq2yzd1"})("text-transform:none;display:flex;color:",o.TV.color.text_light,";"),x=(0,r.Z)(o.rU,{target:"e1uq2yzd0"})("margin-left:",o.TV.spacer.x0,";& svg{display:none;}");function _(e){switch(e){case"creating":return"highlights:recordings.saving";case"done":return"highlights:recordings.saved";case"failed":case"source_deleted":return"highlights:recordings.save-error";default:return"highlights:recordings.unknown-status"}}const T=e=>{let{siteId:t,highlight:n}=e;const i=(0,m.R)(t,n.id);return(0,g.tZ)(a.cC,{i18nKey:"highlights:recordings.saved",children:(0,g.tZ)(x,{isExternal:!0,href:i,kind:"inline",children:"Highlight"})})},y=e=>{const{highlight:t}=e,{t:n}=(0,a.$G)();return(0,g.BX)(v,{children:[(0,g.tZ)(f,{size:"m",isLoading:"creating"===t.contentStatus}),"done"===t.contentStatus?(0,g.tZ)(T,{...e}):(0,g.tZ)(g.HY,{children:n(_(t.contentStatus))})]})},w=e=>(0,g.tZ)(v,{children:(0,g.tZ)(T,{...e})}),b=e=>{const{highlight:t}=e;return"recording"===t.type?(0,g.tZ)(y,{...e}):(0,g.tZ)(w,{...e})},S=(0,r.Z)(o.Zb,{target:"errfe071"})({name:"8x2duv",styles:"text-align:left;&{width:364px;}&>header{}& .card-body{padding:0;}"}),Z=(0,r.Z)("div",{target:"errfe070"})("max-height:436px;overflow-y:auto;padding:",o.TV.spacer.x3,";");var k=n(58315),E=n(41028);const C=(0,r.Z)(k.W,{target:"e1ox8nvz0"})("margin-left:",o.TV.spacer.x1,";"),I=e=>{const{children:t,highlight:n,onClose:r,siteId:c,currentUser:d,className:h}=e,{t:u}=(0,a.$G)(),[m,f]=(0,i.useState)(!1),[v,x]=(0,i.useState)(!1);(0,i.useEffect)((()=>{(0,l.dT)(c,{highlightId:n.id,eventType:s.v.HIGHLIGHT_VIEWED},{highlightArea:"heatmap_area"})}),[c,n.id]);const _=(0,i.useCallback)((()=>{f(!0)}),[f]);return(0,g.BX)(g.HY,{children:[v&&(0,g.tZ)(E.G,{highlightId:n.id,imageUrl:n.imageUrl,selectedArea:n.metadata.selectedArea,afterDownload:()=>x(!1),siteId:c,trackingUiPosition:"highlight_popover"}),(0,g.tZ)(p,{siteId:c,highlight:{id:n.id,fullItemUrl:n.fullItemUrl??""},isOpen:m,onClose:()=>f(!1),uiPosition:"highlight_popover"}),(0,g.BX)(S,{onDismiss:r,className:"highlight-popover"+(h?` ${h}`:""),children:[(0,g.BX)(o.Zb.Header,{title:u("highlights:single.types.Heatmap"),subtitle:(0,g.tZ)(b,{siteId:c,highlight:n}),children:[(0,g.BX)(o.PC,{description:u("highlights:popover.more-options"),children:[(0,g.tZ)(o.PC.Item,{isDisabled:v,icon:"download",onClick:()=>{x(!0)},description:u("highlights:single.download")}),(0,g.tZ)(o.PC.Item,{icon:"share",onClick:_,description:u("common:actions.share")})]}),(0,g.tZ)(C,{siteId:c,uiPosition:"highlight_popover",highlight:n,authorIsCurrentUser:d?.id===n.author.id,onCloseDeleteModal:r})]}),(0,g.tZ)(o.Zb.Body,{className:"card-body",children:(0,g.tZ)(Z,{children:t})})]})]})};var R=n(16431),A=n(88875),O=n(36224);const V=(0,r.Z)(k.W,{target:"eb2cdlz0"})("margin-left:",o.TV.spacer.x1,";"),N=e=>{let{children:t,highlight:n,onClose:r,siteId:c,onShare:d,currentUser:h,className:u}=e;const{t:p}=(0,a.$G)(),{data:m}=(0,O.O)(c,n),{contentStatus:f}=m,{videoUrl:v}=n.metadata,{start:x}=n.metadata.clip;(0,i.useEffect)((()=>{(0,l.dT)(c,{highlightId:n.id,eventType:s.v.HIGHLIGHT_VIEWED},{highlightArea:"recording_timeline_area"})}),[c,n.id]);const _=(0,i.useCallback)((()=>{v&&(0,A.O)(v,`clip_${n.id}.mp4`),c&&(0,l.dT)(c,{highlightId:n.id,eventType:s.v.HIGHLIGHT_DOWNLOADED},{uiPosition:"highlight_popover"}),(0,R.event)("recording_highlight_downloaded")}),[c,n.id,v]);return(0,g.BX)(S,{onDismiss:r,className:"highlight-popover"+(u?` ${u}`:""),children:[(0,g.BX)(o.Zb.Header,{title:p("highlights:single.types.clip"),subtitle:(0,g.tZ)(b,{siteId:c,highlight:m}),children:[(0,g.BX)(o.PC,{description:p("highlights:popover.more-options"),children:[(0,g.tZ)(o.PC.Item,{isDisabled:"done"!==f,icon:"download",onClick:_,description:p("done"===f?"highlights:single.download":"highlights:single.clip_will_be_ready")}),(0,g.tZ)(o.PC.Item,{icon:"share",onClick:()=>d(x),description:p("common:actions.share")})]}),(0,g.tZ)(V,{siteId:c,uiPosition:"highlight_popover",highlight:n,authorIsCurrentUser:h?.id===n.author.id,onCloseDeleteModal:r})]}),(0,g.tZ)(o.Zb.Body,{className:"card-body",children:(0,g.tZ)(Z,{children:t})})]})},D=364,L=500,P=e=>{let{highlight:t,siteId:n,currentUser:i,onClose:r,children:a,onShare:o,className:s}=e;return void 0===t||null===n||null===t?null:"recording"===t.type?(0,g.tZ)(N,{highlight:t,siteId:n,currentUser:i,onClose:r,onShare:o,className:s,children:a}):"heatmap"===t.type?(0,g.tZ)(I,{highlight:t,siteId:n,currentUser:i,onClose:r,className:s,children:a}):null}},36735:(e,t,n)=>{n.d(t,{k:()=>g});var i=n(95851),r=n(64934),a=n(16346),o=n(68212),s=n(2417),l=n(80614),c=n(91995);const d=(0,i.Z)(o.NU,{target:"e4hp8a0"})({name:"1biejoi",styles:"z-index:2;div[data-tippy-root]{position:relative;z-index:2;:hover{position:relative;z-index:2;}}"}),h=(e,t)=>(0,s.LK)(t?.map((t=>({...t,name:t.keyName?e(t.keyName):t.name}))));function g(e){let{itemId:t,itemLabels:n,siteId:i}=e;const{t:o}=(0,a.$G)(),{add:g,remove:u}=(0,l.x)(i,String(t)),{createLabel:p}=(0,s.B8)(Number(i)),{data:m}=(0,s.cW)(i,"all"),[f,v]=(0,r.useState)(h(o,m));(0,r.useEffect)((()=>{v(h(o,m))}),[m,v,o]);const[x,_]=(0,r.useState)(h(o,n));(0,r.useEffect)((()=>{_(h(o,n))}),[_,n,o]);const T=e=>{const t=e?.filter((e=>!x?.find((t=>t.value===e.value)))),n=x?.filter((t=>!e?.find((e=>t.value===e.value))));t?.forEach((e=>g(e.value))),n?.forEach((e=>u(e.value))),_(e)};return(0,c.tZ)(d,{size:"s",availableOptions:f,selectedOptions:x,placeholder:o("highlights:popover.add-label"),onChange:T,hasAddOption:!0,onAddOption:e=>(async e=>{const t=await p(e.charAt(0).toUpperCase()+e.slice(1));t&&(_([...x??[],{value:String(t.id),label:t.name}]),g(t.id),T([...x??[],{value:String(t.id),label:t.name}]))})(e)})}},41028:(e,t,n)=>{n.d(t,{G:()=>m});var i=n(95851),r=n(64934),a=n(16431),o=n(78483),s=n(54031),l=n(94341),c=n(648),d=n(12974),h=n(84929),g=n(36111),u=n(91995);const p=(0,i.Z)(l.F,{target:"emuxr620"})({name:"19rxuh4",styles:"position:fixed;top:0;left:0;pointer-events:none;opacity:0"}),m=e=>{let{highlightId:t,imageUrl:n,selectedArea:i,afterDownload:l,siteId:m,trackingUiPosition:f}=e;const[v,x]=(0,r.useState)(!1),_=function(e,t){const{data:n}=(0,d.D)(e,t),i=(0,g.L)({count:"heatmap"===n?.type?n?.metadata?.clicksCount??0:0,isDesktop:"heatmap"!==n?.type||"desktop"===n?.metadata?.deviceType});return t=>e?n?"heatmap"!==n.type?Promise.reject(new Error("Only heatmap highlight can be downloaded using this hook")):(0,h.R)({svg:t,highlight:n,eventCopy:i}).then(c.Z):Promise.reject(new Error("highlight is empty")):Promise.reject(new Error("siteId is empty"))}(m,t);return(0,r.useEffect)((()=>{n&&function(e,t,n){(0,o.dT)(e,{highlightId:t,eventType:s.v.HIGHLIGHT_DOWNLOADED},{uiPosition:n}),(0,a.event)("heatmap_highlight_downloaded")}(m,t,f)}),[n,m,t,f]),n?(0,u.tZ)(p,{onReady:e=>{e&&!v&&(x(!0),_(e).finally((()=>{l()})))},url:n,clicksCount:0,clicksPercentage:0,isDesktop:!0,selectedArea:i}):null}},84751:(e,t,n)=>{n.d(t,{d:()=>gn});var i=n(95851),r=n(64934),a=n(16346),o=n(93712),s=n(68212),l=n(14928),c=n(73646),d=n(4306),h=n(37416),g=(n(74870),n(88139));function u(e){return!!e&&"object"==typeof e&&null!==e}function p(e,t,n){if(!e)return t;try{return n(JSON.parse(e))}catch{return t}}function m(e){return function(e){return!!e&&"object"==typeof e&&null!==e&&"avatar"in e&&"email"in e&&"id"in e&&"name"in e}(e)&&(null===e.avatar||"string"==typeof e.avatar)&&(null===e.email||"string"==typeof e.email)&&"number"==typeof e.id&&"string"==typeof e.name}function f(e){return"string"==typeof e&&!Number.isNaN(Date.parse(e))&&e===new Date(e).toISOString()}function v(e){return u(e)&&"type"in e}function x(e){return v(e)&&"string"==typeof e.type&&e.type===g.Au.ABSOLUTE&&function(e){return u(e)&&"from"in e&&"to"in e}(e)&&f(e.from)&&f(e.to)}function _(e){return function(e){return v(e)&&"string"==typeof e.type&&e.type===g.Au.ALL}(e)||x(e)||function(e){return v(e)&&"string"==typeof e.type&&e.type===g.Au.RELATIVE&&function(e){return u(e)&&"amount"in e&&"unit"in e}(e)&&"number"==typeof e.amount&&"string"==typeof e.unit&&["hours","days","months"].includes(e.unit)}(e)}var T=n(22154);const y="page",w="items_per_page",b={page:1,itemsPerPage:30};var S=n(39015),Z=n(76359),k=n(55668),E=n(67405),C=n(91086),I=n(39269),R=n(28316),A=n(83760),O=n(33474),V=n(54915),N=n(85253),D=n(98845),L=n(84732),P=n(37657),B=n(91995);function H(e,t){return(0,D.Z)(t.map((t=>e[t.id])).filter((e=>!(0,L.Z)(e))),"id")}const U=e=>{let{selectedUsers:t=[],onApply:n,users:i}=e;const{t:o}=(0,a.$G)(),l=(0,r.useMemo)((()=>i?.sort(((e,t)=>e.name.localeCompare(t.name)))),[i]),c=(0,r.useMemo)((()=>(0,P.Z)(i,"id")),[i]),d=H(c,t),[h,g]=(0,r.useState)(d);if((0,r.useEffect)((()=>{g(H(c,t))}),[g,c,t]),null==l||0===l.length)return null;const u=l.map((e=>({value:e,label:e.name,content:(0,B.tZ)(V._,{name:e.name,email:e.email,avatar:e.avatar,focused:!1},e.id)}))),p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];g(e),n(e)},m=(0,O.iv)("&{max-height:400px;overflow-y:auto;padding-left:",s.TV.spacer.x0,";}& label{align-items:center;}","");return(0,B.tZ)(N.m,{filterName:o("highlights:filters.authors.filter-name"),label2:h.length?void 0:"Any",iconName:"user_avatar",showDropdownCaret:!0,currentValue:h,onRemove:h.length?()=>p([]):void 0,isInactive:0===h.length,optionList:u,onApply:p,renderLabel:!1,dropdownCss:m})};var $=n(2417);const M=(0,i.Z)("div",{target:"esgaqe32"})({name:"14gt13e",styles:"height:18px;display:flex;align-items:center;position:relative;top:1px"}),z=(0,i.Z)(s.JO,{target:"esgaqe31"})("margin:0px;margin-right:",s.TV.spacer.x1,";"),G=(0,i.Z)("span",{target:"esgaqe30"})("margin:0px;margin-right:",s.TV.spacer.x1,";width:",s.TV.spacer.x2,";"),j=e=>{let{iconName:t,name:n,keyName:i}=e;const{t:r}=(0,a.$G)();return(0,B.BX)(M,{children:["unknown"!==t?(0,B.tZ)(z,{icon:$.kh[t]??t,size:"m"}):(0,B.tZ)(G,{}),(0,B.tZ)(s.xv,{textType:"caption",color:"text_default",children:i?r(i):n})]})},X=e=>{let{onApply:t,selectedLabels:n=new Set,siteId:i}=e;const{t:o}=(0,a.$G)(),{data:s}=(0,$.cW)(i,"all"),[l,c]=(0,r.useState)([...n]);if((0,r.useEffect)((()=>{c([...n])}),[c,n]),!s)return null;const d=s.map((e=>({value:e.id,label:e.keyName?o(e.keyName):e.name,content:(0,B.tZ)(j,{name:e.name,iconName:e.iconName,keyName:e.keyName})}))),h=e=>{const n=e??[];c(n),t(new Set(n))};return(0,B.tZ)(N.m,{renderLabel:!1,filterName:o("highlights:filters.labels.filter-name"),label2:l.length?void 0:"Any",iconName:"tag",currentValue:l,onRemove:l.length?()=>h([]):void 0,isInactive:0===l.length,optionList:d,showDropdownCaret:!0,onApply:h})};var F=n(43269);const W=[{value:"heatmap",labelKey:"highlights:filters.sources.heatmaps",icon:"heatmaps"},{value:"recording",labelKey:"highlights:filters.sources.recordings",icon:"recordings"}];var q;!function(e){e.AUTHORS="AUTHORS",e.DATE_RANGE="DATE_RANGE",e.LABELS="LABELS",e.SOURCES="SOURCES",e.STATUS="STATUS"}(q||(q={}));const K=[{value:"solved",labelKey:"highlights:filters.status.solved",icon:"check_alt"},{value:"unsolved",labelKey:"highlights:filters.status.unsolved",icon:"check"}],Y={authors:[],dateRange:{type:g.Au.ALL},labels:new Set,sources:[],status:"both"},Q=e=>{const t=(0,o.s0)(),n=(0,h.a)(),i=()=>{const e={...Y};if(e.authors=p(n.get(q.AUTHORS),[],(e=>{if(!function(e){return e instanceof Array&&e.every(m)}(e))throw new Error("Invalid author filter parameter");return e})),e.dateRange=p(n.get(q.DATE_RANGE),{type:g.Au.ALL},(e=>{if(!_(e))throw new Error("Invalid data range filter parameter");return x(e)?{type:g.Au.ABSOLUTE,from:new Date(e.from),to:new Date(e.to)}:e})),e.labels=p(n.get(q.LABELS),new Set([]),(e=>{if(!function(e){return e instanceof Array&&e.every((e=>"string"==typeof e))}(e))throw new Error("Invalid labels filter parameter");return new Set(e)})),e.sources=p(n.get(q.SOURCES),[],(e=>{if(!function(e){return e instanceof Array&&e.every((e=>"string"==typeof e&&["heatmap","recording"].includes(e)))}(e))throw new Error("Invalid sources parameter");return e})),null!==(t=n.get(q.STATUS))&&!["both","solved","unsolved"].includes(t))throw new Error("Invalid status parameter");var t;return e.status=n.get(q.STATUS)??"both",e},[a,s]=(0,r.useState)(i()),l=(()=>{const e=i();return(0,F.Z)(e,a)?a:(s(e),e)})();return(0,T.Z)((()=>e(l)),[e,l]),[l,{onAuthorsChange:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.length>0?n.set(q.AUTHORS,JSON.stringify(e)):n.delete(q.AUTHORS),t(`.?${new URLSearchParams(n).toString()}`)},onDateRangeChange:e=>{e.type===g.Au.ALL?n.delete(q.DATE_RANGE):n.set(q.DATE_RANGE,JSON.stringify(e)),t(`.?${new URLSearchParams(n).toString()}`)},onLabelsChange:e=>{0===e.size?n.delete(q.LABELS):n.set(q.LABELS,JSON.stringify([...e.values()])),t(`.?${new URLSearchParams(n).toString()}`)},onSourcesChange:e=>{0===e.length?n.delete(q.SOURCES):n.set(q.SOURCES,JSON.stringify(e)),t(`.?${new URLSearchParams(n).toString()}`)},onStatusChange:e=>{n.set(q.STATUS,e),t(`.?${new URLSearchParams(n).toString()}`)}}]};function J(e){let{sources:t,onApply:n}=e;const{t:i}=(0,a.$G)(),[o,s]=(0,r.useState)(t);(0,r.useEffect)((()=>{s(t)}),[s,t]);const l=W.map((e=>({value:e.value,label:i(e.labelKey),icon:e.icon}))),c=e=>{s(e??[]),n(e??[])};return(0,B.tZ)(N.m,{filterName:i("highlights:filters.sources.filter-name"),label2:o.length?void 0:"Any",iconName:"chart_multiple",currentValue:o,onRemove:o.length?()=>c([]):void 0,isInactive:0===o.length,optionList:l,showDropdownCaret:!0,onApply:c})}function ee(e){return"both"===e?[]:[e]}const te=e=>{let{onApply:t,selected:n}=e;const{t:i}=(0,a.$G)(),[o,s]=(0,r.useState)(ee(n));(0,r.useEffect)((()=>{s(ee(n))}),[s,n]);const l=K.map((e=>({value:e.value,label:i(e.labelKey)}))),c=e=>{var n;s(e??[]),t(!(n=e)||0===n.length||n.length>=2?"both":n[0])};return(0,B.tZ)(N.m,{filterName:i("highlights:filters.status.filter-name"),label2:1===o.length?i(`highlights:single.${o[0]}`):"Any",iconName:(0,F.Z)(o,["solved"])?"check_alt":"check",currentValue:o,optionList:l,showDropdownCaret:!0,onApply:c,isInactive:0===o.length,onRemove:o.length?()=>c([]):void 0})},ne=(0,i.Z)("div",{target:"e17jn4cy0"})("display:flex;gap:",s.TV.spacer.x1,";margin-bottom:",s.TV.spacer.x2,";"),ie=e=>{let{siteId:t,authors:n,dateRange:i,labels:r,sources:a,status:o,onAuthorsChange:s,onDateRangeChange:l,onLabelsChange:c,onSourcesChange:d,onStatusChange:h}=e;const{data:u}=(0,A.k)(),p={type:g.Au.ALL};return(0,B.BX)(ne,{children:[(0,B.tZ)(R.r,{currentValue:i??p,onApply:e=>l(e)}),(0,B.tZ)(U,{selectedUsers:n,onApply:s,users:u?.users??[]}),(0,B.tZ)(J,{onApply:d,sources:a}),(0,B.tZ)(X,{onApply:c,selectedLabels:r,siteId:t}),(0,B.tZ)(te,{onApply:h,selected:o})]})};var re=n(37156),ae=n(25),oe=n(41377),se=n(72963),le=n(77286),ce=n(36111),de=n(97385),he=n(22677);const ge=(0,i.Z)("div",{target:"epquj8v3"})("display:block;",(e=>{let{width:t,height:n}=e;const i=((e,t)=>e/t>240/225?{height:"100%",width:"auto"}:{height:"auto",width:"100%"})(t,n);return`height: ${i.height}; width: ${i.width};`}),";"),ue=(0,i.Z)("svg",{target:"epquj8v2"})((e=>{let{scaleToHeight:t}=e;return t?"height: 100%;\nwidth: auto;":"height: auto;\nwidth: 100%;"}),";"),pe=(0,i.Z)("div",{target:"epquj8v1"})({name:"1r2r7pn",styles:"position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center"}),me=(0,i.Z)("div",{target:"epquj8v0"})("display:flex;align-items:center;height:32px;background-color:",s.TV.color.white,";border-radius:",s.TV.radius.m,";padding:0 ",s.TV.spacer.x1,";",s.TV.text("subtitle2"),";"),fe=(0,r.forwardRef)(((e,t)=>{let{className:n,url:i,selectedArea:a,strokeWidth:o=5,clicksCount:l,clicksPercentage:c,deviceType:d}=e;const h=(0,ce.L)({count:l??0,isDesktop:d===le.FL.DESKTOP}),g=(0,r.useRef)(null),u=(0,r.useRef)(null),[p]=(0,oe.o)(u);(0,r.useImperativeHandle)(t,(()=>({get:()=>g.current})));const{encodedImage:m,size:f}=(0,he.d)(i),[v,x]=f,_=x&&x/v>p/225;if(!v&&!x)return null;const T={x:a.x1,y:a.y1,w:a.x2-a.x1,h:a.y2-a.y1};return(0,B.BX)(ge,{className:n,width:x,height:v,ref:u,children:[(0,B.BX)(ue,{scaleToHeight:!!_,ref:g,viewBox:(0,de.e)({x:0,y:0,w:x,h:v},{w:0,h:0}),height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMinYMin meet",children:[(0,B.tZ)("image",{href:m,width:x,height:v}),(0,B.tZ)("rect",{x:T.x,y:T.y,width:T.w,height:T.h,fill:"none",stroke:s.TV.color.white,strokeWidth:o,vectorEffect:"non-scaling-stroke"})]}),0!==l&&0!==c?(0,B.tZ)(pe,{children:(0,B.tZ)(me,{children:`${(0,se.Y4)(l??0)} ${h} (${(0,se.Y4)(c??0)}%)`})}):null]})}));var ve=n(36224);const xe=(0,i.Z)("div",{target:"e1osg8l51"})("display:flex;height:100%;width:100%;align-items:center;justify-content:center;background:url(",(e=>e.image),") no-repeat center center;background-size:cover;"),_e=(0,i.Z)("section",{target:"e1osg8l50"})("color:",s.TV.color.text_default_inverse,";align-content:center;display:grid;grid-template-rows:auto auto auto;grid-row-gap:",s.TV.spacer.x2,";justify-items:center;padding:",s.TV.spacer.x2,";font-size:12px;");function Te(e){if(!e)return"Play";const t=new Date(0);t.setSeconds(e/1e3);let n=t.toISOString().substr(14,5);return n=n.startsWith("00:")?n.substr(3,2):n,n=`${n.replace(":"," min ")} sec`,n}function ye(e){let{className:t,highlight:n,hasComments:i,siteId:r}=e;const{t:o}=(0,a.$G)(),{data:l}=(0,ve.O)(r,n),{encodedImage:c}=(0,he.d)(l.imageUrl??"",!0);switch(l.contentStatus){case"failed":return(0,B.BX)(_e,{className:t,hasComments:i,children:[(0,B.tZ)(s.JO,{icon:"error",size:"l"}),o("highlights:single.preview.content-generation.failed")]});case"source_deleted":return(0,B.BX)(_e,{className:t,hasComments:i,children:[(0,B.tZ)(s.JO,{icon:"error",size:"l"}),o("highlights:single.preview.content-generation.source-deleted")]});case"creating":return(0,B.BX)(_e,{className:t,hasComments:i,children:[(0,B.tZ)(s.aN,{size:"l"}),o("highlights:single.preview.content-generation.creating")]});case"done":return l.imageUrl?(0,B.tZ)(xe,{image:c,children:(0,B.tZ)(s.zx,{size:"s",icon:"play_alt",children:`${Te(l.metadata.clip?.duration)}`})}):(0,B.BX)(_e,{className:t,hasComments:i,children:[(0,B.tZ)(s.JO,{icon:"error",size:"l"}),o("highlights:single.image_not_available")]});default:return(0,B.BX)(_e,{className:t,hasComments:i,children:[(0,B.tZ)(s.JO,{icon:"error",size:"l"}),o("highlights:single.preview.content-generation.unknown")]})}}const we=(0,i.Z)("div",{target:"ektyau62"})("display:flex;height:100%;width:100%;align-items:center;justify-content:center;background-color:",s.TV.BRAND_COLORS.neutral_900,";"),be=(0,i.Z)("section",{target:"ektyau61"})("color:",s.TV.color.text_default_inverse,";height:100%;width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;"),Se=(0,i.Z)(s.aN,{target:"ektyau60"})("margin-bottom:",s.TV.spacer.x1,";");function Ze(e){let{className:t,hasComments:n,highlight:i,svgRef:r,siteId:o}=e;const{t:s}=(0,a.$G)();return i?"heatmap"===i.type?i.imageUrl?(0,B.tZ)(fe,{className:t,url:i.imageUrl,selectedArea:i.metadata.selectedArea,clicksCount:i.metadata.clicksCount??0,clicksPercentage:i.metadata.clicksPercentage??0,deviceType:i.metadata.deviceType,ref:r}):(0,B.tZ)(we,{children:(0,B.tZ)(be,{children:s("highlights:single.image_not_available")})}):"recording"===i.type?(0,B.tZ)(we,{children:(0,B.tZ)(ye,{className:t,highlight:i,hasComments:n,siteId:o})}):null:(0,B.tZ)(we,{children:(0,B.BX)(be,{children:[(0,B.tZ)(Se,{size:"l"}),s("highlights:single.loading")]})})}var ke=n(44061),Ee=n(9040);const Ce=(0,i.Z)("div",{target:"e1lxekrv2"})("position:absolute;width:100%;height:",65,"px;left:0px;top:160px;display:flex;align-items:flex-start;justify-content:center;flex-direction:column;background-color:",s.TV.BRAND_COLORS.white,";padding:",s.TV.spacer.x2,";"),Ie=(0,i.Z)(ke.U,{target:"e1lxekrv1"})("padding:0px;grid-column-gap:3px;align-items:center;margin-top:",(e=>e.hasMoreComments?"-12px":"0"),";.avatar{transform:scale(calc(24 / 32));}.comment-content{width:100%;max-height:36px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;.comment-author{display:inline;}.comment-text{display:inline;}.comment-metadata{display:none;}}"),Re=(0,i.Z)(s.rU,{target:"e1lxekrv0"})("font-size:12px;color:",s.TV.color.neutral_500,";position:absolute;bottom:9px;left:50px;");function Ae(e){let{threads:t,currentUserId:n}=e;const{t:i}=(0,a.$G)();if(!t.length||void 0===n)return(0,B.tZ)(B.HY,{});const r={...t[0],author:{...t[0].author,name:(0,Ee.Z)(t[0].author.name,{length:30})}};return(0,B.BX)(Ce,{children:[(0,B.tZ)(Ie,{hasMoreComments:t[0].replies.length>0,currentUserId:n,comment:r,renderCreator:()=>(0,B.tZ)(B.HY,{})}),t[0].replies.length>0&&(0,B.tZ)(Re,{kind:"inline",children:`${t[0].replies.length} ${i("highlights:list.more")}`})]})}var Oe=n(18278);const Ve=(0,i.Z)("div",{target:"e1kjcw6f3"})("position:absolute;width:240px;height:",22,"px;left:0px;bottom:77px;display:flex;align-items:center;justify-content:flex-start;padding:",s.TV.spacer.x2,";"),Ne=(0,i.Z)("div",{target:"e1kjcw6f2"})("background-color:",s.TV.BRAND_COLORS.white,";border-radius:100px;width:24px;height:24px;display:flex;align-items:center;justify-content:center;transition:transform 0.2s ease-out;:hover{transform:scale(1.2);z-index:1;}"),De=(0,i.Z)("div",{target:"e1kjcw6f1"})({name:"5g88l",styles:"width:14px;overflow:visible"}),Le=(0,i.Z)("div",{target:"e1kjcw6f0"})("width:18px;overflow:visible;transform:rotate(-4deg);",s.TV.transition("transform"),";&:hover{transform:rotate(0) translateY(-2px);z-index:1;}");function Pe(e){let{highlight:t}=e;const{t:n}=(0,a.$G)(),i=(0,Oe.y)("settings.custom-labels"),r=t?.labels??[],o=r.length-5,l=i&&o>0?r.slice(0,5):r;return r.length?(0,B.BX)(Ve,{children:[l.map((e=>i?(0,B.tZ)(Le,{"data-testid":"label-tile",children:(0,B.tZ)($.$i,{text:e.name,size:"m",iconName:e.iconName,keyName:e.keyName})},e.id):(0,B.tZ)(De,{children:(0,B.tZ)(s.u,{text:e.keyName?n(e.keyName):e.name,children:(0,B.tZ)(Ne,{children:(0,B.tZ)($.iE,{name:e.iconName,size:16})})})},e.id))),i&&o>0?(0,B.tZ)(Le,{"data-testid":"label-overflow",children:(0,B.tZ)($.kv,{number:o,maxDigits:5})}):null]}):(0,B.tZ)(B.HY,{})}var Be=n(49197),He=n(45366),Ue=n(78483),$e=n(54031),Me=n(16431),ze=n(88875),Ge=n(41028);const je=(0,i.Z)(s.hU,{target:"e1xengb62"})("position:absolute;top:",s.TV.spacer.x1,";right:",s.TV.spacer.x1,";z-index:1;background-color:",s.TV.color.bg_hover,";border-radius:",s.TV.radius.m,";&:focus{background-color:",s.TV.color.white,";}",(e=>{let{isVisible:t}=e;return t?"":"visibility: hidden;"})," button{color:",s.TV.ALIAS_COLORS.primary_cta,";&:focus{background-color:",s.TV.color.white,";}}"),Xe=(0,i.Z)("span",{target:"e1xengb61"})((e=>{let{color:t}=e;return t&&"inherited"!==t&&s.TV.ALIAS_TEXT_COLORS[t]?`color: ${s.TV.ALIAS_TEXT_COLORS[t]};`:""}),";"),Fe=(0,i.Z)(s.JO,{target:"e1xengb60"})("margin-right:",s.TV.spacer.x1,";"),We=e=>{let{highlight:t,setDropdownHighlightId:n,setIsShortLinkWidgetShown:i,currentUserId:o,startRemoval:c,isHovered:d,siteId:h}=e;const{t:g}=(0,a.$G)(),{setHighlightSolved:u}=(0,He.m)(h),[p,m]=(0,r.useState)(!1),f=function(e,t){const n=(0,l.$n)();return()=>{if(e&&"recording"===e.type){if(null===e.metadata.videoUrl)return;(0,ze.O)(e.metadata.videoUrl,`clip_${e.id}.mp4`),n&&(0,Ue.dT)(n,{highlightId:e.id,eventType:$e.v.HIGHLIGHT_DOWNLOADED},{uiPosition:"highlight_card"}),(0,Me.event)("recording_highlight_downloaded")}}}(t),v=t?.author?.id===String(o);return(0,B.BX)(B.HY,{children:["heatmap"===t.type&&p&&(0,B.tZ)(Ge.G,{siteId:h,highlightId:t.id,imageUrl:t.imageUrl??"",selectedArea:t.metadata.selectedArea,afterDownload:()=>m(!1),trackingUiPosition:"highlight_card"}),(0,B.BX)(s.h_,{trigger:(0,B.tZ)(je,{description:g("highlights:single.actions"),isVisible:d,icon:"menu_kebab",kind:"ghost",size:"m",tooltipText:g("collections:actions.description")}),appendTo:"parent",children:[(0,B.BX)(s.h_.BaseItem,{"aria-label":g("common:actions.share"),onClick:()=>{n(t.id),i(!0)},children:[(0,B.tZ)(Fe,{icon:"share",color:"text_default",size:"m"}),(0,B.tZ)(Xe,{color:"text_default",children:g("common:actions.share")})]}),(0,B.BX)(s.h_.BaseItem,{onClick:()=>{"heatmap"===t.type?m(!0):f()},children:[(0,B.tZ)(Fe,{icon:"download",color:"text_default",size:"m"}),(0,B.tZ)(Xe,{color:"text_default",children:g("highlights:single.download")})]}),(0,B.BX)(s.h_.BaseItem,{onClick:()=>u(t.id,!t.solved,"highlight_card"),children:[(0,B.tZ)(Fe,{icon:t.solved?"check_alt":"check",color:t.solved?"text_success":"text_default",size:"m"}),(0,B.tZ)(Xe,{color:"text_default",children:t.solved?g("highlights:single.unmark_solved"):g("highlights:single.mark_solved")})]}),v?(0,B.BX)(s.h_.BaseItem,{"aria-label":g("highlights:single.remove.description"),onClick:()=>{n(t.id),c()},hasDivider:!0,children:[(0,B.tZ)(Fe,{icon:"trash",color:"text_warning",size:"m"}),(0,B.tZ)(Xe,{color:"text_warning",children:g("highlights:single.remove.label")})]}):(0,B.tZ)(B.HY,{})]})]})},qe=(0,i.Z)(s.Zb,{target:"e19k7m933"})("height:",225,"px;overflow:hidden;cursor:pointer;border-radius:",s.TV.radius.l,";transition:box-shadow 0.2s ease-out;cursor:pointer;",s.TV.elevation(1),";&:hover{",s.TV.elevation(3),";}&:focus{box-shadow:0px 0px 0px 2px #5b72cb;}"),Ke=(0,i.Z)("div",{target:"e19k7m932"})("border-radius:",s.TV.radius.m,";background-color:",s.TV.ALIAS_TEXT_COLORS.text_success,";height:16px;color:",s.TV.color.white,";position:absolute;top:12px;left:16px;padding:0px ",s.TV.spacer.x0,";z-index:1;display:flex;align-items:center;",s.TV.text("subtitle3")," text-transform:uppercase;"),Ye=(0,i.Z)("div",{target:"e19k7m931"})({name:"w1atjl",styles:"width:100%;height:100%"}),Qe=(0,i.Z)("div",{target:"e19k7m930"})("position:absolute;width:100%;height:100%;top:0px;transition:transform 0.2s ease-out;transform:translateY(\n    ",(e=>{let{hasComments:t}=e;return t?0:65}),"px\n  );"),Je=e=>{let{highlight:t,setSelectedHighlightId:n,setDropdownHighlightId:i,setIsShortLinkWidgetShown:o,siteId:s,currentUserId:l,startRemoval:c}=e;const{t:d}=(0,a.$G)(),h=(0,r.useRef)(null),[g,u]=(0,r.useState)(!1),[,p]=(0,r.useState)(re.Q.INITIAL),[m,f]=(0,r.useState)([]),v=t?.autoCreated??!1,x=(0,r.useCallback)((async()=>{try{if(p(re.Q.LOADING),null===s)return;const e=await(0,ae.getAll)({siteId:s,widgetId:Number(t?.id),widgetType:"highlight",scopeId:t.commentId&&Number(t.commentId)?Number(t.commentId):null,token:null});if(v&&0===e.length){const e=(0,Be.m)(d,t.createdDate);f([{...e,metadata:{},widgetId:0,replies:[]}])}else f(e)}catch(e){p(re.Q.ERROR)}finally{p(re.Q.SUCCESS)}}),[d,s,v,t?.id,t.commentId,t.createdDate]);return(0,r.useEffect)((()=>{x()}),[x]),(0,B.tZ)("div",{onMouseEnter:()=>{u(!0)},onMouseLeave:()=>{u(!1)},children:(0,B.BX)(qe,{"pointer-events":"all",children:[t.solved&&(0,B.tZ)(Ke,{children:d("highlights:single.resolved")}),(0,B.tZ)(We,{highlight:t,setDropdownHighlightId:i,setIsShortLinkWidgetShown:o,currentUserId:l,startRemoval:c,isHovered:g,siteId:s}),(0,B.BX)(Ye,{onClick:()=>n(t.id),children:[(0,B.tZ)(Ze,{highlight:t,svgRef:h,hasComments:m.length>0,siteId:s}),(0,B.BX)(Qe,{hasComments:m.length>0,children:[(0,B.tZ)(Pe,{highlight:t}),(0,B.tZ)(Ae,{currentUserId:l,threads:m})]})]})]})})};var et=n(55627),tt=n(61141),nt=(n(77508),n(75671));s.TV.spacer.x1;const it="calc(100vh - 120px)",rt=(0,i.Z)("div",{target:"e1m7hupa4"})({name:"1bpe5hi",styles:"transform:scale(0)"}),at=(0,i.Z)(s.u_,{target:"e1m7hupa3"})("height:",it,";max-height:",660,"px;overflow:hidden;max-width:",1100,"px;width:",80,"vw;"),ot=(0,i.Z)("div",{target:"e1m7hupa2"})("height:",it,";max-height:",660,"px;width:calc(",80,"vw + (2 * ",56,"px));max-width:",1212,"px;min-width:",432,"px;transform:translateX(-",56,"px);position:fixed;display:flex;justify-content:space-between;align-items:center;pointer-events:none;"),st=(0,i.Z)(s.hU,{target:"e1m7hupa1"})({name:"ejz5a6",styles:"filter:invert(1);pointer-events:auto"}),lt=(0,i.Z)("div",{target:"e1m7hupa0"})("width:100vw;position:fixed;top:",724,"px;left:0px;@media (max-height: 780px){bottom:0px;top:auto;}padding:",s.TV.spacer.x3,";display:flex;justify-content:center;align-items:center;color:",s.TV.color.white,";",s.TV.text("subtitle2"),";"),ct=e=>{const t=`${window.location.protocol}//${window.location.host}${window.location.pathname}?${e.toString()}`;window.history.replaceState({path:t},"",t)},dt=e=>{let{selectedHighlightId:t,currentUser:n,currentHighlightIndex:i,highlightsCount:o,organizationId:s,siteId:l,onClose:c,showPrevious:d,showNext:h}=e;const[g,u]=(0,r.useState)(!1),{t:p}=(0,a.$G)(),m=()=>{u(!1),c();const e=new URLSearchParams(window.location.search);e.delete("highlight"),ct(e)};return(0,r.useEffect)((()=>{t&&(e=>{u(!0);const t=new URLSearchParams(window.location.search);t.set("highlight",e),ct(t)})(t)}),[t]),(0,B.tZ)(rt,{children:(0,B.BX)(at,{appElementSelector:"body",isOpen:g,onClose:m,hideCloseButton:!0,contentLabel:p("highlights:heatmaps.modalContentLabel"),children:[(0,B.BX)(ot,{children:[i?(0,B.tZ)(st,{onClick:d,icon:"arrow_left",tooltipText:p("highlights:modal.previous"),kind:"ghost",size:"m","data-testid":"previous-highlight-button"}):(0,B.tZ)("div",{}),null!==i&&null!==o&&i<o-1&&(0,B.tZ)(st,{onClick:h,icon:"arrow_right",tooltipText:p("highlights:modal.next"),kind:"ghost",size:"m","data-testid":"next-highlight-button"})]}),t&&(0,B.tZ)(et.O,{currentUser:n,organizationId:s,onClose:m,highlightId:t,siteId:l}),(0,B.BX)(lt,{children:[(i??0)+1," / ",o]})]})})};var ht=n(11215),gt=n(12522);const ut=n.p+"6af20f9e256ef99f3171.png",pt=(0,i.Z)("div",{target:"emla0hd4"})("display:flex;justify-content:center;margin-top:",s.TV.spacer.x8,";"),mt=(0,i.Z)("div",{target:"emla0hd3"})("display:flex;flex-direction:column;align-items:center;width:340px;margin-top:",s.TV.spacer.x8,";"),ft=(0,i.Z)("h5",{target:"emla0hd2"})(s.TV.text("header5")," margin:",s.TV.spacer.x3," 0 0;"),vt=(0,i.Z)("p",{target:"emla0hd1"})(s.TV.text("body1")," margin:",s.TV.spacer.x1," 0 ",s.TV.spacer.x3,";text-align:center;"),xt=(0,i.Z)(s.zx,{target:"emla0hd0"})("margin-bottom:",s.TV.spacer.x2,";"),_t=e=>{let{siteId:t}=e;const{t:n}=(0,a.$G)();return(0,B.tZ)(pt,{children:(0,B.BX)(mt,{children:[(0,B.tZ)("img",{src:ut,alt:n("highlights:emptyState.img-alt")}),(0,B.tZ)(ft,{children:n("highlights:emptyState.title")}),(0,B.tZ)(vt,{children:n("highlights:emptyState.copy")}),(0,B.tZ)(xt,{as:"a",href:(0,tt.Bv)(ht.tH.path,{siteId:t}),icon:"recordings_old",children:n("highlights:emptyState.button-label-recordings")}),(0,B.tZ)(s.zx,{as:"a",href:(0,tt.Bv)(gt.LIST_CONTINUOUS_CAPTURE.path,{siteId:t}),kind:"secondary",icon:"heatmaps",children:n("highlights:emptyState.button-label-heatmaps")})]})})};var Tt=n(52402),yt=n(10868),wt=n(54095),bt=n(16304),St=n(88543),Zt=n(66624),kt=n(86781);function Et(e){let{collectionId:t,collectionName:n,onClose:i,siteId:o}=e;const{t:s}=(0,a.$G)(),{mutateAsync:l,status:c}=function(e,t){return(0,Zt.useMutation)((n=>{let{name:i}=n;return S.PQ(e,t,i)}),{onSuccess(){kt.E.invalidateQueries(S.r5)}})}(o,t),{success:d,error:h}=(0,bt.d)(),[g,u]=(0,r.useState)(null),p=(0,r.useCallback)((()=>{u(null)}),[u]),m=(0,r.useCallback)((async e=>{p();try{await l({name:e}),d(s("collections:rename.success")),i()}catch(e){if(e instanceof S.CR)return void u(s("collections:rename.error.existing"));h(s("collections:rename.error.unknown"))}}),[h,i,l,p,d,s]);return(0,B.tZ)(St.y,{error:g??void 0,editedCollection:{name:n},isLoading:"loading"===c,isOpen:!0,loadingText:s("collections:rename.progress"),onCancel:i,onConfirm:m,resetError:p})}const Ct=(0,i.Z)("span",{target:"e1h2s08i2"})((e=>{let{color:t}=e;return t&&"inherited"!==t&&s.TV.ALIAS_TEXT_COLORS[t]?`color: ${s.TV.ALIAS_TEXT_COLORS[t]};`:""}),";"),It=(0,i.Z)(s.JO,{target:"e1h2s08i1"})("width:16px;height:16px;margin-right:",s.TV.spacer.x1,";"),Rt=(0,i.Z)(s.hU,{target:"e1h2s08i0"})("margin-left:",s.TV.spacer.x1,";");function At(e){let{className:t,collection:n,compact:i=!1,siteId:o,onDropdownToggle:l,isVisible:c}=e;const{t:d}=(0,a.$G)(),[h,g]=(0,r.useState)(!1),[u,p]=(0,r.useState)(!1),m=(0,r.useCallback)((()=>p(!0)),[p]),f=(0,r.useCallback)((()=>g(!0)),[g]),v=(0,r.useCallback)((()=>{g(!1)}),[g]),x=o&&h?(0,B.tZ)(wt.K,{collectionId:n.id,collectionName:n.name,isOpen:!0,onClose:v,siteId:o}):o&&u?(0,B.tZ)(Et,{collectionId:n.id,collectionName:n.name,onClose:()=>p(!1),siteId:o}):null;return i?(0,B.BX)(B.HY,{children:[c?(0,B.BX)(s.h_,{className:t,trigger:(0,B.tZ)(s.hU,{icon:"menu_kebab",kind:"ghost",size:"m",tooltipText:d("collections:actions.description")}),appendTo:"parent",onShown:()=>l?.(!0),onHidden:()=>l?.(!1),children:[(0,B.BX)(s.h_.BaseItem,{onClick:m,children:[(0,B.tZ)(It,{icon:"pencil"}),(0,B.tZ)(Ct,{children:d("collections:actions.edit")})]}),(0,B.BX)(s.h_.BaseItem,{onClick:f,hasDivider:!0,children:[(0,B.tZ)(It,{icon:"trash",color:"text_warning"}),(0,B.tZ)(Ct,{color:"text_warning",children:d("collections:actions.remove")})]})]}):null,x]}):(0,B.BX)(B.HY,{children:[(0,B.BX)(s.Kq,{className:t,customSpacing:"0",children:[(0,B.tZ)(Rt,{icon:"pencil",kind:"secondary",onClick:m,size:"m",tooltipText:d("collections:actions.edit")}),(0,B.tZ)(Rt,{icon:"trash",kind:"secondary",onClick:f,size:"m",tooltipText:d("collections:actions.remove")})]}),x]})}var Ot=n(19516),Vt=n(54185),Nt=n(94959);const Dt=(0,i.Z)("div",{target:"e1lwsgjk9"})(""),Lt=(0,i.Z)("div",{target:"e1lwsgjk8"})({name:"1eoy87d",styles:"display:flex;justify-content:space-between"}),Pt=(0,i.Z)("div",{target:"e1lwsgjk7"})("color:",s.TV.color.text_light,";border-right:1px solid ",s.TV.color.ui_border_light,";height:24px;padding-right:",s.TV.spacer.x2,";margin-right:",s.TV.spacer.x2,";display:flex;align-items:center;flex-shrink:1;min-width:0px;"),Bt=(0,i.Z)("div",{target:"e1lwsgjk6"})({name:"hw82q5",styles:"flex-shrink:1;overflow:hidden;max-width:55%;text-overflow:ellipsis;overflow:hidden"}),Ht=(0,i.Z)(s.xv,{target:"e1lwsgjk5"})("display:block;padding-bottom:",s.TV.spacer.x0pt5,";"),Ut=(0,i.Z)("div",{target:"e1lwsgjk4"})({name:"qnjuwm",styles:"display:flex;justify-content:flex-end;align-items:center;min-width:0px"}),$t=(0,i.Z)(s.qE,{target:"e1lwsgjk3"})("margin-right:",s.TV.spacer.x0pt5,";flex-shrink:0;"),Mt=(0,i.Z)("span",{target:"e1lwsgjk2"})("margin-right:",s.TV.spacer.x0pt5,";white-space:nowrap;flex-shrink:1;overflow:hidden;text-overflow:ellipsis;"),zt=(0,i.Z)(s.zx,{target:"e1lwsgjk1"})("margin-left:",s.TV.spacer.x1,";"),Gt=(0,i.Z)("span",{target:"e1lwsgjk0"})("margin-left:",s.TV.spacer.x0pt5,";"),jt=e=>{let{collection:t,newCollectionButton:n}=e;const i=(0,l.$n)(),{data:o}=(s=t.userId??null,(0,Zt.useQuery)(["currentUser",s],(()=>(0,c.PR)(s)),{enabled:null!==s,staleTime:3e5,refetchOnWindowFocus:!1}));var s;const{t:d}=(0,a.$G)(),[h,g]=(0,r.useState)(!1),u=(0,r.useRef)(null),[p]=(0,oe.o)(u),m=(0,r.useRef)(null),f=(0,r.useCallback)((()=>{null!==m.current&&(0,Ot.e)(m.current),i&&(0,S.no)(i,t.id)}),[t,i]);return(0,B.tZ)(Dt,{ref:u,children:(0,B.BX)(Lt,{children:[(0,B.tZ)(Bt,{children:(0,B.tZ)(Ht,{as:p<970?"h5":"h3",textType:p<970?"header5":"header3",children:t.keyName?d(t.keyName):t.name??d("highlights:list.title")})}),(0,B.BX)(Ut,{children:[t.created&&(0,B.BX)(Pt,{children:[(0,B.tZ)($t,{userName:t.userName??"",src:o?.avatar??void 0,size:"s"}),(0,B.tZ)(Mt,{children:t.userName}),"",(0,B.tZ)(Gt,{children:(v=t.created,v?new Date(1e3*v).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):"")})]}),t.id!==Vt._&&(0,B.tZ)(At,{collection:t,siteId:i,compact:!0,isVisible:!0}),n,(0,B.tZ)(yt.f,{appendTo:"parent",onShown:()=>{g(!0)},onHidden:()=>{g(!1)},trigger:(0,B.tZ)(zt,{kind:"primary",size:"s",children:d("common:actions.share")}),children:h?(0,B.tZ)(Tt.m,{onCopy:f,ref:m}):(0,B.tZ)(Nt.e,{})})]})]})});var v};var Xt=n(3118),Ft=n(72657),Wt=n(89364),qt=n(32275),Kt=n(26169),Yt=n(39283);function Qt(e){if(!e)return"";const{type:t}=e;return"relative"===t?`last_${e.amount}_${e.unit}`:"absolute"===t?[e.from.toISOString(),e.to.toISOString()].join(","):"all"}const Jt=(0,i.Z)("section",{target:"em4w9c811"})("padding:",s.TV.spacer.x3,";background-color:",s.TV.BRAND_COLORS.white,";"),en=(0,i.Z)(E.J,{target:"em4w9c810"})({name:"sdfaz",styles:"position:absolute;z-index:9999999"}),tn=(0,i.Z)("div",{target:"em4w9c89"})("display:grid;grid-template-columns:repeat(auto-fill, minmax(250px, 1fr));grid-gap:",s.TV.spacer.x3,";"),nn=(0,i.Z)(s.u_,{target:"em4w9c88"})({name:"1bqc0kd",styles:"width:fit-content;height:fit-content;padding:32px;min-height:auto;.ReactModal__Content{width:fit-content;height:fit-content;padding:32px;min-height:auto;}"}),rn=(0,i.Z)("a",{target:"em4w9c87"})(s.TV.text("body2")," color:",s.TV.color.text_light,";display:inline-flex;text-decoration:underline;margin-bottom:",s.TV.spacer.x4,";"),an=(0,i.Z)(s.JO,{target:"em4w9c86"})("margin-left:",s.TV.spacer.x0pt5,";"),on=(0,i.Z)(s.xv,{target:"em4w9c85"})("display:block;padding-bottom:",s.TV.spacer.x0pt5,";"),sn=(0,i.Z)(s.xv,{target:"em4w9c84"})("margin-bottom:",s.TV.spacer.x2,";"),ln=(0,i.Z)("span",{target:"em4w9c83"})("color:",s.TV.color.text_light,";"),cn=(0,i.Z)(s.aN,{target:"em4w9c82"})({name:"wswn88",styles:"min-height:80vh"}),dn=(0,i.Z)("div",{target:"em4w9c81"})("display:flex;justify-content:center;margin-top:",s.TV.spacer.x3,";"),hn=(0,i.Z)(s.zx,{target:"em4w9c80"})("margin-left:",s.TV.spacer.x1,";"),gn=e=>{let{collection:t,collectionsStatus:n}=e;const i=(0,o.TH)(),g=(0,o.s0)(),{t:u}=(0,a.$G)(),m=(0,l.$n)(),[f,v]=(0,r.useState)(!1),{data:x}=(0,l.PD)(),{data:_}=(0,c.xJ)(),[E,R]=(0,r.useState)(null),{currentPage:A,itemsPerPage:O,setCurrentPage:V,setItemsPerPage:N}=(e=>{const t=(0,o.s0)(),n=(0,h.a)(),i=(()=>{const e=b;return e.page=p(n.get(y),1,(e=>{if("number"!=typeof e)throw new Error("Invalid author filter parameter");return e||1})),e.itemsPerPage=p(n.get(w),30,(e=>{if("number"!=typeof e)throw new Error("Invalid author filter parameter");return e})),e})(),[a,s]=(0,r.useState)(i.page),[l,c]=(0,r.useState)(i.itemsPerPage);return(0,T.Z)((()=>{s(1)}),[e]),(0,r.useEffect)((()=>{n.set(y,JSON.stringify(a)),n.set(w,JSON.stringify(l)),t(`.?${new URLSearchParams(n).toString()}`,{replace:!0})}),[a,l,t,n]),{currentPage:a,itemsPerPage:l,setCurrentPage:s,setItemsPerPage:c}})(t.id),D=(0,r.useCallback)((()=>V(1)),[V]),{data:L,status:H,filters:U}=function(e,t,n){const i=(0,l.$n)(),[r,a]=Q(n),{data:o,status:s}=(0,Xt.W)(i,e,{...t,...r});return{data:o,filters:{state:r,actions:a},status:s}}(t.id,{currentPage:A,itemsPerPage:O},D),M=L?.items.findIndex((e=>e.id===E)),{showNext:z,showPrevious:G,handleKeyDown:j}=((e,t,n)=>{const i=e=>{n&&null!==e&&e>0&&t(n.items[e-1].id)},r=e=>{n&&null!==e&&e<n.items.length-1&&t(n.items[e+1].id)};return{showPrevious:i,showNext:r,handleKeyDown:n=>{if(!(n.target instanceof HTMLTextAreaElement)||""===n.target.value)switch(n.key){case"ArrowLeft":i(e);break;case"ArrowRight":r(e);break;case"Esc":t(null)}}}})(M??null,R,L),[X,F]=(0,r.useState)(null),[W,q]=(0,r.useState)(!1),[K,Y]=(0,r.useState)(!1);if((0,r.useEffect)((()=>{m&&(0,S._P)(m,t.id)}),[m,t]),(0,r.useEffect)((()=>{window.scrollTo(0,0)}),[i]),(e=>{const[t,n]=(0,r.useState)(!1);(0,r.useEffect)((()=>{(0,C.B1)(I.o.HIGHLIGHTS_LIST_INITIALIZED)}),[]),(0,r.useEffect)((()=>{e&&!t&&((0,C.fj)({name:I.o.HIGHLIGHTS_LIST_RENDER_TIME,startMark:I.o.HIGHLIGHTS_LIST_INITIALIZED}),n(!0))}),[e,t])})(void 0!==L&&void 0!==x&&null!==m),function(e){let{organizationId:t,accountId:n,siteId:i,collectionName:a}=e;const[o]=Q(Yt.Z),{data:s}=(0,$.cW)(i,"all");(0,r.useEffect)((()=>{if(!(t&&n&&i&&a&&o&&s))return;const e=(0,P.Z)(s,(e=>e.id)),r={authors:o.authors?.map((e=>e.id)),sources:o.sources,labels:o.labels?[...o.labels].map((t=>(0,qt.Z)(e[t]?.name))):[],date:Qt(o.dateRange)};r.status=o.status;const l={account_id:n,organization_id:t,site_id:i,tool:"Highlights",filters_included:(c=r,Object.entries(c).map((e=>{let[t,n]=e;return(0,Wt.Z)(n)?`${t}:${n.join(",")}`:`${t}:${n}`}))),state_event_was_triggered_on:`highlights-${a?(0,qt.Z)(a):"all"}`,url_event_was_triggered_on:window.location.href};var c;(0,Kt.track)("Local Filters Applied",l)}),[t,n,i,a,o,s])}({siteId:x?.id.toString()??"",organizationId:x?.organizationId.toString()??"",accountId:x?.account.id.toString()??"",collectionName:t.name}),function(e){const t=(0,nt.m)(e);(0,r.useEffect)((()=>{if(void 0===t.value||0===t.value)return()=>{};const e=setTimeout((()=>{kt.E.invalidateQueries(Ue.gU)}),5e3);return()=>clearTimeout(e)}),[t.value])}(x?.id?.toString()??null),"error"===H)return(0,B.tZ)("div",{children:u("highlights:list.serverError")});if(void 0===L||void 0===x||null===m)return(0,B.BX)(Jt,{children:[(0,B.tZ)(on,{as:"h3",textType:"header3",children:t.keyName?u(t.keyName):t.name??u("highlights:list.title")}),(0,B.tZ)(cn,{size:"xl"})]});const J=new URLSearchParams(window.location.search).get("highlight");J&&!E&&R(J);const ee=0===t.highlightsCount&&"success"===n&&"success"===H,te=String(x.organization.id);return(0,B.BX)(Jt,{onKeyDown:j,children:[null!==m&&(0,B.tZ)(Z.b,{isOpen:f,onClose:()=>v(!1),onSuccess:e=>{m&&g((0,k.Q)(m,e))},siteId:m}),(0,B.tZ)(jt,{collection:t,newCollectionButton:(0,B.tZ)(hn,{kind:"secondary",size:"s",icon:"plus",onClick:()=>{v(!0)},children:u("collections:actions.new")})}),(0,B.BX)(rn,{rel:"noreferrer",href:"https://surveys.hotjar.com/39ade915-baad-4ad3-97c2-713562f9968e",target:"_blank",children:[u("highlights:list.feedback"),(0,B.tZ)(an,{icon:"open_new_window"})]}),ee&&(0,B.tZ)(d.tl,{}),!ee&&(0,B.tZ)(ie,{...U.state,...U.actions,siteId:m}),(0,B.tZ)(sn,{as:"p",textType:"subtitle1",children:(0,B.tZ)(a.cC,{i18nKey:"highlights:list.highlightsCount",count:L.totalCount,values:{allHighlights:t.highlightsCount,count:L.totalCount},children:(0,B.tZ)(ln,{})})}),ee&&(0,B.tZ)(_t,{siteId:m}),(0,B.tZ)(tn,{"data-testid":"highlights-list-container",children:ee?null:L.items?.map((e=>(0,B.tZ)(Je,{currentUserId:_?.id,highlight:e,setSelectedHighlightId:e=>R(e),setDropdownHighlightId:F,setIsShortLinkWidgetShown:q,siteId:m,startRemoval:()=>Y(!0)},e.id)))}),ee?null:(0,B.tZ)(dn,{children:(0,B.tZ)(s.tl,{totalCount:L.totalCount,currentPage:A,withSpacer:!0,pageSize:O,onPageChange:V,onPageSizeChange:N})}),(0,B.tZ)(dt,{selectedHighlightId:E,currentUser:_,organizationId:te,siteId:m,onClose:()=>R(null),currentHighlightIndex:M??null,highlightsCount:L.items.length,showPrevious:()=>G(M??null),showNext:()=>z(M??null)}),W&&X&&(0,B.tZ)(nn,{isOpen:W&&!!X,onClose:()=>{q(!1),F(null)},hideCloseButton:!0,contentLabel:u("common:actions.share"),children:(0,B.tZ)(en,{uiPosition:"highlight_card",highlightId:X})}),X&&(0,B.tZ)(Ft.p,{siteId:m,highlightId:X,onModalClose:()=>{F(null),Y(!1)},isOpen:K,uiPosition:"highlight_card"})]})}},3118:(e,t,n)=>{n.d(t,{W:()=>a});var i=n(66624),r=n(78483);function a(e,t,n){return(0,i.useQuery)([r.gU,e,t,{...n,labels:Array.from(n.labels??[])}],(()=>r.nU(e,t,n)),{enabled:null!==e,staleTime:3e5,refetchOnWindowFocus:"always",keepPreviousData:!0})}},3655:(e,t,n)=>{n.d(t,{v:()=>a});var i=n(95851),r=n(68212);const a=(0,i.Z)(r.xv,{target:"emlqhtw0"})("margin:0;padding-bottom:",r.TV.spacer.x1,";padding-top:",r.TV.spacer.x3,";&:first-of-type{padding-top:0;}")},24685:(e,t,n)=>{function i(e){const t=Math.round(e/1e3),n=Math.floor(t/60);return`${n}:${String(t-60*n).padStart(2,"0")}`}function r(e){const[t,n]=e.split(":").map(Number);return 60*t*1e3+1e3*n}function a(e){let{newHighlightTime:{start:t,end:n,marker:i}}=e;return t>=i?"START_EXCEEDS_MARKER":n<=i?"END_EXCEEDS_MARKER":n-t<5e3?"TOO_SHORT":n-t>6e5?"TOO_LONG":null}n.d(t,{C:()=>r,FF:()=>a,mr:()=>i})},72657:(e,t,n)=>{n.d(t,{p:()=>d});var i=n(68212),r=n(64934),a=n(16346),o=n(66624),s=n(78483),l=n(86781),c=n(91995);function d(e){let{siteId:t,highlightId:n,onModalClose:d,className:h,isOpen:g=!1,uiPosition:u}=e;const{t:p}=(0,a.$G)(),{mutateAsync:m}=function(e,t){return(0,o.useMutation)((n=>{let{highlightId:i}=n;return s.A2(e,i,t)}),{onSuccess:()=>{l.E.invalidateQueries(s.gU),l.E.invalidateQueries(s.o5),l.E.invalidateQueries(s.UR)}})}(t,u),f=(0,r.useCallback)((()=>{d(!0)}),[d]),v=(0,r.useCallback)((async()=>{await m({highlightId:n}),d(!1)}),[m,d,n]);return(0,c.tZ)(c.HY,{children:(0,c.BX)(i.u_,{contentLabel:p("highlights:single.remove.confirmation-modal-label"),hideCloseButton:!1,isOpen:g,onClose:f,className:h,children:[(0,c.tZ)(i.u_.Header,{title:p("highlights:single.remove.header")}),(0,c.tZ)(i.u_.Body,{children:p("highlights:single.remove.body")}),(0,c.BX)(i.u_.Footer,{children:[(0,c.tZ)(i.zx,{kind:"ghost",onClick:f,children:p("highlights:single.remove.abort")}),(0,c.tZ)(i.zx,{kind:"danger",onClick:v,type:"submit","data-testid":"confirm",children:p("highlights:single.remove.confirm")})]})]})})}},84194:(e,t,n)=>{n.d(t,{g:()=>c});var i=n(95851),r=n(33474),a=n(68212),o=n(91995);const s=r.F4`
  from {
    background-position: -1000px 0;
  }

  to {
    background-position: 1000px 0;
  }
`,l=(0,i.Z)("div",{target:"eaotojt0"})("background-color:",(e=>e.shimmerColor),";background-image:linear-gradient(\n    to right,\n    ",(e=>e.shimmerColor)," 0%,\n    ",(e=>e.shimmerDarkColor)," 20%,\n    ",(e=>e.shimmerColor)," 50%,\n    ",(e=>e.shimmerColor)," 100%\n  );background-repeat:no-repeat;background-size:1000px 100%;animation:",s," 1s linear infinite forwards;border-radius:",a.TV.radius.m,";");function c(e){let{className:t,shimmerColor:n=a.TV.color.neutral_300,shimmerDarkColor:i=a.TV.color.neutral_400}=e;return(0,o.tZ)(l,{className:t,shimmerColor:n,shimmerDarkColor:i})}},55627:(e,t,n)=>{n.d(t,{O:()=>Ke,R:()=>Qe});var i=n(95851),r=n(64934),a=n(68212),o=n(78483),s=n(54031),l=n(15040),c=n(16346),d=n(31126),h=n(16431),g=n(43933),u=n(84194),p=n(91995);const m=(0,i.Z)(u.g,{target:"e16suh003"})("width:110px;height:20px;margin-top:",a.TV.spacer.x1,";margin-bottom:",a.TV.spacer.x0pt5,";"),f=(0,i.Z)(u.g,{target:"e16suh002"})({name:"1dwdqwu",styles:"width:260px;height:56px"}),v=(0,i.Z)("section",{target:"e16suh001"})("padding:",a.TV.spacer.x2,";"),x=(0,i.Z)(a.xv,{target:"e16suh000"})("margin-bottom:",a.TV.spacer.x0,";margin-top:",a.TV.spacer.x1,";");function _(e){return new Set(e.map((e=>e.id)))}function T(e){let{isLoading:t=!1,highlightId:n,highlightCollections:i,highlightType:a,siteId:o}=e;const{t:s}=(0,c.$G)(),[l,u]=(0,r.useState)(_(i)),{add:T,remove:y}=(0,g.U)(o,n);return(0,r.useEffect)((()=>{u(_(i))}),[i]),t?(0,p.BX)(v,{children:[(0,p.tZ)(m,{}),(0,p.tZ)(f,{})]}):(0,p.BX)(v,{children:[(0,p.tZ)(x,{as:"p",textType:"subtitle2",children:s("highlights:single.collections")}),(0,p.tZ)(d.H,{onAdd:T,onEventSend:()=>{"heatmap"===a&&(0,h.event)("heatmap_highlight_added_to_collection"),"recording"===a&&(0,h.event)("recording_highlight_added_to_collection")},onRemove:y,selectedCollectionIds:l,onSelectedIdsChange:u,siteId:o})]})}var y=n(70380),w=n(61123),b=n(71935),S=n(39283),Z=n(28282),k=n(78027),E=n(44061),C=n(25263),I=n(55130),R=n(49197);const A=(0,k.Z)((()=>(0,I.n)({zIndex:C.XK+1}))),O=(0,i.Z)(E.U,{target:"ec5v2kf0"})("background:white;margin-bottom:",a.TV.spacer.x1,";",a.TV.elevation(1),";"),V=e=>{let{highlightCreatedAt:t}=e;const{t:n}=(0,c.$G)(),i=(0,R.m)(n,t);return(0,p.tZ)("div",{onFocus:A,onMouseOver:A,children:(0,p.tZ)(O,{currentUserId:0,onClose:void 0,onShowMoreMenu:void 0,comment:i,renderCreator:()=>null})})},N=(0,i.Z)(u.g,{target:"e1ej2t865"})("width:110px;height:20px;margin-top:",a.TV.spacer.x1,";margin-bottom:",a.TV.spacer.x0pt5,";"),D=(0,i.Z)(u.g,{target:"e1ej2t864"})({name:"6uapqe",styles:"width:260px;height:36px"}),L=(0,i.Z)(u.g,{target:"e1ej2t863"})("width:67px;height:32px;margin:",a.TV.spacer.x1," 0 0 auto;"),P=(0,i.Z)("section",{target:"e1ej2t862"})("align-content:start;background-color:inherit;display:grid;flex-grow:1;padding:0 ",a.TV.spacer.x2,";"),B=(0,i.Z)(a.xv,{target:"e1ej2t861"})("margin-bottom:",a.TV.spacer.x0,";margin-top:",a.TV.spacer.x1,";"),H=(0,i.Z)("section",{target:"e1ej2t860"})({name:"knx8jn",styles:"max-width:260px"});function U(e){let{isLoading:t=!1,className:n,commentId:i,currentUser:r,highlight:a,organizationId:o,siteId:s}=e;const{t:l}=(0,c.$G)(),{areThreadsFetched:d,threads:h,threadProps:g,removalConfirmationProps:u,renderNewThread:m}=(0,b.M)({siteId:s,organizationId:Number(o),widgetId:Number(a.id),widgetType:"highlight",scopeId:i?Number(i):null,currentUser:r,apiToken:null,onThreadAdded:S.Z,onThreadRemoved:S.Z,onReplyAdded:S.Z,newThreadMetadata:{},compactNewThread:!0,autoFocusTextField:!1,setActiveItem:()=>null,invalidateQuery:Z.w});return t||!d?(0,p.BX)(P,{className:n,children:[(0,p.tZ)(N,{}),(0,p.tZ)(D,{}),(0,p.tZ)(L,{})]}):(0,p.BX)(P,{className:n,"data-testid":"highlight-comments",children:[(0,p.tZ)(B,{as:"p",textType:"subtitle2",children:l("highlights:single.comments")}),a.autoCreated&&0===h.length&&(0,p.tZ)(V,{highlightCreatedAt:a.createdDate}),(0,p.tZ)(H,{children:0===h.length?m():(0,p.tZ)(w.j,{...g,thread:h[0]})}),(0,p.tZ)(y.K,{...u})]})}var $=n(62339),M=n(28154);const z=(0,i.Z)(u.g,{target:"ehus9xw7"})("width:110px;height:20px;margin-bottom:",a.TV.spacer.x1,";"),G=(0,i.Z)(u.g,{target:"ehus9xw6"})({name:"g5hl31",styles:"width:95px;height:16px"}),j=(0,i.Z)("section",{target:"ehus9xw5"})("padding:",a.TV.spacer.x2,";padding-top:0;"),X=(0,i.Z)(a.xv,{target:"ehus9xw4"})("margin:0;margin-bottom:",a.TV.spacer.x1,";"),F=(0,i.Z)("dl",{target:"ehus9xw3"})("display:grid;grid-gap:",a.TV.spacer.x1,";grid-template-columns:1fr 1fr;margin:0;padding:0;"),W=(0,i.Z)("div",{target:"ehus9xw2"})({name:"qeq9f3",styles:"align-items:center;display:flex;overflow:hidden"}),q=(0,i.Z)("dt",{target:"ehus9xw1"})({name:"1vr7vmn",styles:"align-items:center;display:flex"}),K=(0,i.Z)("dd",{target:"ehus9xw0"})(a.TV.text("caption"),";",a.TV.truncateText(),";color:",a.TV.color.text_default,";margin-left:",a.TV.spacer.x1,";");function Y(e){switch(e){case"click":return"cursor_click";case"movement":return"cursor_move";case"scroll":return"scroll";case"unknown":return"question_cards"}}function Q(e){switch(e){case"desktop":return"device_desktop";case"phone":return"device_phone";case"tablet":return"device_tablet";case"unknown":return"question_cards"}}function J(e){let{className:t,highlight:n}=e;const{t:i}=(0,c.$G)();if(!n)return(0,p.BX)(j,{className:t,children:[(0,p.tZ)(z,{}),(0,p.BX)(F,{children:[(0,p.tZ)(G,{}),(0,p.tZ)(G,{}),(0,p.tZ)(G,{}),(0,p.tZ)(G,{}),(0,p.tZ)(G,{})]})]});const[r,o]=function(){switch(n?.type){case"heatmap":{const{metadata:e}=n;return[[{icon:Q(e.deviceType),key:"device=type",name:i("highlights:heatmaps.details.device.name"),value:(0,$.k)(e.deviceType)},{icon:Y(e.heatmapType),key:"heatmap-type",name:i("highlights:heatmaps.details.type.name"),value:i(`highlights:heatmaps.details.type.${e.heatmapType}`)},{icon:"page_empty",key:"page-path",name:i("highlights:heatmaps.details.page.name"),value:(0,$.k)(e.pagePath)}],i("highlights:heatmaps.details.heading")]}case"recording":{const{metadata:a}=n;return[[{icon:Q(a.deviceType),key:"resolution",name:i("highlights:recordings.details.resolution"),value:`${a.screenResolution[0]}  ${a.screenResolution[1]}`},{icon:"user_single",key:"user-id",name:i("highlights:recordings.details.user-id"),value:a.userId},{icon:(r=a.osFamily,"macos"===r||"ios"===r?"apple":r),key:"operating-system",name:i("highlights:recordings.details.operating-system"),value:(0,$.k)(a.osName)},{icon:(t=a.countryCode,t.toLocaleLowerCase()),key:"country",name:i("highlights:recordings.details.country"),value:(0,$.k)(a.countryName)},{icon:(e=a.browserName,"ie"===e?"ms_ie":e),key:"browser",name:i("highlights:recordings.details.browser"),value:(0,$.k)(a.browserName)},{icon:"time",key:"recording-created",name:i("highlights:recordings.details.recording-created"),value:(0,M.Sy)(a.recordingCreationEpochMs)},{icon:"page_empty",key:"page",name:i("highlights:recordings.details.page"),value:(0,$.k)(a.pagePath)}],i("highlights:recordings.details.heading")]}default:return[[],""]}var e,t,r}();return 0===r.length?null:(0,p.BX)(j,{className:t,children:[(0,p.tZ)(X,{as:"p",textType:"subtitle2",children:o}),(0,p.tZ)(F,{children:r.map((e=>{let{icon:t,key:n,name:i,value:r}=e;return(0,p.BX)(W,{children:[(0,p.tZ)(q,{children:"country"===n?(0,p.tZ)("span",{className:`flag flag-${t}`}):(0,p.tZ)(a.JO,{description:i,icon:t,size:"m"})}),(0,p.tZ)(K,{children:r})]},n)}))})]})}const ee=(0,i.Z)(u.g,{target:"emxd2mt1"})("width:153px;height:32px;margin:",a.TV.spacer.x1,";position:absolute;top:0px;"),te=(0,i.Z)(a.zx,{target:"emxd2mt0"})(a.TV.text("caption"),";&,&:focus,&:hover{background-color:",a.TV.color.ui_overlay,";color:",a.TV.color.text_default_inverse,";}");function ne(e){let{className:t,highlightType:n,url:i}=e;const{t:r}=(0,c.$G)(),[o,s]=function(){switch(n){case"heatmap":return[r("highlights:heatmaps.open-full"),"heatmaps"];case"recording":return[r("highlights:recordings.view-full"),"play_alt"];default:return[r("highlights:unknown.view-full"),"rocketship"]}}();return o&&s?n&&i?(0,p.tZ)(te,{as:"a",className:t,href:`${i}&opener=highlight`,icon:s,isExternal:!0,kind:"secondary",size:"s",children:o}):(0,p.tZ)(ee,{shimmerColor:a.TV.color.neutral_700,shimmerDarkColor:a.TV.color.neutral_800}):null}function ie(e){let{className:t,onClose:n}=e;const{t:i}=(0,c.$G)();return(0,p.tZ)(a.hU,{className:t,icon:"close",kind:"ghost",onClick:n,size:"s",tooltipText:i("highlights:single.close")})}var re=n(14928),ae=n(36111),oe=n(84929);const se=e=>{let{className:t,highlight:n,svgRef:i,uiPosition:r}=e;const{t:l}=(0,c.$G)(),d=(0,re.$n)(),g=(0,ae.L)({count:n.metadata.clicksCount??0,isDesktop:"desktop"===n.metadata.deviceType});return(0,p.tZ)(a.hU,{description:l("highlights:single.download"),className:t,icon:"download",kind:"ghost",onClick:async()=>{if(d&&(0,o.dT)(d,{highlightId:n.id,eventType:s.v.HIGHLIGHT_DOWNLOADED},{uiPosition:r}),(0,h.event)("heatmap_highlight_downloaded"),!i.current)return;const e=i.current.get();e&&await(0,oe.R)({svg:e,highlight:n,eventCopy:g})},size:"s",tooltipText:l("highlights:single.download")})};var le=n(88875),ce=n(36224);function de(e){let{highlight:t,uiPosition:n}=e;const{t:i}=(0,c.$G)(),r=(0,re.$n)(),{data:l}=(0,ce.O)(r,t);return(0,p.tZ)(a.hU,{icon:"download",isDisabled:"done"!==l.contentStatus,onClick:()=>{null!==l.metadata.videoUrl&&((0,le.O)(l.metadata.videoUrl,`clip_${l.id}.mp4`),r&&(0,o.dT)(r,{highlightId:l.id,eventType:s.v.HIGHLIGHT_DOWNLOADED},{uiPosition:n}),(0,h.event)("heatmap_highlight_downloaded"))},kind:"ghost",size:"s",tooltipText:i("highlights:single.download")})}var he=n(10868),ge=n(58315);const ue=(0,i.Z)(u.g,{target:"efhrpke3"})({name:"qzjzpm",styles:"width:85px;height:32px"}),pe=(0,i.Z)(u.g,{target:"efhrpke2"})({name:"68x97p",styles:"width:32px;height:32px"}),me=(0,i.Z)("header",{target:"efhrpke1"})("align-items:center;background-color:",a.TV.color.ui_background,";border-bottom:1px solid ",a.TV.color.ui_border_light,";display:grid;grid-column-gap:",a.TV.spacer.x0,";grid-template-columns:minmax(auto, 100%) auto auto auto auto;justify-content:flex-end;padding:",a.TV.spacer.x2," ",a.TV.spacer.x1,";padding-left:",a.TV.spacer.x2,";"),fe=(0,i.Z)(a.xv,{target:"efhrpke0"})("align-items:center;display:grid;grid-column-gap:",a.TV.spacer.x0,";grid-template-columns:auto auto;justify-content:flex-start;margin:0;");function ve(e){let{highlightType:t}=e;const{t:n}=(0,c.$G)(),[i,r]=function(){switch(t){case"heatmap":return["cursor_select",n("highlights:heatmaps.heading")];case"recording":return["scissors",n("highlights:recordings.heading")];case"unknown":return["question_cards",n("highlights:unknown.heading")]}}();return(0,p.BX)(fe,{as:"p",textType:"subtitle2",children:[(0,p.tZ)(a.JO,{icon:i}),r]})}function xe(e){let{authorIsCurrentUser:t,className:n,highlight:i,onClose:r,siteId:a,svgRef:o}=e;return i?(0,p.BX)(me,{className:n,children:[(0,p.tZ)(ve,{highlightType:i.type}),(0,p.tZ)(he.c,{highlightType:i.type,highlightId:i.id,uiPosition:"highlight_modal"}),"heatmap"===i.type?(0,p.tZ)(se,{svgRef:o,highlight:i,uiPosition:"highlight_modal"}):null,"recording"===i.type?(0,p.tZ)(de,{highlight:i,uiPosition:"highlight_modal"}):null,(0,p.tZ)(ge.W,{siteId:a,uiPosition:"highlight_modal",highlight:i,onCloseDeleteModal:r,authorIsCurrentUser:t}),(0,p.tZ)(ie,{onClose:r})]}):(0,p.BX)(me,{className:n,children:[(0,p.tZ)(ue,{}),(0,p.tZ)(pe,{}),(0,p.tZ)(pe,{}),(0,p.tZ)(pe,{}),(0,p.tZ)(ie,{onClose:r})]})}var _e=n(94341);const Te=a.TV.color.neutral_800,ye=(0,i.Z)("video",{target:"ers1rxs1"})("background-color:",Te,";"),we=(0,i.Z)("section",{target:"ers1rxs0"})("background-color:",Te,";color:",a.TV.color.text_default_inverse,";align-content:center;display:grid;grid-template-rows:auto auto auto;grid-row-gap:",a.TV.spacer.x2,";justify-items:center;padding:",a.TV.spacer.x2," 0;");function be(e){let{className:t,highlight:n,siteId:i}=e;const{t:r}=(0,c.$G)(),{data:o}=(0,ce.O)(i,n);switch(o.contentStatus){case"failed":return(0,p.BX)(we,{className:t,children:[(0,p.tZ)(a.JO,{icon:"error",size:"l"}),r("highlights:single.content-generation.failed"),(0,p.tZ)(a.zx,{as:"a",href:o.fullItemUrl,isExternal:!0,children:r("highlights:single.content-generation.back")})]});case"source_deleted":return(0,p.BX)(we,{className:t,children:[(0,p.tZ)(a.JO,{icon:"error",size:"l"}),r("highlights:single.content-generation.source-deleted")]});case"creating":return(0,p.BX)(we,{className:t,children:[(0,p.tZ)(a.aN,{size:"l"}),r("highlights:single.content-generation.creating")]});case"done":return(0,p.tZ)(ye,{className:t,controls:!0,poster:o.imageUrl,autoPlay:!0,children:(0,p.tZ)("source",{type:"video/mp4",src:o.metadata.videoUrl??void 0})});default:return(0,p.BX)(we,{className:t,children:[(0,p.tZ)(a.JO,{icon:"error",size:"l"}),r("highlights:single.content-generation.unknown"),(0,p.tZ)(a.zx,{as:"a",href:o.fullItemUrl,isExternal:!0,children:r("highlights:single.content-generation.see-recording")})]})}}const Se=(0,i.Z)("section",{target:"ejydglt1"})("color:",a.TV.color.text_default_inverse,";height:100%;width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;"),Ze=(0,i.Z)(a.aN,{target:"ejydglt0"})("margin-bottom:",a.TV.spacer.x1,";");function ke(e){let{className:t,highlight:n,siteId:i,svgRef:r}=e;const{t:a}=(0,c.$G)();return n?"heatmap"===n.type?(0,p.tZ)(_e.F,{className:t,url:n.imageUrl,selectedArea:n.metadata.selectedArea,clicksCount:n.metadata.clicksCount??0,clicksPercentage:n.metadata.clicksPercentage??0,isDesktop:"desktop"===n.metadata.deviceType,ref:r}):"recording"===n.type?(0,p.tZ)(be,{className:t,highlight:n,siteId:i}):null:(0,p.BX)(Se,{children:[(0,p.tZ)(Ze,{size:"l"}),a("highlights:single.loading")]})}const Ee=(0,i.Z)("section",{target:"e1jmvcp2"})({name:"1f20shy",styles:"display:flex;justify-content:center;align-items:center;flex-direction:column;height:100%"}),Ce=(0,i.Z)("div",{target:"e1jmvcp1"})(a.TV.text("header3")," margin:",a.TV.spacer.x3," 0 ",a.TV.spacer.x2,";"),Ie=(0,i.Z)("div",{target:"e1jmvcp0"})(a.TV.text("header5"),";"),Re=()=>{const{t:e}=(0,c.$G)();return(0,p.BX)(Ee,{children:[(0,p.tZ)(a.JO,{size:"xl",icon:"error"}),(0,p.tZ)(Ce,{children:e("highlights:single.downloading-error.title")}),(0,p.tZ)(Ie,{children:e("highlights:single.downloading-error.copy")})]})};var Ae=n(2417),Oe=n(7664),Ve=n(18278),Ne=n(80614),De=n(36735);const Le=(0,i.Z)(u.g,{target:"e9yyyba3"})("width:110px;height:20px;margin-top:",a.TV.spacer.x1,";margin-bottom:",a.TV.spacer.x0pt5,";"),Pe=(0,i.Z)(u.g,{target:"e9yyyba2"})("width:228px;height:48px;margin-top:",a.TV.spacer.x1,";margin-bottom:",a.TV.spacer.x0pt5,";"),Be=(0,i.Z)("section",{target:"e9yyyba1"})("padding:",a.TV.spacer.x2,";padding-top:0;"),He=(0,i.Z)(a.xv,{target:"e9yyyba0"})("margin-bottom:",a.TV.spacer.x0,";margin-top:",a.TV.spacer.x1,";");function Ue(e){return new Set(e.map((e=>e.id)))}function $e(e){let{isLoading:t=!1,highlightId:n,highlightLabels:i,siteId:a}=e;const{t:o}=(0,c.$G)(),{add:s,remove:l}=(0,Ne.x)(a,n),d=(0,Ve.y)("settings.custom-labels"),[h,g]=(0,r.useState)(Ue(i));return(0,r.useEffect)((()=>{g(Ue(i))}),[i]),t?(0,p.BX)(Be,{children:[(0,p.tZ)(Le,{}),(0,p.tZ)(Pe,{})]}):(0,p.BX)(Be,{children:[(0,p.tZ)(He,{as:"p",textType:"subtitle2",children:o("highlights:single.labels")}),d?(0,p.tZ)(De.k,{siteId:a,itemId:n,itemLabels:i}):(0,p.tZ)(Oe.T,{children:(0,p.tZ)(Ae.YH,{onAdd:s,onRemove:l,selectedLabelIds:h,onSelectedIdsChange:g,siteId:a})})]})}var Me=n(12974),ze=n(30076);const Ge=(0,i.Z)("section",{target:"e3vyfx35"})({name:"1uowx8j",styles:"display:flex;height:100%;width:100%"}),je=(0,i.Z)("div",{target:"e3vyfx34"})("background:",a.TV.color.neutral_500,";flex-grow:1;overflow:hidden;position:relative;"),Xe=(0,i.Z)(ke,{target:"e3vyfx33"})({name:"1kzq5ms",styles:"height:100%;width:100%"}),Fe=(0,i.Z)(ne,{target:"e3vyfx32"})("left:",a.TV.spacer.x1,";position:absolute;top:",a.TV.spacer.x1,";"),We=(0,i.Z)("nav",{target:"e3vyfx31"})("background-color:",a.TV.color.neutral_100,";flex-grow:0;flex-shrink:0;display:flex;flex-direction:column;width:292px;"),qe=(0,i.Z)("div",{target:"e3vyfx30"})({name:"1660o0e",styles:"background-color:inherit;display:flex;flex-direction:column;overflow-y:auto;flex:1"});function Ke(e){let{currentUser:t,highlightId:n,onClose:i,organizationId:a,siteId:c}=e;const d=(0,Me.D)(c,n);(0,r.useEffect)((()=>{(0,o.dT)(c,{highlightId:n,eventType:s.v.HIGHLIGHT_VIEWED},{highlightArea:"all_highlights_area"})}),[c,n]);const h=(0,r.useRef)(null);return(0,ze.Sc)(d),"error"===d.status?(0,p.tZ)(Re,{}):(0,p.BX)(Ge,{children:[(0,p.BX)(je,{children:[(0,p.tZ)(Xe,{highlight:d?.data,siteId:c,svgRef:h}),(0,p.tZ)(Fe,{highlightType:d?.data?.type,url:d?.data?.fullItemUrl})]}),(0,p.BX)(We,{children:[(0,p.tZ)(xe,{authorIsCurrentUser:d?.data?.author?.id===String(t?.id),highlight:d.data,onClose:i,siteId:c,svgRef:h}),(0,p.BX)(qe,{children:[(0,p.tZ)(T,{isLoading:!d?.data,highlightCollections:d.data?.collections??[],highlightId:n,highlightType:d.data?.type??null,siteId:c}),(0,p.tZ)($e,{isLoading:!d?.data,highlightLabels:d.data?.labels??[],highlightId:n,siteId:c}),t&&(0,p.tZ)(l.B,{children:(0,p.tZ)(U,{isLoading:!d?.data,currentUser:t,commentId:d?.data?.commentId,highlight:{id:d.data?.id??"",createdDate:d.data?.createdDate??new Date,autoCreated:d.data?.autoCreated??!1},organizationId:a,siteId:c})}),(0,p.tZ)(J,{highlight:d.data})]})]})]})}var Ye=n(54185);function Qe(e,t){const n=new URL(`https://${window.location.host}/sites/${e}/highlights/${Ye._}`);return n.searchParams.append("highlight",t),n.toString()}},12974:(e,t,n)=>{n.d(t,{D:()=>a});var i=n(66624),r=n(78483);function a(e,t){return(0,i.useQuery)([r.BQ,e,t],(()=>r.L_(e,t)),{staleTime:6e4,cacheTime:6e4,refetchOnWindowFocus:!1})}},22677:(e,t,n)=>{n.d(t,{d:()=>s});var i=n(86599),r=n.n(i),a=n(64934),o=n(68816);function s(e,t){const[n,i]=(0,a.useState)([0,0]),[s,l]=(0,a.useState)("");return(0,a.useEffect)((()=>{const n=new Image,a=()=>{i([n.naturalHeight,n.naturalWidth])};return n.addEventListener("load",a),async function(e,t){return new Promise(((n,i)=>{r().get(e,{withCredentials:!0,responseType:"blob"}).then((e=>{const t=new FileReader;t.readAsDataURL(e.data),t.onloadend=()=>{const e=t.result;n(e)}})).catch((e=>{t||i(e),(0,o.H)(e)}))}))}(e,t).then((e=>{n.src=e,l(e)})).catch((e=>{(0,o.H)(e)})),()=>{n.removeEventListener("load",a)}}),[e,t]),{size:n,encodedImage:s}}},45366:(e,t,n)=>{n.d(t,{m:()=>l});var i=n(16346),r=n(16304),a=n(66624),o=n(78483),s=n(86781);function l(e){const{t}=(0,i.$G)(),{success:n,error:l}=(0,r.d)(),{mutateAsync:c}=function(e){return(0,a.useMutation)((t=>{let{highlightId:n,solved:i,uiPosition:r}=t;return o.Bl(e,n,{solved:i,uiPosition:r})}),{onSuccess:()=>{s.E.invalidateQueries(o.gU),s.E.invalidateQueries(o.o5),s.E.invalidateQueries(o.UR),s.E.invalidateQueries(o.BQ)}})}(e);return{setHighlightSolved:async(e,i,r)=>{try{await c({highlightId:e,solved:i,uiPosition:r}),n(t(i?"highlights:single.mark_solved_success":"highlights:single.unmark_solved_success"))}catch(e){l(t(i?"highlights:single.mark_solved_error":"highlights:single.unmark_solved_error"))}}}}},30076:(e,t,n)=>{n.d(t,{Qk:()=>a,Sc:()=>s,qq:()=>o});var i=n(64934),r=n(16431);const a="recording_highlight_viewed",o="heatmap_highlight_viewed";function s(e){(0,i.useEffect)((()=>{"success"===e.status&&("heatmap"===e.data?.type?(0,r.event)(o):"recording"===e.data?.type&&(0,r.event)(a))}),[e.status,e.data])}},49197:(e,t,n)=>{n.d(t,{m:()=>r});const i=n.p+"a50d4e4d0b75d3849eaf.png",r=(e,t)=>({id:0,threadId:0,createdEpochTime:(t??new Date).valueOf()/1e3,author:{name:"Hotjar",email:"",avatar:i,id:0},content:[{type:"text",value:e("highlights:single.auto_created")}]})},88875:(e,t,n)=>{function i(e,t){if(null===e)return;const n=document.createElement("a");n.setAttribute("download",t),n.setAttribute("href",e),n.setAttribute("target","_blank");const i=new MouseEvent("click",{view:window,bubbles:!1,cancelable:!0});n.dispatchEvent(i)}n.d(t,{O:()=>i})},43933:(e,t,n)=>{n.d(t,{U:()=>s}),n(74870);var i=n(66624),r=n(78483),a=n(39015),o=n(86781);function s(e,t){const n=()=>{o.E.invalidateQueries([r.BQ,e,t]),o.E.invalidateQueries(r.gU),o.E.invalidateQueries(r.UR),o.E.invalidateQueries(a.r5)},s=(0,i.useMutation)((async n=>{if(null===e)throw new Error("site ID is not defined");return a.V(e,n,t)}),{onSuccess:n}),l=(0,i.useMutation)((async n=>{if(null===e)throw new Error("site ID is not defined");return a.x$(e,n,t)}),{onSuccess:n});return{add:s.mutate,remove:l.mutate,status:(c=[s.status,l.status],c.includes("error")?"error":c.includes("loading")?"loading":c.includes("success")?"success":"idle")};var c}},80614:(e,t,n)=>{n.d(t,{x:()=>o}),n(74870);var i=n(66624),r=n(78483),a=n(86781);function o(e,t){const n=()=>{a.E.invalidateQueries([r.BQ,e,t]),a.E.invalidateQueries(r.gU),a.E.invalidateQueries(r.o5),a.E.invalidateQueries(r.UR)},o=(0,i.useMutation)((async n=>{if(null===e)throw new Error("site ID is not defined");return r.jc(e,t,n)}),{onSuccess:n}),s=(0,i.useMutation)((async n=>{if(null===e)throw new Error("site ID is not defined");return r.qv(e,t,n)}),{onSuccess:n});return{add:o.mutate,remove:s.mutate,status:(l=[o.status,s.status],l.includes("error")?"error":l.includes("loading")?"loading":l.includes("success")?"success":"idle")};var l}},36224:(e,t,n)=>{n.d(t,{O:()=>s});var i=n(66624),r=n(53613),a=n(78483),o=n(64934);function s(e,t){const n=(0,o.useRef)(t.contentStatus),s=(0,i.useQuery)([a.NU,e,t.id],(()=>r.lR(e,t.id)),{enabled:null!==e&&"creating"===n.current,staleTime:3e5,refetchInterval:5e3});return s.data&&(n.current=s.data.contentStatus),{...s,data:{...t,contentStatus:n.current,metadata:{...t.metadata,videoUrl:s.data?.videoUrl??t.metadata?.videoUrl},thumbnailUrl:s.data?.thumbnailUrl??t.thumbnailUrl}}}},75671:(e,t,n)=>{n.d(t,{m:()=>s});var i=n(64934),r=n(66624),a=n(78483),o=n(86781);function s(e){const{data:t}=(0,r.useQuery)([a.Rl,e],(()=>a.E5(e)),{enabled:null!==e,staleTime:3e5,refetchInterval:6e4});return{value:t,reset:(0,i.useCallback)((()=>{o.E.setQueryData([a.Rl,e],0)}),[e])}}},51115:(e,t,n)=>{n.d(t,{L:()=>a});var i=n(68212),r=n(91995);const a=e=>{let{showBanner:t,message:n,kind:a,onDismiss:o=(()=>{}),className:s=""}=e;return t?(0,r.tZ)(i.jL,{kind:a,isDismissible:!0,onDismiss:o,className:s,children:n}):null}},89714:(e,t,n)=>{n.d(t,{EO:()=>p,gX:()=>l,Pe:()=>g,Lr:()=>u,el:()=>h});var i=n(95851),r=n(68212),a=n(2417),o=n(91995);const s=(0,i.Z)(r.JO,{target:"e1yzcb2j0"})("transform:scale(",22/32,");");let l;!function(e){e.bug="bug",e.confusion="confusion",e.conversion="conversion",e.frustration="frustration",e.uxUiIssue="issue",e.success="success"}(l||(l={}));const c=Object.freeze({[l.bug]:"1",[l.confusion]:"2",[l.uxUiIssue]:"3",[l.conversion]:"4",[l.frustration]:"5",[l.success]:"6"}),d=Object.keys(c),h={bug:"common:recordings.reactions.bug",confusion:"common:recordings.reactions.confusion",conversion:"common:recordings.reactions.conversion",frustration:"common:recordings.reactions.frustration",issue:"common:recordings.reactions.uxUiIssue",success:"common:recordings.reactions.success"},g=e=>c[e],u=e=>d.find((t=>c[t]===e)),p=e=>{let{name:t,size:n="l"}=e;return t?(0,o.tZ)("div",{"aria-label":t,children:(0,o.tZ)(s,{icon:a.kh[t]??t,size:n})}):null}},72941:(e,t,n)=>{n.d(t,{vM:()=>s,N8:()=>d,n5:()=>l});var i=n(95851),r=n(64934),a=n(68212),o=n(91995);const s=1,l=12,c=(0,i.Z)("span",{target:"e14pimv30"})("bottom:",(e=>{let{showStem:t}=e;return t?a.TV.spacer.x2:a.TV.spacer.x0}),";left:",(e=>e.lollipopPosition),"%;position:absolute;transform:translateX(-50%);z-index:",(e=>{let{increaseZIndex:t}=e;return t?s:0}),";cursor:pointer;&:hover{z-index:",s,";margin-top:0;padding-bottom:0;}",(e=>{let{showStem:t,showLollipopFooter:n,footerOffset:i,footerWidth:r}=e;return t?`\n    // NOTE: stem\n    &::before {\n      content: '';\n      position: absolute;\n      border-left: 1px solid ${a.TV.color.azure};\n      height: ${l}px;\n      left: 50%;\n      top: 100%;\n    }\n    &:hover::before {\n      height: ${l}px;\n      top: 100%;\n    }\n\n    // NOTE: horizontal line indicating clip duration or just being there for comments\n    &::after {\n      background-color: ${a.TV.color.azure};\n      border-radius: 2px;\n      content: '';\n      height: ${n?4:1}px;\n      position: absolute;\n      top: calc(100% + ${l}px);\n      transform: translateX(calc(-50% + ${i}px));\n      width: ${r}px;\n    }\n  `:null}),";"),d=(0,r.forwardRef)(((e,t)=>{let{children:n,increaseZIndex:i=!1,showLollipopFooter:r,showStem:a,position:s,timelineWidth:l,className:d}=e;const{footerOffset:h,footerWidth:g}=(e=>{let{maxAbsolutePosition:t,percentagePosition:n,showLollipopFooter:i=!1}=e;const r=i?106:10,a=r/2,o=t*n/100;return 10===r?{footerOffset:0,footerWidth:r}:o-a<0?{footerOffset:a-o,footerWidth:r}:o+a>t?{footerOffset:t-o-a,footerWidth:r}:{footerOffset:0,footerWidth:r}})({maxAbsolutePosition:l,percentagePosition:s,showLollipopFooter:r});return(0,o.tZ)(c,{className:d,increaseZIndex:i,lollipopPosition:s,showLollipopFooter:r,footerOffset:h,footerWidth:g,ref:t,showStem:a,children:n})}))},34448:(e,t,n)=>{n.d(t,{Dq:()=>u,LQ:()=>g,_F:()=>h,cC:()=>d,hr:()=>l,m1:()=>c});var i=n(66069),r=n(22198);const a=(e,t)=>{const{previousTime:n,previousSectionIndex:i,sectionInfoList:r}=t;if(0===r.length||n===e)return i;if(n<e)for(let t=i;t<r.length;t++){if(t===r.length-1)return t;if(e<=r[t+1].startTimeInMs)return t}else for(let t=i;t>=0;t--){if(0===t)return t;if(e>r[t].startTimeInMs)return t}return i},o=(e,t,n)=>Math.min(Math.round(e/t)*t,n),s={currentTime:0,currentTimeWithLessPrecision:0,currentSectionIndex:0,currentPageIndex:0,currentTabIndex:0,draggedTime:0,draggedSectionIndex:0,draggedPageIndex:0,hoveredTime:0,hoveredSectionIndex:0,hoveredPageIndex:0,isDragging:!1,isRelevantActionOverlappingHighlight:!1,isHovering:!1,sectionInfoList:[],duration:0,precisionInMs:1e3,tabCount:0},l=(0,i.Z)((e=>({...s,setCurrentTime:t=>e((e=>{const n=o(t,e.precisionInMs,e.duration),i=a(t,{previousTime:e.currentTime,previousSectionIndex:e.currentSectionIndex,sectionInfoList:e.sectionInfoList});return{currentTime:t,currentTimeWithLessPrecision:n,currentSectionIndex:i,currentPageIndex:e.sectionInfoList[i]?.pageIndex,currentTabIndex:e.sectionInfoList[i]?.tabIndex}})),setDraggedTime:t=>e((e=>{const n=o(t,e.precisionInMs,e.duration),i=a(n,{previousTime:e.draggedTime,previousSectionIndex:e.draggedSectionIndex,sectionInfoList:e.sectionInfoList});return{draggedTime:n,draggedSectionIndex:i,draggedPageIndex:e.sectionInfoList[i]?.pageIndex}})),setHoveredTime:t=>e((e=>{const n=o(t,e.precisionInMs,e.duration),i=a(n,{previousTime:e.hoveredTime,previousSectionIndex:e.hoveredSectionIndex,sectionInfoList:e.sectionInfoList});return{hoveredTime:n,hoveredSectionIndex:i,hoveredPageIndex:e.sectionInfoList[i]?.pageIndex}})),setAllTimeAfterDrag:t=>e((e=>{const n=o(t,e.precisionInMs,e.duration),i=a(n,{previousTime:e.draggedTime,previousSectionIndex:e.draggedSectionIndex,sectionInfoList:e.sectionInfoList}),r=e.sectionInfoList[i]?.pageIndex,s=e.sectionInfoList[i]?.tabIndex;return{currentTime:n,currentTimeWithLessPrecision:n,hoveredTime:n,draggedTime:n,currentSectionIndex:i,hoveredSectionIndex:i,draggedSectionIndex:i,currentPageIndex:r,currentTabIndex:s,hoveredPageIndex:r,draggedPageIndex:r}})),setIsDragging:t=>e((()=>({isDragging:t}))),setIsHovering:t=>e((()=>({isHovering:t}))),setSectionInfoList:t=>e((()=>({sectionInfoList:t}))),setDuration:t=>e((()=>{return{duration:t,precisionInMs:(e=t,e>3e5?1e3:e>6e4?100:10)};var e})),setIsRelevantActionOverlappingHighlight:t=>e((()=>({isRelevantActionOverlappingHighlight:t}))),setTabCount:t=>e((()=>({tabCount:t}))),setDefaultValues:()=>e((()=>({...s})))}))),c=e=>{(0,r.unstable_batchedUpdates)((()=>{l.getState().setCurrentTime(e)}))},d=e=>{(0,r.unstable_batchedUpdates)((()=>{l.getState().setSectionInfoList(e)}))},h=e=>{(0,r.unstable_batchedUpdates)((()=>{l.getState().setDuration(e)}))},g=e=>{(0,r.unstable_batchedUpdates)((()=>{l.getState().setTabCount(e)}))},u=()=>{(0,r.unstable_batchedUpdates)((()=>{l.getState().setDefaultValues()}))}},616:(e,t,n)=>{n.d(t,{EZ:()=>f,Gr:()=>b,LP:()=>v,RJ:()=>x,Tw:()=>m,ak:()=>p,tu:()=>w,v4:()=>_}),n(74870);var i=n(47649),r=n(55885),a=n(4165),o=n(58996),s=n(95796),l=n(37713),c=n(20149),d=n(60133),h=n(78601),g=n(4286),u=n(20387);function p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;const n=e.replace(/[[\]]/g,"\\$&"),i=new RegExp(`[?&]${n}(=([^&#]*)|&|#|$)`),r=i.exec(t);return r&&r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):""}const m=()=>parseInt(p("recording"),10),f=()=>parseInt(p("site"),10),v=()=>p("token"),x=()=>Boolean(p("forRetaker")),_=()=>"true"===p("debugCreateElement"),T=[r.w_.VisitedURL,r.w_.TeamComment,r.w_.Event,r.w_.RageClickKind,r.w_.UTurnKind,r.w_.NPS,r.w_.IncomingFeedback,r.w_.Clicked,r.w_.Error,r.w_.Funnel];const y=e=>{if(!e||e.length<1)return null;const t=e[0];return t.kind===r.w_.RageClickKind?t.value===s.v.OCCURRED||null:t.kind===r.w_.UTurnKind&&t.value===l.K.OCCURRED||null},w=()=>{const e=function(){const e=function(){try{const e=localStorage.getItem("recordingFiltersUiFormat");return e?JSON.parse(e):{filterList:[]}}catch{}return{filterList:[]}}().filterList.filter((e=>T.includes(e.kind)));return(0,i.Z)(e,"kind")}(),t=(n=e[r.w_.VisitedURL]||[])&&n.length?n.reduce(((e,t)=>{if(t.kind!==r.w_.VisitedURL||!t.value)return e;const{operation:n,negate:i}=a.Ey(t.value.operation);if(!n||i||!("value"in t.value))return e;const o={[n.toLocaleLowerCase()]:t.value.value};return e.push(o),e}),[]):null;var n;const s=(e=>e&&e.length?e.reduce(((e,t)=>(t.kind===r.w_.Event&&t.value&&t.value.operation===o.i.IS_ANY_OF_THESE&&e.push(...t.value.selectedValues),[...new Set(e)])),[]):null)(e[r.w_.Event]||[]),l=y(e[r.w_.RageClickKind]||[]),p=y(e[r.w_.UTurnKind]||[]),m=(e=>{if(!e||e.length<1)return null;const t=e[0];return t.kind===r.w_.NPS?d.y(t.value):null})(e[r.w_.NPS]||[]),f=(e=>{if(!e||e.length<1)return null;const t=e[0];return t.kind===r.w_.IncomingFeedback?c.y(t.value):null})(e[r.w_.IncomingFeedback]||[]),v=(e=>{if(!e||e.length<1)return null;const t=e.reduce(((e,t)=>(t.kind===r.w_.Clicked&&t.value&&e.push(h.y(t.value)),e)),[]);return t.length>0?t:null})(e[r.w_.Clicked]||[]),x=(e=>{if(!e||e.length<1)return null;const t=e.reduce(((e,t)=>(t.kind===r.w_.Error&&t.value&&e.push(g.y(t.value)),e)),[]);return t.length>0?t:null})(e[r.w_.Error]||[]),_=(e=>{if(!e||e.length<1)return null;const t=e.reduce(((e,t)=>{if(t.kind===r.w_.Funnel&&t.value){const n=(0,u.G)([t]);e.push(n)}return e}),[]);return t.length>0?t:null})(e[r.w_.Funnel]||[]);return{...t&&{page_filters:JSON.stringify(t)},...s&&{event_filters:JSON.stringify(s)},...l&&{rageclick_filters:l},...p&&{uturn_filters:p},...m&&{nps_filters:JSON.stringify(m)},...f&&{if_filters:JSON.stringify(f)},...v&&{clicked_filters:JSON.stringify(v)},...x&&{error_filters:JSON.stringify(x)},..._&&{funnel_filters:JSON.stringify(_[0])}}},b=()=>window.location.pathname+window.location.search},10868:(e,t,n)=>{n.d(t,{c:()=>g,f:()=>h});var i=n(95851),r=n(64934),a=n(16346),o=n(68212),s=n(16431),l=n(67405),c=n(94959),d=n(91995);const h=(0,i.Z)(o.Lt,{target:"eg6o9im0"})("border:1px solid ",o.TV.color.ui_border,";border-radius:",o.TV.radius.l,";display:flex;flex-direction:column;align-items:flex-start;padding:",o.TV.spacer.x2," ",o.TV.spacer.x3,";",o.TV.elevation(4),";.tippy-content{padding:0px;}");function g(e){let{className:t,highlightType:n,title:i,uiPosition:g,highlightId:u}=e;const{t:p}=(0,a.$G)(),[m,f]=(0,r.useState)(!1);return(0,d.tZ)(h,{onShown:()=>{f(!0),"heatmap"===n&&(0,s.event)("heatmap_highlight_shared"),"recording"===n&&(0,s.event)("recording_highlight_shared")},onHidden:()=>{f(!1)},appendTo:"parent",trigger:(0,d.tZ)(o.hU,{className:t,icon:"share",kind:"ghost",size:"s",tooltipText:p("common:actions.share"),description:p("common:actions.share")}),children:m?(0,d.tZ)(l.J,{title:i,highlightId:u,uiPosition:g}):(0,d.tZ)(c.e,{})})}},52402:(e,t,n)=>{n.d(t,{m:()=>_});var i=n(95851),r=n(64934),a=n(16346),o=n(68212),s=n(94117),l=n(14928),c=n(94959),d=n(91364),h=n(91995);const g=(0,i.Z)("div",{target:"e110tb9h6"})({name:"1pgv7dg",styles:"display:flex;flex-direction:column;align-items:flex-start;width:100%"}),u=(0,i.Z)("div",{target:"e110tb9h5"})(o.TV.text("subtitle1"),";margin-bottom:",o.TV.spacer.x3,";"),p=(0,i.Z)("div",{target:"e110tb9h4"})({name:"zjik7",styles:"display:flex"}),m=(0,i.Z)(o.JO,{target:"e110tb9h3"})("margin-right:",o.TV.spacer.x1,";"),f=(0,i.Z)("div",{target:"e110tb9h2"})("height:40px;border-radius:4px;border:1px solid ",o.TV.BRAND_COLORS.neutral_200,";background-color:",o.TV.BRAND_COLORS.neutral_100,";color:",o.TV.color.text_default,";cursor:pointer;box-sizing:border-box;display:flex;align-items:center;justify-content:center;flex-grow:1;padding:",o.TV.spacer.x1," ",o.TV.spacer.x2,";padding-right:",o.TV.spacer.x0,";margin-right:",o.TV.spacer.x1,";width:236px;overflow:hidden;"),v=(0,i.Z)("output",{target:"e110tb9h1"})(o.TV.text("body2"),";border-radius:4px;background-color:transparent;color:",o.TV.color.text_default,";cursor:pointer;box-sizing:border-box;display:block;flex-grow:1;padding:0px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"),x=(0,i.Z)(o.hU,{target:"e110tb9h0"})(">button{color:",o.TV.BRAND_COLORS.midnight_600,";&:hover{color:",o.TV.BRAND_COLORS.midnight_600,";}}"),_=(0,r.forwardRef)(((e,t)=>{let{title:n,onCopy:i,shortUrl:r}=e;const{t:o}=(0,a.$G)(),[{value:_},T]=(0,s.Z)(),y=(0,l.$n)(),w=(0,d.t)(y||"",window.location.href),b=r??w;if("success"!==b.status)return(0,h.tZ)(c.e,{});const S=_===b.data,Z=o(S?"common:actions.copy-success":"common:actions.copy-label");return(0,h.BX)(g,{children:[(0,h.tZ)(u,{children:n??o("common:actions.share")}),(0,h.BX)(p,{children:[(0,h.BX)(f,{children:[(0,h.tZ)(m,{icon:"hyperlink"}),(0,h.tZ)(v,{ref:t,children:b.data})]}),(0,h.tZ)(x,{onClick:()=>{i(),T(b?.data)},icon:S?"check_alt":"copy",description:Z,tooltipText:Z})]})]})}))},94959:(e,t,n)=>{n.d(t,{e:()=>u});var i=n(95851),r=n(16346),a=n(68212),o=n(84194),s=n(91995);const l=(0,i.Z)("div",{target:"eiccubx4"})({name:"1pgv7dg",styles:"display:flex;flex-direction:column;align-items:flex-start;width:100%"}),c=(0,i.Z)("div",{target:"eiccubx3"})(a.TV.text("subtitle1"),";margin-bottom:",a.TV.spacer.x3,";"),d=(0,i.Z)("div",{target:"eiccubx2"})({name:"zjik7",styles:"display:flex"}),h=(0,i.Z)(o.g,{target:"eiccubx1"})({name:"1mfsro6",styles:"width:40px;height:40px"}),g=(0,i.Z)(o.g,{target:"eiccubx0"})("width:236px;height:40px;margin-right:",a.TV.spacer.x1,";");function u(e){let{title:t}=e;const{t:n}=(0,r.$G)();return(0,s.BX)(l,{children:[(0,s.tZ)(c,{children:t??n("common:actions.share")}),(0,s.BX)(d,{children:[(0,s.tZ)(g,{}),(0,s.tZ)(h,{})]})]})}},67405:(e,t,n)=>{n.d(t,{J:()=>h});var i=n(52402),r=n(78483),a=n(54031),o=n(91364),s=n(14928),l=n(19516),c=n(64934),d=n(91995);function h(e){let{title:t,uiPosition:n,highlightId:h}=e;const{selectAndCopy:g,outputRef:u,shortUrl:p}=function(e,t){const n=(0,s.$n)(),i=(0,c.useMemo)((()=>{const t=new URL(window.location.href);return t.searchParams.set("highlight",e??""),t.toString()}),[e]),d=(0,o.t)(n??"",i),h=(0,c.useRef)(null);return{selectAndCopy:(0,c.useCallback)((()=>{null!==h.current&&(0,l.e)(h.current),"success"===d.status&&n&&e&&(0,r.dT)(n,{highlightId:e,eventType:a.v.HIGHLIGHT_SHARED},{uiPosition:t})}),[d,n,e,t]),outputRef:h,shortUrl:d}}(h??null,n);return(0,d.tZ)(i.m,{title:t,onCopy:g,ref:u,shortUrl:p})}},77848:(e,t,n)=>{n.d(t,{b:()=>l});var i=n(64934),r=n(2356),a=n(73646);const o="dismissed";let s;const l=(e,t,n)=>{const[l,c]=(0,i.useState)(!0),{data:d}=(0,a.xJ)();return(0,i.useEffect)((()=>{(async()=>{if(d?.id){if(!s?.[t]){const t=await(0,r.U)(d.id);s=t[e]||{}}s[t]!==o&&c(!1)}})()}),[d?.id,t,e]),{isDismissed:l,dismiss:async function(){let i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];d?.id&&(await(0,r.t)(d.id,{namespace:e,key:t,value:o},n),s[t]=o,i||c(!0))}}}},77594:(e,t,n)=>{n.d(t,{S:()=>a});var i=n(31739),r=n(14928);function a(e,t){const{data:n}=(0,r.PD)();return!(!t&&!n)&&(t?(0,i.yy)(e,t):(0,i.yy)(e,n??null))}},72007:(e,t,n)=>{n.d(t,{a:()=>r});var i=n(77848);const r=e=>{const{isDismissed:t,dismiss:n}=(0,i.b)("GUIDE_CARD",e);return{isGuideCardVisible:!t,dismissGuideCard:n}}},86355:(e,t,n)=>{n.d(t,{b:()=>o});var i=n(64934),r=n(60570),a=n(39283);function o(e){const[t,n]=(0,i.useState)(!1),[o,s]=(0,i.useState)(!1),[l,c]=(0,i.useState)(!1),[d,h]=(0,i.useState)(!1),[g,u]=(0,i.useState)(!1),[p,m]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{if(!e)return a.Z;let t=!1;return n(!0),(async()=>{const i=await r.JJ.get(e.id);if(i.success&&!t){const e=i.data?.session_targeting_rules||[];c(!0===i.data?.session_capture_console_consent),s(!i.data?.session_exclude_short),h(!!e.length),u(e.some((e=>"trigger"===e.component))),m(e.some((e=>"url"===e.component)))}n(!1)})(),function(){t=!0}}),[e]),{isLoading:t,sessionIncludeShort:o,targetingRulesPresent:d,targetingRulesWithPageRulePresent:p,targetingRulesWithJsTriggerPresent:g,sessionCaptureConsoleConsent:l}}},48139:(e,t,n)=>{function i(e,t){return e.length<=t?[e,0]:[e.slice(0,t-1),e.length-t+1]}n.d(t,{i:()=>i})},15773:(e,t,n)=>{n.d(t,{G:()=>r});var i=n(49259);const r=e=>(0,i.G)(e)},89085:(e,t,n)=>{n.d(t,{G:()=>l});var i=n(54227),r=n(61799),a=n(77915),o=n(88610),s=n(16431);const l=new class{NUMBER_OF_RECORDINGS_BEFORE_TRIGGER=10;triggered=!1;incrementWatched=()=>{let e=a.i.get("viewedRecordings")||0;return e+=1,a.i.set("viewedRecordings",e),e};triggerIfEnoughViewed(e){e<this.NUMBER_OF_RECORDINGS_BEFORE_TRIGGER||this.triggered||(this.triggered=!0,o.c.debug("Hotjar: Executing Javascript Trigger ten_recordings_viewed"),(0,s.trigger)("ten_recordings_viewed"))}tagRepeatedFilters=e=>{if(!e)return;const t=(0,i.Z)(e,(e=>e.type));(0,r.Z)(t).filter((e=>e[1]>1)).map((e=>e[0])).forEach((e=>{(0,s.tagRecording)(`Repeated filter: ${e}`)}))}}},75360:(e,t,n)=>{n.d(t,{Ns:()=>p,nP:()=>u});var i=n(14928),r=n(73646),a=n(66624),o=n(2356),s=n(86781),l=n(64934);const c="recording_viewed_counter",d="counter",h=c,g=async(e,t)=>{if(!t||!e)return 0;const n=await(0,o.U)(t,{siteId:e});return n[c]&&n[c][d]?Number(n[c][d]):0},u=async(e,t)=>{if(t&&e){const n=s.E.getQueryData([h,{siteId:e,userId:t}])||0,i={namespace:c,key:d,value:(n+1).toString()},r={siteId:e};await(0,o.t)(t,i,r),s.E.invalidateQueries([h,{siteId:e,userId:t}])}return 0},p=()=>{const{data:e}=(()=>{const{data:e}=(0,i.PD)(),{data:t}=(0,r.xJ)(),n=!!e?.id&&!!t?.id;return(0,a.useQuery)([h,{siteId:e?.id,userId:t?.id}],(()=>g(e?.id,t?.id)),{cacheTime:864e5,staleTime:864e5,enabled:n})})(),{data:t}=(0,i.PD)(),{data:n}=(0,r.xJ)();return{onIncrement:(0,l.useCallback)((async()=>{t?.id&&n?.id&&await u(t?.id,n?.id)}),[t?.id,n?.id]),onGetCounter:(0,l.useCallback)((async()=>{t?.id&&n?.id&&await g(t?.id,n?.id)}),[t?.id,n?.id]),counterValue:e||0}}},16494:(e,t,n)=>{n.d(t,{c:()=>r}),n(74870);const i=()=>{const e=localStorage.getItem("HJAppcuesContentShown");return e?JSON.parse(e):[]},r=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=i();t&&n.includes(e)||window.Appcues&&(window.Appcues.show(e),t&&(n.push(e),localStorage.setItem("HJAppcuesContentShown",JSON.stringify(n))))}},15444:(e,t,n)=>{n.d(t,{F:()=>c});var i=n(55514),r=n(86599),a=n.n(r),o=n(75616),s=n(42365),l=n(44928);const c=()=>{var e;a().defaults.withCredentials=!0,a().defaults.baseURL=(0,i.G)(),(e=a()).interceptors.request.use((async e=>{const t=await(0,s.bH)(),n=(0,s.Nh)(t);return n&&(e.headers={...e.headers,...n}),e}),(e=>Promise.reject(e))),e.interceptors.response.use((e=>e),(async e=>{if(401===e?.response?.status){if((0,l.je)(window.location.pathname,window.location.search))return(0,l.M1)(),Promise.reject(e);if(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=(0,o.zj)("INSIGHTS",window.location.host);return(t===o.Fw.REVIEW||t===o.Fw.REVIEW_WEBAPP)&&Boolean(e.match("/saved_heatmaps"))}(e?.config?.url??""))return Promise.reject(e);await(0,s.yB)()}return Promise.reject(e)}))}},55130:(e,t,n)=>{n.d(t,{Y:()=>a,n:()=>r});var i=n(66867);const r=function(){let{zIndex:e=99}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=1500,n=Date.now()+t,r={startVelocity:30,spread:1500,ticks:100,zIndex:e},a=setInterval((()=>{const e=n-Date.now();if(e<=0)return void clearInterval(a);const o=e/t*20;(0,i.Z)({...r,particleCount:o,origin:{x:0,y:-.1}}),(0,i.Z)({...r,particleCount:o,origin:{x:.35,y:-.1}}),(0,i.Z)({...r,particleCount:o,origin:{x:.7,y:-.1}}),(0,i.Z)({...r,particleCount:o,origin:{x:1,y:-.1}})}),50)},a=(e,t)=>{const n={origin:{x:e,y:t||.7}};function r(e,t){(0,i.Z)({...n,...t,particleCount:Math.floor(200*e)})}r(.25,{spread:26,startVelocity:55}),r(.2,{spread:60}),r(.35,{spread:100,decay:.91,scalar:.8}),r(.1,{spread:120,startVelocity:25,decay:.92,scalar:1.2}),r(.1,{spread:120,startVelocity:45})}},77915:(e,t,n)=>{n.d(t,{i:()=>a});var i=n(1965),r=n(41218);const a=new class{containerKey="hotjar.sharedstorage";watchers=[];constructor(){i.Z.listen("sharedStorageModified",(e=>{const t=this.handleNotification(e);t&&this.notifyWatchers(t)}),!0),i.Z.listen("broadcastSharedStorageRequest",(()=>this.notify()),!0),i.Z.signal("broadcastSharedStorageRequest",void 0,!0)}notifyWatchers(e,t){this.watchers.forEach((n=>{const i=n[0],r=n[1];if((!t||r===t)&&i in e)try{r(e[i])}catch(e){}}))}notifyOtherTabs=e=>{i.Z.signal("sharedStorageModified",JSON.stringify(e),!0)};notify(){const e=r.xg.get(this.containerKey);e&&(this.notifyWatchers(e),this.notifyOtherTabs(e))}handleNotification(e){if(!e)return null;const t=JSON.parse(e);return r.xg.set(this.containerKey,t),t}get(e,t){const n=r.xg.get(this.containerKey)||{};return e in n?n[e]:t}set(e,t){if("__proto__"===e||"constructor"===e)return;const n=r.xg.get(this.containerKey)||{};n[e]=t,r.xg.set(this.containerKey,n),this.notify()}remove(e){const t=r.xg.get(this.containerKey)||{};e in t&&(delete t[e],r.xg.set(this.containerKey,t),this.notify())}onChange(e,t){this.watchers.push([e,t]);const n=r.xg.get(this.containerKey);n&&this.notifyWatchers(n,t)}}},12685:(e,t,n)=>{n.d(t,{O:()=>l,Y:()=>c});var i=n(86599),r=n.n(i),a=n(20387),o=n(27994),s=n(73132);const l="/api/dashboard/v1/sites";async function c(e){const t=e.groupBy===s.NF.FEEDBACK_SCORE||e.property===s.NF.FEEDBACK_SCORE,n=e.groupBy===s.NF.TEXT&&e.eventType===s.zL.MOUSE_CLICK,i=void 0!==e.eventType,c=`${l}/${e.siteId}/query${i?"/event":""}`,d={query:{session_filters:(0,a.L)(e.sessionFilters),operation:e.operation,group_by:e.groupBy,event_filters:e.eventFilters,limit:e.limit,level:e.level,windowed:e.windowed,event_type:e.eventType,property:e.property,tz_offset:-(new Date).getTimezoneOffset()}},h=(await r().post(c,d)).data;if(!h.meta.success)throw new Error(`Error retrieving quantz data: ${h?.errors?.join(", ")}`);return t?(0,o.Zy)(h):n?(0,o.G8)(h,e.limit):(0,o.AK)(h)}},27994:(e,t,n)=>{n.d(t,{$q:()=>a,AK:()=>g,G8:()=>p,Zy:()=>u});var i=n(43981),r=n(73132);function a(e){return{operation:e.operation,operations:e.operations,success:e.success,windowed:e.windowed,level:e.level,resolution:e?.resolution}}function o(e){return e.map((e=>({date:new Date(1e3*e[0]),value:e[1]})))}function s(e){return e.map((e=>({category:`${e[0]}`,value:e[1]??0})))}function l(e){return e.map((e=>({date:new Date(1e3*e[0]),value:null!==e[1]?e[1]+1:null})))}function c(e){return e.result_series?{resultSeries:e.result_series.map((e=>({key:`${e.key}`,values:o(e.values)}))),totalSeries:e.total_series?o(e.total_series):void 0,total:e.total??void 0}:{result:e.result,totalSeries:e.total_series?o(e.total_series):void 0,total:e.total??void 0}}function d(e){return e.result_series?{resultSeries:e.result_series.map((e=>({key:`${e.key}`,values:s(e.values)}))),total:e.total??void 0}:{result:e.result,total:e.total??void 0}}function h(e){return e.result_series?{resultSeries:e.result_series.map((e=>({key:`${e.key}`,values:l(e.values)}))),total:void 0!==e.total?e.total+1:void 0}:{result:e.result,total:e.total??void 0}}function g(e){const t=a(e.meta),n=e.meta.windowed?r.Rs.BY_DATE:r.Rs.BY_CATEGORY;switch(n){case r.Rs.BY_DATE:return{kind:n,meta:t,data:c(e.data)};case r.Rs.BY_CATEGORY:return{kind:n,meta:t,data:d(e.data)};default:throw new Error("Unknown type")}}function u(e){const t=a(e.meta);return t.operation===r.cm.COUNT?{kind:r.Rs.BY_CATEGORY,meta:t,data:(n=e.data,n.result_series?{resultSeries:n.result_series.map((e=>({key:`${e.key}`,values:s(e.values)}))),total:void 0!==n.total?n.total:void 0}:{result:n.result,total:n.total??void 0})}:{kind:r.Rs.BY_DATE,meta:t,data:h(e.data)};var n}function p(e,t){const n=a(e.meta),o=e.meta.windowed?r.Rs.BY_DATE:r.Rs.BY_CATEGORY;switch(o){case r.Rs.BY_DATE:{const r=e.data.result_series?.findIndex((e=>""===e.key));return void 0!==r&&r>=0?e.data.result_series?.splice(r,1):(0,i.Z)(t)||e.data.result_series?.length!==t||e.data.result_series?.splice(-1),{kind:o,meta:n,data:c(e.data)}}case r.Rs.BY_CATEGORY:{const r=e.data.result_series?.[0].values.findIndex((e=>""===e[0]));return void 0!==r&&r>=0?e.data.result_series?.[0].values.splice(r,1):(0,i.Z)(t)||e.data.result_series?.[0].values.length!==t||e.data.result_series?.[0].values.splice(-1),{kind:o,meta:n,data:d(e.data)}}default:throw new Error("Unknown type")}}},98870:(e,t,n)=>{n.d(t,{U:()=>s,j:()=>o});var i=n(66624),r=n(12685);const a=n(73132).dK.Tiny,o=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a;return{queryKey:`quantz-query-${JSON.stringify(e)}-${n}`,queryFn:()=>(0,r.Y)(e),cacheTime:n,retry:!1,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1,enabled:t}},s=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;return(0,i.useQuery)(o(e,t,n))}},73132:(e,t,n)=>{let i,r,a,o,s,l,c;n.d(t,{N3:()=>d,NF:()=>o,Rs:()=>c,TK:()=>a,cm:()=>i,dK:()=>l,sb:()=>r,zL:()=>s}),function(e){e.COUNT="count",e.AVERAGE="average",e.MIN="min",e.MAX="max",e.SESSION_COUNT="session_count",e.TIME_AVERAGE="time_average",e.CUMULATIVE_TIME_AVERAGE="cumulative_time_average"}(i||(i={})),function(e){e.SESSION="session",e.PAGE="page",e.EVENT="event"}(r||(r={})),function(e){e.HOUR="hour",e.DAY="day",e.WEEK="week",e.MONTH="month"}(a||(a={})),function(e){e.BROWSER="browser",e.COUNTRY_CODE="country_code",e.DEVICE="device",e.FEEDBACK_SCORE="feedback_score",e.IS_FIRST_SEEN="is_first_seen",e.OS="os",e.PAGE_COUNT="page_count",e.PAGE_URL="page_url",e.LANDING_PAGE_URL="landing_page_url",e.EXIT_PAGE_URL="exit_page_url",e.EVENT_NAME="name",e.DURATION="duration",e.ACTIVE_TIME="active_time",e.IS_BOUNCE="is_bounce",e.TEXT="text",e.PAGE_VISIT_DURATION="page_visit_duration",e.DROP_OFF="is_dropoff"}(o||(o={})),function(e){e.AUTOTAG_RECORDING="autotag_recording",e.MOUSE_CLICK="mouse_click",e.ERROR="error",e.PAGE_VISIT="page_visit"}(s||(s={})),function(e){e[e.Tiny=3e3]="Tiny",e[e.Small=3e5]="Small",e[e.Mid=9e5]="Mid"}(l||(l={})),function(e){e.BY_DATE="BY_DATE",e.BY_CATEGORY="BY_CATEGORY"}(c||(c={}));const d="other"},23852:(e,t,n)=>{let i,r,a,o,s;n.d(t,{Bh:()=>s,Gk:()=>a,kB:()=>o,kb:()=>i,tR:()=>r}),function(e){e.TRUE="1",e.FALSE="0"}(i||(i={})),function(e){e.DESKTOP="desktop",e.PHONE="phone",e.TABLET="tablet"}(r||(r={})),function(e){e.WINDOWS="Windows",e.MAC="Mac",e.ANDROID="Android",e.IOS="iOS",e.LINUX="Linux",e.UBUNTU="Ubuntu"}(a||(a={})),function(e){e.CHROME="Chrome",e.CHROMIUM="Chromium",e.SAFARI="Safari",e.FIREFOX="Firefox",e.INTERNET_EXPLORER="IE",e.EDGE="Edge",e.OPERA="Opera"}(o||(o={})),function(e){e.U_TURN="uturn",e.RAGE_CLICK="rageclick"}(s||(s={}))},55914:(e,t,n)=>{n.d(t,{v:()=>a});var i=n(75350),r=n(17556);const a={watched:i.kQ,relevanceScore:r.eQ}},17556:(e,t,n)=>{n.d(t,{DJ:()=>o,LC:()=>i,eQ:()=>r,n0:()=>s,yo:()=>a});const i={veryLow:"Very low",low:"Low",moderate:"Moderate",high:"High",veryHigh:"Very high"},r=Object.values(i),a={[i.veryLow]:"very-low",[i.low]:"low",[i.moderate]:"moderate",[i.high]:"high",[i.veryHigh]:"very-high"},o={0:i.veryLow,1:i.low,2:i.low,3:i.moderate,4:i.moderate,5:i.moderate,6:i.high,7:i.high,8:i.high,9:i.high,10:i.high,11:i.veryHigh,12:i.veryHigh,13:i.veryHigh,14:i.veryHigh,15:i.veryHigh,16:i.veryHigh,17:i.veryHigh,18:i.veryHigh,19:i.veryHigh,20:i.veryHigh,21:i.veryHigh,22:i.veryHigh,23:i.veryHigh,24:i.veryHigh,25:i.veryHigh,26:i.veryHigh,27:i.veryHigh,28:i.veryHigh,29:i.veryHigh,30:i.veryHigh,31:i.veryHigh,32:i.veryHigh,33:i.veryHigh,34:i.veryHigh,35:i.veryHigh,36:i.veryHigh,37:i.veryHigh,38:i.veryHigh,39:i.veryHigh,40:i.veryHigh},s=Object.keys(o).reduce(((e,t)=>{const n=Number(t);return e[o[n]]||(e[o[n]]=[]),e[o[n]].push(n),e}),{})},58680:(e,t,n)=>{n.d(t,{Hy:()=>i,U3:()=>r,ri:()=>a});const i=["action_count","relevance_score","visitor_uuid","referrer.raw","first_page_path.raw","last_page_path.raw","page_count","duration","device","browser","os","created","country_code","frustration_score"],r=e=>e.replaceAll(/_|\./g,"-"),a={"referrer.raw":"referrer","first_page_path.raw":"landing_page_url","last_page_path.raw":"exit_page_url"}},71969:(e,t,n)=>{n.d(t,{e:()=>a});var i=n(86422);const r=1646697600,a=e=>{if(!e)return!1;const t=e.AND?e.AND:[e],n=t.find((e=>e.DAYS_AGO));if(n){const e=n.DAYS_AGO;if(Math.round(Date.now()/1e3)-86400*e.created<=r)return!0}const a=t.find((e=>e.RANGE_IN&&i.w$.created in e.RANGE_IN));return!!(a&&a.RANGE_IN&&a.RANGE_IN.created[0]<=r)}},46962:(e,t,n)=>{n.d(t,{V:()=>s});var i=n(86599),r=n.n(i),a=n(41867),o=n(616);async function s(e,t){if(0===e.length)return!1;const n={recording_ids:e.map((e=>e.id)),recording_es_timestamps:e.map((e=>e.created)),source_url:(0,o.Gr)()};return 200===(await r().post(`/api/v1/sites/${t??(0,a.E)()}/recordings/bulk-deletion`,n)).status}},65412:(e,t,n)=>{n.d(t,{t:()=>l});var i=n(95851),r=n(16346),a=n(68212),o=n(91995);const s=(0,i.Z)("div",{target:"e11rfc7c0"})({name:"153v950",styles:"white-space:pre-line;& strong{font-weight:500;}"}),l=()=>{const{t:e}=(0,r.$G)();return(0,o.tZ)(a.mD,{title:e("common:player.scale-trial-popover-title"),content:(0,o.tZ)(s,{children:(0,o.tZ)(r.cC,{i18nKey:"common:player.scale-trial-popover-content",components:[(0,o.tZ)("strong",{children:"February 28, 2023"})]})}),icon:"info",withCloseButton:!1,trigger:"mouseenter focus",children:(0,o.tZ)(a.Ct,{kind:"custom",size:"s",color:a.TV.BRAND_COLORS.ember_700,children:e("common:player.scale-trial")})})}},22295:(e,t,n)=>{n.d(t,{S:()=>i});const i=e=>{const{recordings:t,selectedRecordings:n,setSelectedRecordings:i,setSelectedAllRecordings:r,setRecordings:a}=e.getState();r(!1),n.length>0&&(i([]),t.forEach((e=>e.selected=!1)),a(t))}},21764:(e,t,n)=>{n.d(t,{Z7:()=>r,aE:()=>a,vM:()=>s});var i=n(17556);const r=e=>e.length===i.eQ.length;function a(e){const{relevanceScore:t}=e;return!t||r(t)?null:{EQUAL:{relevance_score:e.relevanceScore.reduce(((e,t)=>e.concat(i.n0[t])),[])}}}const o=[a,function(e){return null===e.watched||"all"===e.watched?null:{EQUAL:{watched:"watched"===e.watched}}}];function s(e){const t=o.reduce(((t,n)=>{const i=n(e);return i?t.concat(i):t}),[]);return 0===t.length?null:t}},43554:(e,t,n)=>{n.d(t,{q:()=>a});var i=n(68733),r=n(21764);const a=(e,t)=>{const n=function(e,t){const n=(0,r.vM)(t);if(!n)return e;if(e.AND&&Array.isArray(e.AND)){const t=(0,i.Z)(e);return t.AND?.push(...n),t}return{AND:[e,...n]}}(e,t);return JSON.stringify(n)}},25982:(e,t,n)=>{n.d(t,{T:()=>k});var i=n(43269),r=n(40813),a=n(86599),o=n.n(a),s=n(39269),l=n(91086),c=n(43554);const d=new class{shouldTrack=!0;set shouldTrackSegmentView(e){this.shouldTrack=e}get shouldTrackSegmentView(){return this.shouldTrack}};var h=n(35768),g=n(25356),u=n(65725),p=n(55658),m=n(99930),f=n(31739),v=n(71969),x=n(58680),_=n(75350),T=n(41867),y=n(94102),w=n(77024),b=n(88151),S=n(36312);let Z=!0;const k=async e=>{(0,l.fj)({name:s.o.RECORDINGS_LIST_FETCH_DELAY,startMark:s.o.RECORDINGS_LIST_SEGMENTS_FETCH_TIME}),(0,l.B1)(s.o.RECORDINGS_LIST_FETCH_START);const{site:t,jsonFilters:n,itemsPerPage:a,hotjarFilters:k,currentPage:E,currentSegment:C,sortBy:I,trackPageChange:R,previousPage:A,recordings:O,retrieveHighlightsCommentsAndLabels:V,retrieveTotalRecordingsCount:N,setAutomatedFilterUpdateFlag:D,setSearching:L,setEffectiveDateRangeFilter:P,setShowNotWatchedPopoverInfo:B,setJsonFilters:H,setRecordings:U,setRecordingsRequestTimeRange:$,setRecordingMode:M,setRecordingSettings:z,setRecordingsFetchedWithV3Api:G,setSortBy:j,setTotalHits:X,setTotalRecordingsCount:F,setTrackPageChange:W}=e.getState(),q=(0,f.yy)("recordings.list.clickhouse",t)&&!(0,v.e)(n),K=q?"/api/v3/sites/":"/api/v2/sites/";G(q);const Y=(0,b.S)(n,k),Q=d.shouldTrackSegmentView?C?.id:null,J=a,ee=E>1?J*(E-1):0,te=!(0,i.Z)(Y,h.ZS.filters);L(!0),(0,y.Yy)(n);let ne,ie={action:"search",is_initial_load:Z&&!te,sort_by:I,source:"recordings-list",tz_offset:(0,w.u)(),offset:ee,size:J};if(Q&&(ie={...ie,segment_id:Q,segment_type:h.l8,state_name:(0,g.W)()??"",tool:"Recordings",url:window.location.href.replace(window.location.origin,"")}),q){if(ie={...ie,global_filters:JSON.stringify(Y)},k.watched!==_.kQ&&(ie={...ie,watched:k.watched===_.o6}),N(),I){const e=I.replace(/^-/,"");x.ri[e]&&(ie.sort_by=I.replace(e,x.ri[e]))}I?.includes("engagement_score")&&(ie.sort_by=I.replace("engagement","relevance"))}else{if(I?.includes("frustration_score")||I?.includes("engagement_score")){const e="-relevance_score";j(e),(0,S.T)(e),ie.sort_by=e}ie={...ie,json_query_string:(0,c.q)(n,k)}}try{ne=(await o().post(`${K}${(0,T.E)()}/recordings`,ie)).data}catch(e){return U([]),L(!1),X(0),p.X.onError(ne),[]}if(Z){let t=null;if(ne.effective_query){const n=JSON.parse(ne.effective_query);t=(0,y._4)(n),null!=t&&(D(!0),H(n),(0,y.vJ)(e,t.toString()))}P({DAYS_AGO:{created:t??(0,y._4)(n)}})}if(Z=!1,d.shouldTrackSegmentView=!0,0===O.length)z({excludeMinimalActivity:ne.recording_exclude_minimal_activity,excludeShortRecordings:ne.recording_exclude_short,recordingCaptureKeystrokes:ne.recording_capture_keystrokes,recordingTargeting:(0,u.summary)(ne.recording_targeting_rules)}),M(ne.recording_mode),(0,y.Wd)()||"not_watched"!==k.watched||(0,y.zO)()||B(!0);else if(R){const e=(0,r.Z)(O.map((e=>e.id)),ne.recordings.map((e=>e.id)));(0,m.ob)({name:"pagination_button",uiPosition:"recording_list_pagination",groupData:{account_id:t.account.id,organization_id:t.organizationId,site_id:t.id},data:{current_page:E,number_repeated_recordings:e.length,previous_page:A}}),W(!1)}if(U(ne.recordings),X(ne.total_hits),ne.date_range&&2===ne.date_range.length){const[e,t]=ne.date_range,n=Math.floor(Date.now()/1e3);$([e,Math.min(t,n)])}if(q){const{totalRecordingsCount:t}=e.getState();0===t&&F(ne.total_hits)}else F(ne.total_recordings_count);return(0,l.fj)({name:s.o.RECORDINGS_LIST_FETCH_TIME,startMark:s.o.RECORDINGS_LIST_FETCH_START,addMark:!0}),L(!1),V(),ne.recordings}},94102:(e,t,n)=>{n.d(t,{Wd:()=>x,Yy:()=>p,_4:()=>m,vJ:()=>f,vS:()=>v,zO:()=>_});var i=n(41638),r=n(36365),a=n(91998),o=n(20387),s=n(89085),l=n(26169),c=n(17556),d=n(89635),h=n(41218),g=n(65505),u=n(54227);function p(e){const t=(0,r.rm)(e).filterList.map((e=>({...e,type:e.kind})));s.G.tagRepeatedFilters(t)}function m(e){if(e.DAYS_AGO)return e.DAYS_AGO.created;let t;return e.AND&&(t=e.AND.find((e=>!!e.DAYS_AGO))),t?t.DAYS_AGO.created:void 0}function f(e,t){const{jsonFilters:n}=e.getState(),s=(0,r.rm)(n);s.dateRange=0==+t?{type:a.A.RELATIVE,unit:a.u.HOURS,amount:24}:365==+t?{type:a.A.RELATIVE,unit:a.u.MONTHS,amount:12}:{type:a.A.RELATIVE,unit:a.u.DAYS,amount:+t};const l=(0,o.L)(s),c=JSON.stringify(l),d=new URLSearchParams(window.location.search);d.delete("segment"),d.set("filters",c),window.history.replaceState(null,"",`${window.location.pathname}?${d.toString()}`.replaceAll("%3A",":")),(0,i._)(e,l)}function v(e){const{site:t,hotjarFilters:n,recordings:i,recordingSettings:{excludeMinimalActivity:r,excludeShortRecordings:a,recordingCaptureKeystrokes:o,recordingTargeting:s},totalHits:h}=e.getState(),p=[];r&&p.push("Only click & scroll sessions"),a&&p.push("Only 30s+ sessions"),o&&p.push("Record keystroke data");const m=[];s.urlRules.length?m.push("Visit a specific page"):m.push("Visit any page"),s.triggerRules.length&&m.push("JavaScript trigger fires");const f=(0,g.Z)(s.urlRules.map((e=>e.match_operation))),v=function(e,t,n){const i=(0,u.Z)(e,(e=>n[e.relevance_score]));return Object.values(t).reduce(((e,t,n)=>(e[n]=i[t]||0,e)),[])}(i,c.LC,c.DJ);let x={};f?.length>0&&(x={recording_snapshot_targeting_url_options:f});const _={number_recordings_in_list:h,recording_snapshot_options:p,recording_snapshot_targeting:m,recordings_list_actions_view_filter:n.watched,relevance_score_list:v,...(0,d.z6)(t)};(0,l.track)("Recording List Viewed",{..._,...x})}function x(){return!!h.mM.get("hotjarFiltersPreferences")}function _(){return!!h.mM.get("isPopoverNotWatchedSeen")}},21610:(e,t,n)=>{n.d(t,{L:()=>a,y:()=>r});var i=n(17556);const r=e=>{const t=i.DJ[e];return`common:recordings.relevance-score.${i.yo[t]}`},a=e=>`common:recordings.relevance-score.${i.yo[e]}`},77024:(e,t,n)=>{function i(){return-(new Date).getTimezoneOffset()}n.d(t,{u:()=>i})},527:(e,t,n)=>{n.d(t,{L6:()=>Ue,Lx:()=>Ie,ro:()=>me,Z7:()=>Ye.Z7,QO:()=>Ze,MX:()=>pe,G6:()=>k,hV:()=>D,SK:()=>r.S,VG:()=>we,kz:()=>R,Gb:()=>xe,tR:()=>Me,aE:()=>Ye.aE,yD:()=>ze.y,LW:()=>ze.L,II:()=>K,G2:()=>Ne,ez:()=>ye,j2:()=>oe,Uu:()=>ge,dZ:()=>ke,sW:()=>de,fL:()=>Ee,Y7:()=>ue,Gt:()=>be,Al:()=>L,Vj:()=>fe,lg:()=>se,M9:()=>a,f1:()=>_e,dc:()=>i,Pd:()=>F,Nw:()=>Se,yc:()=>Ae,OR:()=>Te,VR:()=>Q,lp:()=>We,xY:()=>qe,jb:()=>Fe,DY:()=>Ke});const i=(e,t)=>{const{recordings:n,setRecordings:i}=e.getState();i(n.map((e=>e.watched||t!==e.id?e:{...e,watched:!0})))};var r=n(22295);const a=e=>{const{recordings:t,selectedRecordings:n,setSelectedAllRecordings:i,setSelectedRecordings:r,setRecordings:a}=e.getState();i(!0),r([]),t.forEach((e=>{e.selected=!0,n.push({id:e.id,created:e.created_epoch_time})})),a(t),r(n)};var o=n(25982),s=n(41638),l=n(83800),c=n(55658),d=n(14074),h=n(72963),g=n(68212),u=n(39283),p=n(30157),m=n(91995);const f=(0,p.O)((function(e){let{selectedRecordings:t,hasSelectedAllRecordings:n,totalRecordings:i,onCancel:r,onSubmit:a}=e;const o=1===t?"Delete recording?":`Delete ${n?`all ${i}`:t} recordings?`;return(0,m.BX)(g.u_,{onClose:a,contentLabel:o,isOpen:!0,size:"s",children:[(0,m.tZ)(g.u_.Header,{title:o}),(0,m.tZ)(g.u_.Body,{children:(0,m.tZ)("p",{children:"Deleting recordings is permanent and cannot be undone."})}),(0,m.BX)(g.u_.Footer,{children:[(0,m.tZ)(g.zx,{kind:"ghost",onClick:()=>r(),children:"Cancel"}),(0,m.tZ)(g.zx,{kind:"danger",onClick:()=>a(),children:"Yes, delete"})]})]})}));var v=n(46962),x=n(86599),_=n.n(x),T=n(75350),y=n(88151),w=n(41867),b=n(77024),S=n(59242),Z=n(30658);const k=e=>{const t=window.settings?.recordings?.total_hits_upper_bound||1e4,{site:n,jsonFilters:i,hotjarFilters:a,selectedRecordings:s,selectedAllRecordings:l,totalHits:g,totalRecordingsCount:p,recordings:m,setSelectedRecordings:x,setSelectedAllRecordings:k,setRecordings:E,setTotalHits:C,setTotalRecordingsCount:I}=e.getState();return new Promise((R=>{(async(e,t,n,i)=>{f({selectedRecordings:e,hasSelectedAllRecordings:t,totalRecordings:n}).then(i).catch(u.Z)})(s.length,l,((e,t)=>{const n="string"==typeof e?parseInt(e,10):e;return isNaN(n)?e:n>=t?(0,h.TY)(t)+"+":(0,h.TY)(n)??0})(g,t),(async()=>{l?async function(e,t){if(!e)return!1;const n={global_filters:JSON.stringify((0,y.S)(e,t)),tz_offset:(0,b.u)()};return t.watched!==T.kQ&&(n.watched=t.watched===T.o6),200===(await _().post(`/api/v1/sites/${(0,w.E)()}/recordings/query-deletion`,n)).status}(i,a).then((t=>{t?((0,r.S)(e),k(!1),E([]),C(0),window.dispatchEvent(new CustomEvent("hjNotification",{detail:{cls:"notification-box-info",message:"Recordings queued for deletion",timeout:6e3}})),R(!0)):(window.dispatchEvent(new CustomEvent("hjNotification",{detail:{cls:"notification-box-error",message:"Could not delete recordings",timeout:6e3}})),R(!1))})).catch((e=>{c.X.onError(e),R(!1)})):(0,v.V)(s).then((async i=>{if(i){const i=p-s.length;if(x([]),E((0,S.Z)(m,(function(e){return!(0,Z.Z)(s,{id:e.id,created:e.created_epoch_time})}))),I(i),g<t){const e=g-s.length;C(e)}g>p&&C(p),window.dispatchEvent(new CustomEvent("hjNotification",{detail:{cls:"notification-box-info",message:"Recordings deleted",timeout:6e3}})),d.o(n.id),setTimeout((()=>(0,o.T)(e)),0),R(!0)}else window.dispatchEvent(new CustomEvent("hjNotification",{detail:{cls:"notification-box-error",message:"Could not delete recordings",timeout:6e3}})),R(!1)})).catch((e=>{c.X.onError(e),R(!1)}))}))}))};var E=n(86781),C=n(73646),I=n(43554);const R=(e,t)=>{const{jsonFilters:n,hotjarFilters:i,sortBy:r,showExportBanner:a,setShowExportBanner:o,setExportBannerMessage:s,setExportBannerKind:l}=e.getState(),c={format:t,json_query_string:(0,I.q)(n,i),sort_by:r?.replace(/frustration|engagement/i,"relevance"),tz_offset:(0,b.u)()},d="Something went wrong. Please try again, or contact support.";a&&o(!1),_().post(`/api/v2/sites/${(0,w.E)()}/recordings/export`,c).then((e=>{let{data:t}=e;if(t.success){const e=E.E.getQueryData(C.WN)?.email;s(`Your download link will be sent to ${e} when its ready.`),l("success")}else s(t.error||d),l("danger")}),(()=>{s(d),l("danger")})).finally((()=>{o(!0)}))};var A=n(55794),O=n(18932),V=n(16431);const N=(e,t)=>t.find((t=>t.id===e&&0===t?.unsupported_features?.length)),D=(e,t)=>{const{site:n,currentSegment:i,segments:r,setCurrentSegment:a,setSegments:o}=e.getState();O.Od(n.id,t.id).then((()=>{if(o(r.filter((e=>e.id!==t.id))),V.tagRecording("deleted segment"),window.dispatchEvent(new CustomEvent("hjNotification",{detail:{cls:"notification-box-success",message:`Deleted segment "${t.name}"`,timeout:6e3}})),t.id===i?.id){const{segments:t}=e.getState(),n=N(-1,t);if(!n)return;const i=n.filters;a(n),(0,s._)(e,i)}})).catch((e=>{A.Tb(e,{contexts:{section:{name:"Deleting segment"}}}),window.dispatchEvent(new CustomEvent("hjNotification",{detail:{cls:"notification-box-error",message:`Unable to delete segment "${t.name}"`,timeout:6e3}}))}))},L=e=>{const{site:t,setRecordings:n}=e.getState();d.o(t?.id),n([]),(0,o.T)(e)};var P=n(20387);const B=(e,t,n)=>{const{loaded:i,segments:r,setCurrentPage:a,setCurrentSegment:o}=e.getState(),l=(0,P.L)(t);a(1);const c=new URLSearchParams(window.location.search),d=c.toString(),h=!c.get("filters")&&!c.get("segment");if(n)c.set("segment",n.toString()),c.delete("filters"),o(N(n,r));else{const e=JSON.stringify(l);c.delete("segment"),c.set("filters",e),o(null)}d!==c.toString()&&window.history[h?"replaceState":"pushState"](null,"",`${window.location.pathname}?${c.toString()}`.replaceAll("%3A",":")),i&&(0,s._)(e,l)};var H=n(41218),U=n(89085),$=n(75360),M=n(36365),z=n(71014),G=n(31327),j=n(48869),X=n(12964);const F=(e,t)=>{const{currentPage:n,itemsPerPage:i,recordings:r,recordingsRequestTimeRange:a,sortBy:o,site:s,jsonFilters:l,hotjarFilters:c}=e.getState(),d=E.E.getQueryData(C.WN),h=(0,M.rm)(l);U.G.incrementWatched(),(0,$.nP)(s.id,d?.id??0),H.mM.set("recordingFiltersUiFormat",h),c&&c.watched!==T.kQ?H.mM.set(j.ZU,r.map((e=>(0,G.N)(e)))):(H.mM.set(j._9,{recordingsRequestTimeRange:a,hotjarFilters:c,jsonFilters:l,sortBy:o}),H.mM.set(j.Yn,(n-1)*i+r.findIndex((e=>{let{id:n}=e;return n===t.id})))),H.mM.remove("recordingFilters");const g=r.filter((e=>e.watched)).map((e=>e.id));H.mM.set(j.oL,g),window.open((0,X.t)(t,"recordings-list"),"_blank"),z.zO(s,d?.id),H.mM.get("shouldShowNotWatchedByDefault")||H.mM.set("shouldShowNotWatchedByDefault",!0)};n(74870);var W=n(58680),q=n(36312);const K=e=>{const{setSortBy:t,setSortInitialOption:n,setSortInitialReverse:i}=e.getState(),r=new URLSearchParams(window.location.search).get("sort_by"),a=H.mM.get("recordingSortingPreferences");if(!r&&!a)return void t("-relevance_score");const o=Y(r)||Y(a);if(!o)return void t("-relevance_score");const s=o.sortBy?o.sortBy:"-relevance_score";t(s),n({"first_page_path.raw":"start_path",created:"created_epoch_time"}[o.sortOption]||o.sortOption),i(o.reverse),(0,q.T)(s)};function Y(e){if(!e)return!1;const t=e.substring(e.indexOf("-")+1),n=e.startsWith("-");return!!W.Hy.includes(t)&&{reverse:n,sortOption:t,sortBy:e}}const Q=(e,t,n)=>{const{recordings:i,selectedRecordings:a,selectedAllRecordings:o,setSelectedAllRecordings:s,setSelectedRecordings:l}=e.getState();o?(s(!1),(0,r.S)(e),Q(e,i.filter((e=>-1===t.indexOf(e))),!0)):t.forEach((e=>{const t={id:e.id,created:e.created_epoch_time};if(n&&(e.selected=!e.selected),e.selected)a.push(t);else{const t=a.findIndex((t=>t.id===e.id));a.splice(t,1)}l(a)}))};var J=n(91086),ee=n(31739),te=n(13199),ne=n(39269),ie=n(60872),re=n(34447),ae=n(92891);const oe=async e=>{const{columns:t,setColumns:n,setTrackingCode:i}=e.getState();(0,J.B1)(ne.o.RECORDINGS_LIST_SITE_FETCH_START);const r=(e=>{const{setSite:t}=e.getState(),n=(0,w.E)(),i=E.E.getQueryData(ae.jS).sites.find((e=>e.id===parseInt(n,10)));return t(i),i})(e);(0,J.fj)({name:ne.o.RECORDINGS_LIST_SITE_FETCH_TIME,startMark:ne.o.RECORDINGS_LIST_SITE_FETCH_START});const a=(0,ee.yy)("filters.referrer_url",r);n({...t,referrer_url:{label:"Referrer URL",show:a,isDisabled:!a,showInPanel:!0}}),i((0,te.y)(r.lastData)),d.o(r.id),null!==H.mM.get("playbacksSurveyPromptDismissed")&&H.mM.remove("playbacksSurveyPromptDismissed"),null!==H.mM.get("playbacksSurveyPromptInVariant")&&H.mM.remove("playbacksSurveyPromptInVariant"),null!==H.xg.get("playbacksSurveyPromptPostponed")&&H.xg.remove("playbacksSurveyPromptPostponed"),(async e=>{(0,J.B1)(ne.o.RECORDINGS_LIST_SEGMENTS_FETCH_START);const{site:t,setJsonFilters:n,setLoaded:i,setSegments:r,setCurrentSegment:a}=e.getState();let s=(0,ie.K)(t);if(!s)try{s=await(0,ie.B)(t)}catch{s=[]}(0,J.fj)({name:ne.o.RECORDINGS_LIST_SEGMENTS_FETCH_TIME,startMark:ne.o.RECORDINGS_LIST_SEGMENTS_FETCH_START,addMark:!0});const{filtersInUiFormat:l}=(0,re.dQ)(s);n((0,P.L)(l)),r(s);const c=new URLSearchParams(window.location.search);if(!c.get("filters")){const e=parseInt(c.get("segment")||"",10)||-1;a(N(e,s))}await(0,o.T)(e),i(!0)})(e)},se=(e,t)=>{const{setHotjarFilters:n}=e.getState();n(t),H.mM.set("hotjarFiltersPreferences",t),(0,l.F)(e),(0,r.S)(e)};var le=n(43269),ce=n(25356);const de=(e,t)=>{const n=(0,ce.W)();if("playbacks"!==n&&"playbacks.list"!==n)return;const{sortBy:i,loaded:r,jsonFilters:a,currentSegment:o,segments:l,setCurrentSegment:c}=e.getState();if(r){const n=new URLSearchParams(window.location.search),i=n.get("filters"),r=n.get("segment");if(i){const t=JSON.parse(i);!o&&(0,le.Z)(a,t)||(c(null),(0,s._)(e,t))}else if(r){const n=parseInt(r,10)||-1,i=N(n,l);if(i){const n=i.filters;o&&(0,le.Z)(a,n)||(c(i),(0,s._)(e,n),t(),Ie("list"))}else c(null)}}(0,q.T)(i)};var he=n(35768);const ge=e=>{const{site:t}=e.getState();t&&(E.E.invalidateQueries([he.bO,{siteId:t.id}]),(0,ie.B)(t).then((t=>{const{currentSegment:n,setSegments:i,setCurrentSegment:r}=e.getState();i(t),n&&r(N(n.id,t)??null)})))},ue=(e,t,n)=>{const{setSortBy:i}=e.getState(),r=(n?"-":"")+({start_path:"first_page_path.raw",created_epoch_time:"created"}[t]||t);i(r),(0,q.T)(r),(0,l.F)(e)},pe=()=>{const e="playbacksConfigColumnsVisibility";H.mM.get(e)&&H.mM.remove(e)},me=(e,t)=>{const{site:n}=e.getState();n&&(E.E.invalidateQueries([he.bO,{siteId:n.id}]),(0,ie.B)(n).then((n=>{const{setSegments:i,setCurrentSegment:r}=e.getState();if(i(n),t){r(N(t.id,n)??null);const e=new URLSearchParams(window.location.search);e.set("segment",t.id.toString()),e.delete("filters"),window.history.pushState(null,"",`${window.location.pathname}?${e.toString()}`.replaceAll("%3A",":"))}})))},fe=(e,t)=>{const{setColumns:n}=e.getState(),i=Object.keys(t),r={};n(t),i.forEach((e=>{r[e]=t[e].show})),H.mM.set("playbacksColumnsVisibilityState",r)};var ve=n(17556);const xe=e=>{const{setHotjarFilters:t}=e.getState(),n=[T.kQ,T.o6,T.pS],i=H.mM.get("hotjarFiltersPreferences");i&&(n.includes(i.watched)||(i.watched=T.kQ),i.relevanceScore&&i.relevanceScore.every((e=>ve.eQ.includes(e)))||(i.relevanceScore=[...ve.eQ]),t(i))},_e=e=>{const{columns:t,setColumns:n}=e.getState(),i=H.mM.get("playbacksColumnsVisibilityState");if(!i)return;const r=Object.keys(i);r.every((e=>!!t[e]))?(r.forEach((e=>{t[e].show=i[e]||!1})),n(t)):H.mM.remove("playbacksColumnsVisibilityState")},Te=e=>{const{selectedRecordings:t,recordings:n}=e.getState();t.length>0?(0,r.S)(e):Q(e,n,!0)},ye=e=>{const{setShowExportBanner:t}=e.getState();t(!1)},we=e=>{const{setShowNotWatchedPopoverInfo:t}=e.getState();t(!1),H.mM.set("isPopoverNotWatchedSeen",!0)},be=e=>{const{addFilterTippyInstance:t}=e.getState();t&&t.open()},Se=(e,t)=>{const{setEditedSegment:n}=e.getState();n(t)},Ze=e=>{const{setEditedSegment:t}=e.getState();t(null)},ke=(e,t)=>{const{setItemsPerPage:n}=e.getState(),i="string"==typeof t?t:t.toString(),r=parseInt(i,10);n(r),H.mM.set("recordingsItemsPerPage",r)},Ee=(e,t)=>{const{currentPage:n,setCurrentPage:i,setPreviousPage:r}=e.getState();r(n),i(t),Ce(e)},Ce=e=>{const{setTrackPageChange:t}=e.getState();t(!0),(0,o.T)(e)},Ie=e=>{const t=new URLSearchParams(window.location.search);t.get("view")||(t.append("view",e),Re(t))},Re=e=>{window.history.replaceState&&window.history.replaceState(null,"",`${window.location.pathname}?${e.toString()}`.replaceAll("%3A",":"))},Ae=(e,t,n,i)=>{t?Oe(n):Ve(e,i)},Oe=e=>{Ie("list"),e()},Ve=(e,t)=>{const{effectiveDateRangeFilter:n}=e.getState(),i=n||he.ZS.filters;(()=>{const e=new URLSearchParams(window.location.search);e.delete("view"),Re(e)})(),B(e,(0,M.rm)(i)),t()},Ne=(e,t,n,i,r)=>{B(e,t,r),n&&Oe(i)};var De=n(54520),Le=n(86422);const Pe={action:"search",is_initial_load:!1,source:"recordings-widget",tz_offset:(0,b.u)(),offset:0,size:20},Be={[Le.Wd.DAYS_AGO]:{[Le.w$.created]:0}},He={[Le.Wd.DAYS_AGO]:{[Le.w$.created]:7}},Ue={RELEVANT:{widgetKey:"relevant",filters:Be,sortBy:"-relevance_score"},ENGAGED:{widgetKey:"engaged",filters:{[Le.D4.AND]:[He,{[Le.Wd.EQUAL]:{relevance_score:Array.from({length:20},((e,t)=>t+1))}}]},sortBy:"-created"},RAGE_CLICKS:{widgetKey:"rage-clicks",filters:{[Le.D4.AND]:[He,{[Le.Wd.EQUAL]:{[Le.w$.rageclick]:!0}}]},sortBy:"-created"},UTURNS:{widgetKey:"uturns",filters:{[Le.D4.AND]:[He,{[Le.Wd.EQUAL]:{[Le.w$.uturn]:!0}}]},sortBy:"-created"}},$e=async e=>{let{filters:t,sortBy:n,widgetKey:i}=e;const r=(0,w.E)(),a={...Pe,sort_by:n,global_filters:JSON.stringify(t)},{data:o}=await E.E.fetchQuery(["recordings-overview",i],(()=>_().post(`/api/v3/sites/${r}/recordings`,a).catch((()=>Promise.resolve({data:{res:[]}})))));return(0,De.u)(o)},Me=e=>{const{setOverviewData:t,setWidgetsLoaded:n}=e.getState();Promise.all([$e(Ue.RELEVANT),$e(Ue.ENGAGED),$e(Ue.RAGE_CLICKS),$e(Ue.UTURNS)]).then((e=>{let[i,r,a,o]=e;t({recordingsRelevant:i,recordingsWithRageClicks:a,recordingsEngaged:r,recordingsWithUturns:o}),n(!0)}))};var ze=n(21610),Ge=n(26169),je=n(89635);const Xe=()=>window.location.pathname+window.location.search,Fe=(e,t,n)=>{(0,Ge.track)("Recordings Overview Viewed",{...(0,je.z6)(e),user_id:t,url_event_was_triggered_on:Xe(),...n})},We=(e,t,n)=>{(0,Ge.track)("Element Clicked",{url_event_was_triggered_on:Xe(),user_id:t,element_name:"Play Recording",ui_position:`${n.title}_${n.renderPosition}`,...(0,je.z6)(e)})},qe=(e,t,n)=>(0,Ge.track)("Element Clicked",{url_event_was_triggered_on:Xe(),user_id:t,element_name:"Card Footer Button",ui_position:`Recordings Overview - ${n}`,...(0,je.z6)(e)}),Ke=(e,t,n)=>{(0,Ge.track)("Element Clicked",{element_name:"Recordings View Toggle",ui_position:"Recording View",url_event_was_triggered_on:Xe(),user_id:t,state_event_was_triggered_on:n,...(0,je.z6)(e)})};var Ye=n(21764)},41638:(e,t,n)=>{n.d(t,{_:()=>a});var i=n(22295),r=n(83800);const a=(e,t)=>{const{automatedFilterUpdateFlag:n,setAutomatedFilterUpdateFlag:a,setJsonFilters:o}=e.getState();o(t),n?a(!1):((0,r.F)(e),(0,i.S)(e))}},36312:(e,t,n)=>{n.d(t,{T:()=>r});var i=n(41218);const r=e=>{const t=new URLSearchParams(window.location.search);t.get("sort_by")!==e&&(t.set("sort_by",e),window.history.pushState(null,"",`${window.location.pathname}?${t.toString()}`.replaceAll("%3A",":"))),i.mM.get("recordingSortingPreferences")!==e&&i.mM.set("recordingSortingPreferences",e)}},83800:(e,t,n)=>{n.d(t,{F:()=>r});var i=n(25982);const r=e=>{const{loaded:t,setSearching:n,setRecordings:r}=e.getState();t&&(r([]),n(!0),(0,i.T)(e))}},75350:(e,t,n)=>{n.d(t,{kQ:()=>a,o6:()=>r,pS:()=>i});const i="not_watched",r="watched",a="all"},48869:(e,t,n)=>{n.d(t,{ES:()=>d,K6:()=>h,Kp:()=>g,PZ:()=>l,RU:()=>u,Yn:()=>r,ZU:()=>s,_9:()=>a,gK:()=>i,jm:()=>o,oL:()=>c});const i=15,r="recordingIndex",a="recordingSearchContext",o="recordingsFragment",s="recordingsList",l="recordingId",c="watchRecrodingsIdsList",d="playlistTogglePreference",h=1,g="/api/v2/sites",u="/api/v3/sites"},31327:(e,t,n)=>{n.d(t,{N:()=>i});const i=e=>({id:e.id,duration:e.duration,date:e.created_epoch_time,watched:e.watched})},88151:(e,t,n)=>{n.d(t,{S:()=>r});var i=n(527);const r=(e,t)=>{const n=(0,i.aE)(t);return n?e.AND&&Array.isArray(e.AND)?{AND:e?.AND?.concat([n])}:{AND:[e,n]}:e}},41867:(e,t,n)=>{n.d(t,{E:()=>i}),n(74870);const i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.pathname;return e.includes("sites/")?e.split("sites/")[1].split("/")[0]:null}},12964:(e,t,n)=>{n.d(t,{t:()=>i});const i=(e,t,n,i,r)=>{const a=new window.URL(e.url);if(t&&a.searchParams.append("opener",t),n&&e.public_url){const t=e.public_url.slice(e.url.length).split("=")[1];t&&(a.searchParams.delete("workspace_id"),a.searchParams.append("token",t))}if(Number.isInteger(i)&&a.searchParams.append("startTime",String(i)),r)for(const e in r)a.searchParams.append(e,String(r[e]));return(e=>e.replace(/https?:\/\/.*\.com/,""))(a.href)}},25356:(e,t,n)=>{n.d(t,{W:()=>a});var i=n(79400);const r=/\/(?<hasSites>sites)\/\d+\/playbacks(?:\/list)?/i,a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.pathname;const t=e.match(r);return t?i.LIST.name:null}},38101:(e,t,n)=>{n.d(t,{B:()=>i});const i=e=>{if(!e)return"unknown";const t=e.toLowerCase();return t.indexOf("ie")>-1?"ms_ie":t.indexOf("android")>-1?"android":t.indexOf("chrome")>-1?"chrome":t.indexOf("chromium")>-1?"chromium":t.indexOf("blackberry")>-1?"blackberry":t.indexOf("firefox")>-1?"firefox":t.indexOf("edge")>-1?"edge":t.indexOf("opera")>-1?"opera":t.indexOf("safari")>-1?"safari":"unknown"}},89642:(e,t,n)=>{n.d(t,{w:()=>i});const i=e=>{const t=e.toLowerCase();return t.indexOf("android")>-1?"android":t.indexOf("blackberry")>-1?"blackberry":t.indexOf("chrome")>-1?"chrome":t.indexOf("ios")>-1||t.indexOf("os x")>-1||t.indexOf("mac")>-1?"apple":t.indexOf("linux")>-1?"linux":t.indexOf("ubuntu")>-1?"ubuntu":t.indexOf("windows")>-1?"windows":"unknown"}}}]);