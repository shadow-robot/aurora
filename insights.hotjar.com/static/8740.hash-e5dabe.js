"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[8740],{79373:(e,t,n)=>{n.d(t,{iX:()=>k,WY:()=>_,qR:()=>f,LR:()=>w,DD:()=>b,zp:()=>x,Qx:()=>y});var i=n(89782),a=n(66624),s=n(86599),r=n.n(s);async function o(e){const t=await r().get(function(e){return`/api/allowances/${e.type}/${e.id}`}(e));if(!t.data.success)throw new Error("Failed to get allowances");return t.data}async function l(e){const t=await r().get(function(e){return`/api/allowances/${e.type}/${e.id}/gates/tiers`}(e));if(!t.data.success)throw new Error("Failed to get tiers");return t.data}const c=new i.S,d="use-gates-query",g="use-tiers-query",u={staleTime:36e5,cacheTime:36e5,refetchOnWindowFocus:!1},p=e=>{const t=null!==e.id;return(0,a.useQuery)({queryKey:[d,e.id,e.type],queryFn:()=>{if(!t)throw new Error;return o(e)},enabled:t,...u})};function h(e){const t=[d,e.id,e.type];return c.fetchQuery({queryKey:t,queryFn:()=>o(e),...u})}function m(e){const t=[g,e.id,e.type];return c.fetchQuery({queryKey:t,queryFn:()=>l(e),...u})}function b(e,t){const n=p(t);return null!==e&&n.isSuccess?n.data.gates[e]:null}async function f(e,t){return(await h(t)).gates[e]}function y(e,t){const n=(e=>{const t=null!==e.id;return(0,a.useQuery)({queryKey:[g,e.id,e.type],queryFn:()=>{if(!t)throw new Error;return l(e)},enabled:t,...u})})(t);return n.isSuccess?n.data.gates[e]:null}async function _(e,t){return(await m(t)).gates[e]}async function w(e){m(e)}function x(e,t){const n=p(t);return n.isSuccess?n.data.limits[e]:null}async function k(e,t){return(await h(t)).limits[e]}},54806:(e,t,n)=>{n.d(t,{y:()=>r});var i=n(36184),a=n(56451),s=n(66900);function r(e,t){const n=function(e){if(!e||!(0,s.v9)())return[];const t=e.effective_plan?e.effective_plan:e.effectivePlan;if(!t)return[];const n=(0,a.G)(),i=n?n.plans[t].features:[],{features:r=[],organization:o={},account:l={}}=e,{features:c=[]}=o,{features:d=[]}=l;return i.concat(r,c,d)}(t);return(0,i.w)(e,n)}},36184:(e,t,n)=>{function i(e,t){const n=function(e){const t=window.localStorage.getItem(`HJ_OVERRIDE_FEATURE:${e}`);return"1"===t||"true"===t||"0"!==t&&"false"!==t&&null}(e);return null!==n?n:t.includes(e)}n.d(t,{w:()=>i}),n(74870)},68554:(e,t,n)=>{n.d(t,{e:()=>o});var i=n(92954),a=n(15497),s=n(66900),r=n(13205);function o(e,t){const n=(0,i.g)(e);if(null!==n)return n;const o=function(e){if(!e||!s.v9())return[];let t;if(t=e.effectiveAskPlan||e.effective_plan_for_feedback?e.effective_plan_for_feedback?e.effective_plan_for_feedback:e.effectiveAskPlan:e.effective_plan?e.effective_plan:e.effectivePlan,!t)return[];const n=(0,r.U)();return(n?n.plans[t].features:[]).concat(e.features||[],e.organization.features||[],e.account.features||[])}(t);return(0,a.Z)(o,e)}},26210:(e,t,n)=>{n.d(t,{S:()=>d});var i=n(55794),a=n(63935),s=n(16346),r=n(68212),o=n(68816),l=n(91995);const c=()=>(0,l.tZ)("div",{}),d=e=>{let{children:t,squadSentryTag:n,fallbackComponent:d=c,fallbackRender:g,onReset:u,resetKeys:p,onError:h,featureName:m,criticality:b="unknown",shouldShowToast:f=!0,toastMessage:y}=e;const{showToast:_}=(0,r.d$)(),{t:w}=(0,s.$G)();return(0,l.tZ)(a.ErrorBoundary,{FallbackComponent:d,fallbackRender:g,onError:(e,t)=>{f&&_({text:y??w("common:error.default-message"),kind:"danger"}),(e=>{let{error:t,squadSentryTag:n,featureName:a,criticality:s,extra:r}=e;i.$e((e=>{const i={...n&&{squad:n},...s&&{criticality:s},...a&&{feature:a}};e.setTags(i),r&&e.setExtras(r),(0,o.H)(t);const{hj:l}=window;l&&l("tagRecording",["ErrorBoundary triggered"])}))})({error:e,squadSentryTag:n,featureName:m,criticality:b,extra:t}),"function"==typeof h&&h(e)},onReset:u,resetKeys:p,children:t})}},68816:(e,t,n)=>{function i(e){console.error(e),window.Sentry?.captureException(e)}n.d(t,{H:()=>i})},52382:(e,t,n)=>{n.d(t,{Kg:()=>l,Mu:()=>r,Q7:()=>g,VG:()=>c,c3:()=>u,d8:()=>s,hW:()=>p,lz:()=>o,m1:()=>d});var i=n(86599),a=n.n(i);let s;new(n(89782).S),function(e){e.Slack="Slack",e.Optimizely="Optimizely",e.GoogleOptimize="GoogleOptimize",e.GoogleAnalytics="GoogleAnalytics",e.Zapier="Zapier",e.Hubspot="Hubspot"}(s||(s={}));const r="integration_tokens";async function o(e){return(await a().get(`/api/v1/sites/${e}/tokens`)).data}const l="integration_oauth_tokens";async function c(e){return(await a().get(`/api/v1/sites/${e}/oauth-tokens`)).data}const d="integration_otter";async function g(e,t){return(await a().get(`/api/integrations/sites/${e}/status/${t}`)).data}async function u(e,t){return a().put(`/api/integrations/sites/${e}/status/${t}/enable`)}async function p(e,t){return a().put(`/api/integrations/sites/${e}/status/${t}/disable`)}},47126:(e,t,n)=>{n.d(t,{$j:()=>r,T4:()=>d,TK:()=>g,bj:()=>c,hZ:()=>u,vJ:()=>l,zP:()=>o});var i=n(86599),a=n.n(i),s=n(52382);async function r(e){return(0,s.c3)(e,"teams_webhook")}async function o(e){return(0,s.hW)(e,"teams_webhook")}async function l(e,t){return(await a().get(`/api/integrations/sites/${e}/teams/hooks/feedback/${t}`)).data}async function c(e,t,n){return a().put(`/api/integrations/sites/${e}/teams/hooks/feedback/${t}`,n)}async function d(e,t){return(await a().get(`/api/integrations/sites/${e}/teams/hooks/survey/${t}`)).data}async function g(e,t,n){return a().put(`/api/integrations/sites/${e}/teams/hooks/survey/${t}`,n)}async function u(e,t){return a().put(`/api/integrations/sites/${e}/teams/hooks/test`,{webhook_url:t})}},97713:(e,t,n)=>{n.d(t,{Fv:()=>s,Gc:()=>a,jg:()=>r,mU:()=>o,pm:()=>l,rC:()=>d,u2:()=>c,zm:()=>i});const i=!1,a="business",s="feedback.teams_integration",r="analytics.teams_integration",o="analytics_product.integrations_teams",l="feedback_product.integrations_teams",c="site-integrations-status-write",d="site-integrations-teams-write"},84602:(e,t,n)=>{function i(e){return`/api/v1/sites/${e}/slack`}n.d(t,{A:()=>i})},55241:(e,t,n)=>{n.d(t,{BI:()=>g,zP:()=>p,Ky:()=>h,Zp:()=>u,ZO:()=>l,Tb:()=>r.get,DP:()=>c,bw:()=>r.set,Uv:()=>r.update});var i=n(86599),a=n.n(i),s=n(84602),r=n(88767);function o(e){return`${(0,s.A)(e)}/enroll`}function l(e){const t=o(e);return a().get(t)}function c(e,t){const n=o(e);return a().post(n,t)}function d(e){return`${(0,s.A)(e)}/token`}const g="slack_status";function u(e){const t=d(e);return a().get(t)}function p(e){const t=d(e);return a().delete(t)}function h(e){return a().get(`${(0,s.A)(e)}/channels`)}},88767:(e,t,n)=>{n.r(t),n.d(t,{get:()=>o,set:()=>l,update:()=>c});var i=n(86599),a=n.n(i),s=n(84602);function r(e,t,n){return`${(0,s.A)(e)}/widgets/${t}/${n}`}function o(e,t,n){const i=r(e,t,n);return a().get(i)}function l(e,t,n,i){const s=r(e,t,n);return a().post(s,i)}function c(e,t,n,i){const s=r(e,t,n);return a().put(s,i)}},74998:(e,t,n)=>{n.r(t),n.d(t,{FEATURE_GROUP:()=>o,FEATURE_NAME:()=>r,canUse:()=>l});var i=n(54806),a=n(68554),s=n(15851);const r="settings.integrations_slack",o="business";function l(e,t){switch(e){case s.k.Feedback:return(0,a.e)(r,t);case s.k.Analytics:return(0,i.y)(r,t);default:return(0,i.y)(r,t)||(0,a.e)(r,t)}}},84497:(e,t,n)=>{n.d(t,{v6:()=>Ye,ev:()=>xt,X_:()=>kt,Yg:()=>wt,D1:()=>Vt,j9:()=>ce,mb:()=>W,BX:()=>Re,Wm:()=>Lt,Dw:()=>Zt,mG:()=>i,hZ:()=>Qe.hZ,wQ:()=>vt,p_:()=>S,vk:()=>Ct,td:()=>O,fM:()=>St,tI:()=>At});var i={};n.r(i),n.d(i,{CREATE_ZAP_URL:()=>Ut,FEATURE_GROUP:()=>Ht,FEATURE_NAME:()=>Dt,canUse:()=>Rt});var a=n(64934);const s=(0,a.createContext)({});var r=n(95851),o=n(16346),l=n(14928),c=n(68212),d=n(26210),g=n(79373),u=n(91995);const p=e=>{let{sites:t,onChange:n,value:i}=e;const{t:a}=(0,o.$G)();return(0,u.tZ)(c.Ph,{"aria-label":a("integrations:page.dropdown-title"),value:i,size:"l",onChange:e=>n(e.target.value),children:t.map((e=>(0,u.tZ)("option",{value:e.id,children:e.name},e.id)))})};var h=n(90088),m=n(71235);const b=(0,r.Z)(c.Zb,{target:"edxsinx8"})("display:flex;flex-direction:column;width:240px;height:220px;padding:",c.TV.spacer.x2,";border-radius:",c.TV.radius.l,";",c.TV.transition("box-shadow",200),";cursor:pointer;",c.TV.elevation(1),";&:hover{",c.TV.elevation(3),";}"),f=(0,r.Z)("div",{target:"edxsinx7"})("display:flex;align-items:center;margin-bottom:",c.TV.spacer.x1,";"),y=(0,r.Z)("div",{target:"edxsinx6"})("display:flex;flex-direction:column;margin-left:",c.TV.spacer.x1,";"),_=(0,r.Z)(c.xv,{target:"edxsinx5"})({name:"13qopiv",styles:"margin-bottom:0;flex:1"}),w=(0,r.Z)(c.xv,{target:"edxsinx4"})("display:flex;flex:1;margin-bottom:",c.TV.spacer.x1,";"),x=(0,r.Z)(c.zx,{target:"edxsinx3"})({name:"zl1inp",styles:"display:flex;justify-content:center"}),k=(0,r.Z)("span",{target:"edxsinx2"})({name:"1efi8gv",styles:"font-weight:bold"}),v=(0,r.Z)(h.rU,{target:"edxsinx1"})({name:"1lfmsnr",styles:"width:100%;height:100%;cursor:pointer;&:hover{text-decoration:none;}"}),T=(0,r.Z)(c.Kq,{target:"edxsinx0"})({name:"1h3rtzg",styles:"align-items:center"}),E=e=>{let{slug:t,icon:n,name:i,provider:r,description:l,enabled:d,hideButton:p,siteId:h,gate:E,isBeta:Z}=e;const{t:N}=(0,o.$G)(),{buildHrefFromRoute:S}=(0,m.H)(),{routes:C={integrationDetails:""}}=(0,a.useContext)(s),O=(0,g.DD)(E,{id:String(h),type:"site"}),z=()=>N(d?"integrations:card.how-to-use-it":"integrations:card.set-up");return(0,u.tZ)(v,{to:{pathname:S(C.integrationDetails,{siteId:h,integrationName:t})},children:(0,u.BX)(b,{children:[(0,u.BX)(f,{children:[(0,u.tZ)(c.JO,{icon:n,size:"l"}),(0,u.BX)(y,{children:[(0,u.BX)(T,{spacing:"x1",children:[(0,u.tZ)(_,{as:"p",textType:"subtitle1",children:N(i)}),Z&&(0,u.tZ)(c.Ct,{kind:"beta",size:"s"})]}),(0,u.tZ)(c.xv,{textType:"caption",textColor:"text_light",children:`${N("integrations:card.by")} ${N(r)}`})]})]}),(0,u.tZ)(w,{textColor:"text_light",children:N(l)}),!p&&(O?(0,u.tZ)(x,{"aria-label":z(),size:"s",kind:d?"ghost":"secondary",children:z()}):(0,u.tZ)(c.xv,{textType:"subtitle3",children:(0,u.tZ)(o.cC,{i18nKey:"integrations:card.cant-use",components:[(0,u.tZ)(k,{})],children:"Available for Business and Scale plans."})}))]})})};var Z=n(66624),N=n(52382);function S(e){return(0,Z.useQuery)([N.Mu,e],(()=>(0,N.lz)(e)),{enabled:null!==e,staleTime:3e5})}var C=n(55241);function O(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,Z.useQuery)([N.m1,e,t],(()=>(0,N.Q7)(String(e),t)),{enabled:!n&&!!e,staleTime:3e5})}const z=n.p+"383ec9ede650b178e12e.gif",I=n.p+"27295aeb3342ce3da8cc.gif",A=n.p+"1a5a2ac3f999f215b5da.jpg",L={slug:"slack",icon:"slack",name:"integrations:slack.integrations-page.title",tokenName:N.d8.Slack,provider:"integrations:card.hotjar",actionLabel:{enable:"integrations:details.header.slack-enable",disable:"integrations:details.header.slack-disable"},description:"integrations:slack.integrations-page.description-revamp",descriptionLarge:"integrations:slack.integrations-page.description-large",resources:[{copy:"integrations:slack.integrations-page.key-benefits",url:"https://www.hotjar.com/integrations/slack/",icon:"page_full"},{copy:"integrations:slack.integrations-page.using-with-hotjar",url:"https://help.hotjar.com/hc/en-us/articles/360048711313",icon:"page_full"},{copy:"integrations:details.resource.how-to-set-up-slack",url:"https://learning.hotjar.com/videos/how-to-setup-the-slack-integration/",icon:"recordings_old"},{copy:"integrations:details.resource.how-to-send-feedback-slack",url:"https://learning.hotjar.com/videos/how-to-send-feedback-responses-to-slack/",icon:"recordings_old"}],images:[z,I,A],videoUrl:"https://www.youtube.com/embed/dffai7-6tlo",gate:"core.integrations",isEnabled:!1,settings:null},$={slug:"google-optimize",icon:"google_optimize",name:"integrations:google_optimize.title",tokenName:N.d8.GoogleOptimize,provider:"integrations:card.hotjar-google",actionLabel:{autoMarkRecordings:"integrations:details.header.google-optimize-auto-mark-recordings"},description:"integrations:google_optimize.description-revamp",descriptionLarge:null,resources:[{copy:"integrations:google_optimize.using-with-hotjar",url:"https://help.hotjar.com/hc/en-us/articles/360051975733",icon:"page_full"},{copy:"integrations:google_optimize.hotjar-plus-optimize",url:"https://support.google.com/optimize/answer/10012516?hl=en",icon:"page_full"}],images:null,videoUrl:null,gate:"core.integrations",isEnabled:!1,settings:null},j=n.p+"d73306d4e7169f747a3c.gif",D=n.p+"166b33d8ceb53df31410.gif",H={slug:"google-analytics",icon:"google_analytics",name:"integrations:google_analytics.title",tokenName:N.d8.GoogleAnalytics,provider:"integrations:card.hotjar",actionLabel:{useEventsTitle:"integrations:details.header.google-analytics-use-events-title",useEventsCopy:"integrations:details.header.google-analytics-use-events-copy",useUserIdsTitle:"integrations:details.header.google-analytics-use-user-ids-title",useUserIdsCopy:"integrations:details.header.google-analytics-use-user-ids-copy"},description:"integrations:google_analytics.description-revamp",descriptionLarge:"integrations:google_analytics.description-large",noticeTitle:"integrations:google_analytics.notice-title",noticeDescription:"integrations:google_analytics.notice-description",resources:[{copy:"integrations:google_analytics.key-benefits",url:"https://www.hotjar.com/integrations/google-analytics/",icon:"page_full"},{copy:"integrations:google_analytics.using-with-hotjar",url:"https://help.hotjar.com/hc/en-us/articles/8547713037719",icon:"page_full"},{copy:"integrations:google_analytics.tutorial",url:"https://www.youtube.com/watch?v=N-4vsdfZAtQ",icon:"recordings_old"},{copy:"integrations:google_analytics.custom-dimensions",url:"https://support.google.com/analytics/answer/2709829?hl=en#zippy=%2Cin-this-article",icon:"page_full"}],images:[j,D],videoUrl:"https://www.youtube.com/embed/N-4vsdfZAtQ",gate:"core.integrations",isEnabled:!1,settings:null},R={slug:"optimizely",icon:"optimizely",name:"integrations:optimizely.title",tokenName:N.d8.Optimizely,provider:"integrations:card.hotjar-optimizely",actionLabel:{autoTrackRecordings:"integrations:details.header.optimizely-auto-track-recordings"},description:"integrations:optimizely.description-revamp",descriptionLarge:null,resources:[{copy:"integrations:optimizely.using-with-hotjar",url:"https://help.hotjar.com/hc/en-us/articles/115009347067-Using-Hotjar-With-Optimizely",icon:"page_full"},{copy:"integrations:optimizely.key-benefits",url:"https://www.hotjar.com/integrations/optimizely/",icon:"page_full"}],images:null,videoUrl:null,gate:"core.integrations",isEnabled:!1,settings:null},U=n.p+"82fa27f1105947b850d8.gif",V=n.p+"c481cec68407abee6210.gif",B=n.p+"7646bbb349f470581c28.gif",G={slug:"zapier",icon:"zapier",name:"integrations:zapier.title",tokenName:N.d8.Zapier,provider:"integrations:card.hotjar",actionLabel:{enable:"integrations:details.header.zapier-enable",disable:"integrations:details.header.zapier-disable",createZap:"integrations:details.header.zapier-create-zap"},description:"integrations:zapier.description-revamp",descriptionLarge:"integrations:zapier.description-large",resources:[{copy:"integrations:zapier.key-benefits",url:"https://www.hotjar.com/integrations/zapier/",icon:"page_full"},{copy:"integrations:zapier.using-with-hotjar",url:"https://help.hotjar.com/hc/en-us/articles/1500002049102",icon:"page_full"},{copy:"integrations:zapier.trello-cards",url:"https://zapier.com/apps/hotjar/integrations/trello",icon:"page_full"},{copy:"integrations:zapier.ms-teams",url:"https://zapier.com/apps/hotjar/integrations/microsoft-teams/530301/get-messages-in-microsoft-teams-for-new-recordings-collected-in-hotjar",icon:"page_full"},{copy:"integrations:zapier.excel",url:"https://zapier.com/apps/hotjar/integrations/excel",icon:"page_full"},{copy:"integrations:zapier.connect-apps",url:"https://zapier.com/apps/hotjar/integrations",icon:"page_full"}],images:[U,V,B],videoUrl:"https://www.youtube.com/embed/LIPhzx8U4fk",gate:"core.integrations",isEnabled:!0,isAlwaysOn:!0,settings:null},X=n.p+"c7eaf0445c294869f87e.png",F=n.p+"9f721a29052b8f021c59.png",P=n.p+"2c7572e46d2152873455.png",q={slug:"hubspot",icon:"hubspot",name:"integrations:hubspot.title",tokenName:N.d8.Hubspot,provider:"integrations:card.hotjar",actionLabel:{enable:"integrations:details.header.hubspot-enable",disable:"integrations:details.header.hubspot-disable"},description:"integrations:hubspot.description-revamp",descriptionLarge:"integrations:hubspot.description-large",resources:[{copy:"integrations:hubspot.using-with-hotjar",url:"https://help.hotjar.com/hc/en-us/articles/115009347167-Using-Hotjar-with-HubSpot",icon:"page_full"}],images:[X,F,P],videoUrl:null,gate:"core.integrations",isEnabled:!1,settings:null},K=n.p+"a772bbb232471aede7a9.png",M=n.p+"02b6d6eb46eb2621a72a.png";var W=n(97713);const Q=[L,$,R,H,G,q,{slug:"microsoft-teams",icon:"microsoft_teams",name:"integrations:ms_teams.integrations-page.title",provider:"integrations:card.hotjar",tokenName:null,otterName:"teams_webhook",actionLabel:{enable:"integrations:ms_teams.integrations-page.button-action.enable",disable:"integrations:ms_teams.integrations-page.button-action.disable"},description:"integrations:ms_teams.integrations-page.description",descriptionLarge:"integrations:ms_teams.integrations-page.description-large",resources:[{copy:"integrations:ms_teams.integrations-page.key-benefits",url:"https://www.hotjar.com/integrations/microsoft-teams/",icon:"page_full"},{copy:"integrations:ms_teams.integrations-page.using-with-hotjar",url:"https://help.hotjar.com/hc/en-us/articles/10211927123223",icon:"page_full"}],images:[K,M],videoUrl:"https://www.youtube.com/embed/oip9xK6ZBa4",gate:"core.integrations",isEnabled:!1,settings:null,isBeta:W.zm}],Y=[{slug:"segment",icon:"segment",name:"integrations:segment.title",provider:"integrations:segment.provider",tokenName:null,actionLabel:{enable:"integrations:segment.enable"},description:"integrations:segment.description",descriptionLarge:null,resources:[{copy:"integrations:segment.resources.benefits-use-cases",url:"https://www.hotjar.com/integrations/segment/",icon:"page_full"},{copy:"integrations:segment.resources.using-with-hotjar",url:"https://help.hotjar.com/hc/en-us/articles/115009347327-Using-Hotjar-with-Segment",icon:"page_full"},{copy:"integrations:segment.resources.destination",url:"https://segment.com/docs/connections/destinations/catalog/hotjar/",icon:"page_full"}],images:null,videoUrl:null,gate:"core.integrations",isEnabled:!1,settings:null,installUrl:"https://segment.com/docs/connections/destinations/catalog/hotjar/"},{slug:"omniconvert",icon:"omniconvert",name:"integrations:omniconvert.title",provider:"integrations:omniconvert.provider",tokenName:null,actionLabel:{enable:"integrations:omniconvert.enable"},description:"integrations:omniconvert.description",descriptionLarge:null,resources:[{copy:"integrations:omniconvert.resources.using-with-hotjar",url:"https://help.hotjar.com/hc/en-us/articles/115009347267-Using-Hotjar-with-Omniconvert",icon:"page_full"},{copy:"integrations:omniconvert.resources.integrate-with-hotjar",url:"https://www.omniconvert.com/help/kba/how-to-connect-hotjar-with-omniconvert/",icon:"page_full"},{copy:"integrations:omniconvert.resources.grow",url:"https://www.omniconvert.com/blog/how-to-grow-your-website-with-hotjar-omniconvert/",icon:"page_full"}],images:null,videoUrl:null,gate:"core.integrations",isEnabled:!1,settings:null,installUrl:"https://help.hotjar.com/hc/en-us/articles/115009347267-Using-Hotjar-with-Omniconvert"}];n(74870);var J=n(92065),ee=n(68733),te=n(54806);const ne=(e,t)=>{switch(e){case N.d8.GoogleOptimize:return null!==t&&!(0,J.Z)(t)&&!1!==t.tag_recordings;case N.d8.GoogleAnalytics:{const e=t;return Boolean(e?.send_hotjar_id||e?.tag_sessions)}case N.d8.Optimizely:return null!==t&&!1!==t?.tag_recordings;case N.d8.Zapier:return!0;case N.d8.Hubspot:{const e="hubspot"===t?.provider,n="hubspot-oauth2"===t?.provider;return e||n}default:return!1}},ie=e=>{const{query:{data:t}}=(0,l.k4)(),n=t?.find((t=>t.id===e)),[i,s]=(0,a.useState)(Q),{data:r=[],status:o,isLoading:c,refetch:d}=S(String(e)),{data:g=[],status:u,isLoading:p,refetch:h}=(m=String(e),(0,Z.useQuery)([N.Kg,m],(()=>(0,N.VG)(m)),{enabled:null!==m,staleTime:3e5}));var m;const{data:b=!1,status:f,isLoading:y,refetch:_}=function(e){return(0,Z.useQuery)([C.BI],(async()=>{if(void 0===e)return!1;try{return 200===(await(0,C.Zp)(e)).status}catch(e){return!1}}),{enabled:null!==e,staleTime:3e5})}(e),{data:w,status:x,isLoading:k,refetch:v}=O(e,"teams_webhook");return(0,a.useEffect)((()=>{[o,u,f,x].every((e=>"success"===e))&&s(((e,t,n)=>{const i=(0,ee.Z)(Q).filter((t=>!t.featureFlag||(0,te.y)(t.featureFlag,e)));t.integrationTokens.forEach((e=>{let{name:t,settings:n}=e;const a=i.findIndex((e=>e.tokenName===t));if(a>-1){const e=ne(t,n);i[a].settings=n,i[a].isEnabled=i[a].isAlwaysOn||e}})),t.integrationOAuthTokens.forEach((e=>{if(e.provider.includes("hubspot")){const t=i.findIndex((e=>e.tokenName===N.d8.Hubspot));if(t>-1){const n=ne(N.d8.Hubspot,e);i[t].settings=e,i[t].isEnabled=i[t].isAlwaysOn||n}}}));const a=i.findIndex((e=>"Slack"===e.tokenName));i[a].isEnabled=n.slack;const s=i.findIndex((e=>"teams_webhook"===e.otterName));return s>-1&&(i[s].isEnabled=n?.teams?.enabled||!1),i})(n??null,{integrationTokens:r,integrationOAuthTokens:g},{slack:b,teams:w}))}),[o,u,f,x,r,g,b,w,n]),{isLoading:p||y||c||k,refreshTokens:()=>{d(),h(),_(),v()},integrations:i,externalIntegrations:Y}},ae=(0,r.Z)("article",{target:"ecm91ae4"})("padding:0 ",c.TV.spacer.x2," ",c.TV.spacer.x4,";max-width:800px;margin:0 auto;"),se=(0,r.Z)(c.xv,{target:"ecm91ae3"})("margin:",c.TV.spacer.x6," 0 0;"),re=(0,r.Z)(c.xv,{target:"ecm91ae2"})("margin-bottom:",c.TV.spacer.x1pt5,";margin-top:",c.TV.spacer.x4,";"),oe=(0,r.Z)("div",{target:"ecm91ae1"})("width:320px;margin-bottom:",c.TV.spacer.x1,";"),le=(0,r.Z)("div",{target:"ecm91ae0"})("display:grid;grid-template-columns:repeat(auto-fill, minmax(240px, 1fr));grid-gap:",c.TV.spacer.x3,";"),ce=()=>{const{usePageTitle:e=(()=>null)}=(0,a.useContext)(s),{data:t}=(0,l.PD)(),{query:{data:n=[]}}=(0,l.k4)(),[i,r]=(0,a.useState)(t),{t:h}=(0,o.$G)(),{integrations:m,externalIntegrations:b,refreshTokens:f,isLoading:y}=ie(i?.id),[_,w]=(0,a.useState)([]),[x,k]=(0,a.useState)([]),v=(0,g.DD)("core.integrations",{id:String(i?.id),type:"site"});e(`${h("integrations:page.title")} - Hotjar`),(0,a.useEffect)((()=>{i&&f()}),[i]),(0,a.useEffect)((()=>{y||(v?(w(m.filter((e=>e.isEnabled))),k(m.filter((e=>!e.isEnabled)))):(k(m),w([])))}),[m,y,i,v]),(0,a.useLayoutEffect)((()=>{!i&&t&&r(t)}),[t,i,r]);const T=(0,a.useCallback)((e=>{const t=n.find((t=>t.id===Number(e)));t&&r(t)}),[n]);return i?(0,u.tZ)(d.S,{squadSentryTag:"integrations",children:(0,u.BX)(ae,{children:[(0,u.tZ)(se,{as:"h3",textType:"header3",children:h("integrations:page.title")}),(0,u.tZ)(re,{as:"p",textType:"subtitle2",children:h("integrations:page.dropdown-title")}),(0,u.tZ)(oe,{children:n.length>0&&(0,u.tZ)(p,{value:i?.id??0,onChange:T,sites:n})}),(0,u.BX)(c.aN,{isLoading:y,children:[_.length>0?(0,u.BX)(u.HY,{children:[(0,u.tZ)(re,{as:"p",textType:"subtitle1","aria-label":h("integrations:page.active-integrations"),children:h("integrations:page.active-integrations")}),(0,u.tZ)(le,{children:_.map((e=>(0,u.tZ)(E,{enabled:!0,siteId:i.id,...e},e.name)))})]}):null,x.length>0?(0,u.BX)(u.HY,{children:[(0,u.tZ)(re,{as:"p",textType:"subtitle1","aria-label":h("integrations:page.available-integrations"),children:h("integrations:page.available-integrations")}),(0,u.tZ)(le,{children:x.map((e=>(0,u.tZ)(E,{enabled:!1,siteId:i.id,...e},e.name)))})]}):null,b.length>0?(0,u.BX)(u.HY,{children:[(0,u.tZ)(re,{as:"p",textType:"subtitle1","aria-label":h("integrations:page.external-integrations"),children:h("integrations:page.external-integrations")}),(0,u.tZ)(le,{children:b.map((e=>(0,u.tZ)(E,{enabled:!1,hideButton:!0,siteId:i.id,...e},e.name)))})]}):null]}),(0,u.tZ)("div",{id:"integrations-list-page-widget"})]})}):null};var de=n(93712),ge=n(648);const ue=(0,r.Z)("div",{target:"e1bhmdo22"})("display:flex;align-items:center;padding:",c.TV.spacer.x2," 0;"),pe=(0,r.Z)(c.xv,{target:"e1bhmdo21"})("margin:0 ",c.TV.spacer.x1pt5,";flex:1;"),he=(0,r.Z)("div",{target:"e1bhmdo20"})(ue,":not(:last-child){border-bottom:1px solid ",c.TV.color.ui_border,";}"),me=e=>{let{resources:t}=e;const{t:n}=(0,o.$G)();return t.length?(0,u.tZ)(he,{children:t.map((e=>{let{copy:t,url:i,icon:a}=e;return null!==i?(0,u.BX)(ue,{children:[(0,u.tZ)(c.JO,{icon:a}),(0,u.tZ)(pe,{as:"span",textType:"body1",children:n(t)}),(0,u.tZ)(c.zx,{as:"a",isExternal:!0,href:i,kind:"ghost_standout",icon:"open_new_window",children:n("integrations:details.view")})]},t.slice(-10)):null}))}):null},be=(0,r.Z)("ul",{target:"ekjmm2g1"})("padding:0;position:absolute;bottom:",c.TV.spacer.x1,";left:0;right:0;display:flex;justify-content:center;list-style-type:none;"),fe=(0,r.Z)("li",{target:"ekjmm2g0"})("cursor:pointer;margin:0 ",c.TV.spacer.x1,";width:10px;height:10px;border-radius:50%;background-color:",c.TV.color.neutral_200,";",c.TV.transition("background-color",600),";",(e=>{let{isActive:t}=e;return t?`background-color: ${c.TV.color.ui_active};`:""}),",&:hover{background-color:",c.TV.color.ui_active,";}"),ye=e=>{let{isActive:t,onClick:n}=e;return(0,u.tZ)(fe,{isActive:t,onClick:()=>n()})},_e=e=>{let{images:t,currentIndex:n,onClick:i}=e;return(0,u.tZ)(be,{children:t.map(((e,t)=>(0,u.tZ)(ye,{isActive:t===n,onClick:()=>(e=>{i(e)})(t)},e)))})},we=(0,r.Z)(c.hU,{target:"eyovk3d0"})("margin:0 -",c.TV.spacer.x6,";"),xe=e=>{let{direction:t="left",onClick:n,isDisabled:i}=e;const{t:a}=(0,o.$G)();return(0,u.tZ)(we,{kind:"ghost",icon:"left"===t?"arrow_left_alone":"arrow_right_alone",onClick:n,tooltipText:a("left"===t?"integrations:details.carousel.previous":"integrations:details.carousel.next"),isDisabled:i})},ke=(0,r.Z)("div",{target:"e4a96ns0"})("width:100%;height:100%;background-size:contain;background-repeat:no-repeat;background-position:50% 50%;background-image:",(e=>{let{backgroundImage:t}=e;return t&&`url(${t})`}),";display:flex;justify-content:space-between;align-items:center;margin:",c.TV.spacer.x2," 0 ",c.TV.spacer.x5,";border-radius:",c.TV.radius.l,";",c.TV.transition("background-image",600),";"),ve=e=>{let{imageUrl:t,onChange:n,isFirstElement:i,isLastElement:a}=e;return(0,u.BX)(ke,{backgroundImage:t,children:[(0,u.tZ)(xe,{onClick:()=>n("left"),isDisabled:i},0),(0,u.tZ)(xe,{direction:"right",onClick:()=>n("right"),isDisabled:a},1)]})},Te=(0,r.Z)("div",{target:"evcbsov0"})({name:"179pl2g",styles:"position:relative;width:100%;height:400px"}),Ee=e=>{let{imagesUrls:t}=e;const[n,i]=(0,a.useState)(0);return t.length?(0,u.BX)(Te,{children:[(0,u.tZ)(ve,{imageUrl:t[n],onChange:e=>{i("left"===e?0===n?t.length-1:n-1:n===t.length-1?0:n+1)},isFirstElement:!1,isLastElement:!1}),(0,u.tZ)(_e,{images:t,currentIndex:n,onClick:e=>{i(e)}})]}):null},Ze=(0,r.Z)("iframe",{target:"ehsogl70"})("border-radius:",c.TV.radius.m,";"),Ne=e=>{let{videoUrl:t}=e;return t?(0,u.tZ)(Ze,{width:"400",height:"180",src:t,title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):null};var Se=n(86599),Ce=n.n(Se);const Oe=e=>{let{siteId:t,tagSessions:n,sendHotjarUserId:i,dimensionIndex:a}=e;return Ce().post(`/api/v1/sites/${t}/integrations/google_analytics`,{send_hotjar_id:i,hjuid_dimension_index:a.length?a:null,tag_sessions:n})},ze=(0,r.Z)(c.xv,{target:"e1wkgz034"})("margin:",c.TV.spacer.x2," 0 ",c.TV.spacer.x1,";"),Ie=(0,r.Z)("div",{target:"e1wkgz033"})("display:flex;margin-left:",c.TV.spacer.x6,";"),Ae=(0,r.Z)("div",{target:"e1wkgz032"})("width:280px;margin-right:",c.TV.spacer.x1,";"),Le=(0,r.Z)(c.xv,{target:"e1wkgz031"})("margin-left:",c.TV.spacer.x6,";margin-bottom:",c.TV.spacer.x1,";max-width:",280,"px;margin-top:-",c.TV.spacer.x1,";"),$e=(0,r.Z)(c.rU,{target:"e1wkgz030"})("color:",c.TV.color.text_light,";"),je=e=>{let{siteId:t,actionLabel:n,isAdmin:i}=e;const{showToast:s}=(0,c.d$)(),{t:r}=(0,o.$G)(),[l,d]=(0,a.useState)(!1),[g,p]=(0,a.useState)(!1),[h,m]=(0,a.useState)(""),{integrations:b,refreshTokens:f}=ie(Number(t)),{settings:y=null}=b.find((e=>e.tokenName===N.d8.GoogleAnalytics))??{};return(0,a.useEffect)((()=>{null!==y&&(d(y.tag_sessions??!1),p(y.send_hotjar_id??!1),m(y.hjuid_dimension_index??""))}),[y]),(0,u.BX)(u.HY,{children:[(0,u.tZ)(ze,{textType:"subtitle2",children:r(n.useEventsTitle)}),(0,u.tZ)(c.rs,{labelContent:r(n.useEventsCopy),isChecked:l,onChange:async e=>{const{data:n}=await Oe({sendHotjarUserId:g,dimensionIndex:h,tagSessions:e,siteId:Number(t)}),i=e?"enabled":"disabled";n.success?(d(e),f(),s({text:r(`integrations:google_analytics.success.auto-events-${i}`),kind:"success"})):s({text:r(`integrations:google_analytics.error.auto-events-${i}`),kind:"danger"})},isDisabled:!i}),(0,u.tZ)(ze,{textType:"subtitle2",children:r(n.useUserIdsTitle)}),(0,u.tZ)(c.rs,{labelContent:r(n.useUserIdsCopy),isChecked:g,onChange:async e=>{const{data:n}=await Oe({sendHotjarUserId:e,dimensionIndex:h,tagSessions:l,siteId:Number(t)}),i=e?"enabled":"disabled";n.success?(p(e),f(),s({text:r(`integrations:google_analytics.success.hj-user-ids-${i}`),kind:"success"})):s({text:r(`integrations:google_analytics.error.hj-user-ids-${i}`),kind:"danger"})},isDisabled:!i}),(0,u.tZ)(Le,{children:(0,u.BX)(o.cC,{i18nKey:"integrations:details.header.google-analytics-use-user-ids-ua-note",children:["For Universal Analytics, create a custom dimension and enter the index number from your",(0,u.tZ)($e,{kind:"inline",isExternal:!0,as:"a",href:"https://support.google.com/tagmanager/answer/6164990?hl=en",children:"Custom Dimension page"})]})}),(0,u.BX)(Ie,{children:[(0,u.tZ)(Ae,{children:(0,u.tZ)(c.Y2,{id:"google-analytics-dimension-index",value:h,onChange:e=>{const{value:t}=e.target;(e=>e.match(/^$|^[1-9][0-9]*$/))(t)&&m(e.target.value)},isDisabled:!i||!g,placeholder:r("integrations:details.header.google-analytics-input-placeholder")})}),(0,u.tZ)(c.zx,{kind:"primary",isDisabled:!i||!g,onClick:async e=>{e.preventDefault();const{data:n}=await Oe({sendHotjarUserId:!0,dimensionIndex:h,tagSessions:l,siteId:Number(t)});n.success?(m(h),f(),s({text:r("integrations:google_analytics.success.hj-user-ids-index-updated"),kind:"success"})):s({text:r("integrations:google_analytics.error.hj-user-ids-index-updated"),kind:"danger"})},children:r("integrations:google_analytics.button-action")})]})]})},De=e=>{let{siteId:t,actionLabel:n,isAdmin:i}=e;const{t:r}=(0,o.$G)(),{showToast:l}=(0,c.d$)(),{useTrack:d=(()=>({optimizelyIntegration:()=>null}))}=(0,a.useContext)(s),{optimizelyIntegration:g}=d(),[p,h]=(0,a.useState)(!1),{integrations:m,refreshTokens:b}=ie(Number(t)),{isEnabled:f=!1}=m.find((e=>e.tokenName===N.d8.Optimizely))??{};return(0,a.useEffect)((()=>{h(f)}),[f]),(0,u.tZ)(c.rs,{labelContent:r(n.autoTrackRecordings),isChecked:p,onChange:e=>{const n=e?"enabled":"disabled";((e,t)=>Ce().post(`/api/v1/sites/${t}/integrations/optimizely`,{action:"tag_recordings",tag_recordings:e}))(e,Number(t)).then((()=>{h(e),b(),l({text:r(`integrations:page.activation.success.${n}`),kind:"success"}),g("1")})).catch((()=>{h(!1),l({text:r(`integrations:page.activation.error.${n}`),kind:"danger"})}))},isDisabled:!i})},He=e=>{let{siteId:t,actionLabel:n,isAdmin:i}=e;const{t:s}=(0,o.$G)(),{showToast:r}=(0,c.d$)(),[l,d]=(0,a.useState)(!1),{integrations:g,refreshTokens:p}=ie(Number(t)),{isEnabled:h=!1}=g.find((e=>e.tokenName===N.d8.GoogleOptimize))??{};return(0,a.useEffect)((()=>{d(h)}),[h]),(0,u.tZ)(c.rs,{labelContent:s(n.autoMarkRecordings),isChecked:l,onChange:e=>{const n=e?"enabled":"disabled";((e,t)=>Ce().post(`/api/v1/sites/${t}/integrations/google_optimize`,{action:"tag_recordings",tag_recordings:e}))(e,Number(t)).then((()=>{d(e),p(),r({text:s(`integrations:page.activation.success.${n}`),kind:"success"})})).catch((()=>{d(!1),p(),r({text:s(`integrations:page.activation.error.${n}`),kind:"danger"})}))},isDisabled:!i})},Re="integrationOAuthCallback";async function Ue(e){const t=`${window.location.origin}/oauth?integration=slack`,{data:{success:n,slack_enrollment:i}}=await C.ZO(e);if(!n)throw new Error("Unable to get slack enrollment data.");const{client_id:a,scope:s}=i,r=window.open(`https://slack.com/oauth/v2/authorize?client_id=${a}&scope=${s}&redirect_uri=${t}`,"oauthHandler","height=780,width=620");return null===r?Promise.reject(new Error("No authentication window opened.")):new Promise(((n,i)=>{let a;const s=async o=>{if(o.data.action!==Re)return;window.removeEventListener("message",s);const{code:l,performanceTiming:c}=o.data.data;if(!l){const e=new Error("Missing or empty code value.");return void i(e)}clearInterval(a),r.close();const{data:d}=await C.DP(e,{code:l,redirect_uri:t});d.success?n(d):i(new Error("Unknown error occurred.")),c&&c.loadEventEnd&&c.navigationStart&&window.DDLogs&&window.DDLogs.logger&&"function"==typeof window.DDLogs.logger.log&&window.DDLogs.logger.log("slack_oauth_load",{time:c.loadEventEnd-c.navigationStart})};a=setInterval((()=>{r.closed&&(window.removeEventListener("message",s),clearInterval(a),i(new Error("Slack authentication cancelled.")))}),1e3),window.addEventListener("message",s)}))}const Ve=e=>{let{siteId:t,actionLabel:n,isAdmin:i,siteName:s}=e;const{t:r}=(0,o.$G)(),{showToast:l}=(0,c.d$)(),[d,g]=(0,a.useState)(!1),[p,h]=(0,a.useState)(!1),{integrations:m,refreshTokens:b}=ie(Number(t)),{isEnabled:f=!1}=m.find((e=>e.tokenName===N.d8.Slack))??{};return(0,a.useEffect)((()=>{g(f)}),[f]),(0,u.BX)(u.HY,{children:[(0,u.tZ)(c.zx,{"aria-label":r(d?n.disable:n.enable),kind:d?"danger_secondary":"primary",isDisabled:!i,onClick:d?()=>h(!0):()=>{d?h(!0):Ue(Number(t)).then((()=>{g(!0),b(),l({text:`Success! Slack is connected to Hotjar for ${s}`,kind:"success"})})).catch((e=>{l({text:e.message,kind:"danger"})}))},children:r(d?n.disable:n.enable)}),(0,u.BX)(c.u_,{contentLabel:r("integrations:slack.disable-modal.content-label"),onClose:()=>h(!1),isOpen:p,children:[(0,u.tZ)(c.u_.Header,{title:r("integrations:slack.disable-modal.title")}),(0,u.tZ)(c.u_.Body,{children:(0,u.tZ)("p",{children:r("integrations:slack.disable-modal.description",{siteName:s})})}),(0,u.BX)(c.u_.Footer,{children:[(0,u.tZ)(c.zx,{kind:"ghost",onClick:()=>h(!1),children:r("integrations:slack.disable-modal.cancel")}),(0,u.tZ)(c.zx,{kind:"danger",onClick:()=>{(0,C.zP)(Number(t)).then((()=>{g(!1),b(),l({text:`Slack has been disconnected from Hotjar for ${s}`,kind:"success"}),h(!1)}))},type:"submit","data-testid":"confirm",children:r("integrations:slack.disable-modal.action")})]})]})]})},Be=(0,r.Z)("div",{target:"e1hz31lm1"})({name:"zjik7",styles:"display:flex"}),Ge=(0,r.Z)(c.zx,{target:"e1hz31lm0"})("margin-right:",c.TV.spacer.x1,";"),Xe=()=>{const{t:e}=(0,o.$G)();return(0,u.BX)(Be,{children:[(0,u.tZ)(Ge,{icon:"open_new_window",as:"a",isExternal:!0,href:"https://zapier.com/app/editor",rel:"noopener noreferrer",children:e("integrations:zapier.create")}),(0,u.tZ)(c.zx,{kind:"ghost",icon:"open_new_window",as:"a",isExternal:!0,href:"https://zapier.com/app/zaps",rel:"noopener noreferrer",children:e("integrations:zapier.manage")})]})};var Fe=n(77508);const Pe="/api/v1/sites",qe=(0,r.Z)("div",{target:"e193dl2v1"})("margin-top:",c.TV.spacer.x2,";"),Ke=(0,r.Z)(c.xv,{target:"e193dl2v0"})("display:block;margin-bottom:",c.TV.spacer.x1,";"),Me=e=>{if(null!==e){const t=encodeURIComponent(`${window.location.origin}${Fe.SETTINGS.INTEGRATIONS_HUBSPOT_OAUTH_REDIRECT.path}`);return`https://app.hubspot.com/oauth/authorize?client_id=${window.settings.apis.hubspot.client_id}&redirect_uri=${t}&scope=timeline&state=${e}`}return"#"},We=e=>{let{siteId:t,actionLabel:n,isAdmin:i}=e;const{t:s}=(0,o.$G)(),{showToast:r}=(0,c.d$)(),l=(0,de.s0)(),[d,g]=(0,h.lr)(),{integrations:p,refreshTokens:m}=ie(Number(t)),{settings:b=null}=p.find((e=>e.tokenName===N.d8.Hubspot))??{},f="hubspot"===b?.provider,y="hubspot-oauth2"===b?.provider,_=f||y,w=f&&!y,x=d.get("oauth-success");(0,a.useEffect)((()=>{_||null===x||("true"===x?(m(),r({text:s("integrations:hubspot.connected"),kind:"success"})):r({text:s("integrations:hubspot.connection-error"),kind:"danger"}),g({}))}),[_,x,m,g,r,s]);const k=async(e,n)=>{try{const{data:{success:i}}=await((e,t)=>Ce().delete(`${Pe}/${t}/oauth-tokens/${e}`))(e,String(t));n?n(i):i?(m(),r({text:s("integrations:hubspot.disconnected"),kind:"success"})):r({text:s("integrations:hubspot.disconnection-error"),kind:"danger"})}catch{r({text:s("integrations:hubspot.disconnection-error"),kind:"danger"})}};return(0,u.BX)(u.HY,{children:[i&&!_?(0,u.tZ)(c.zx,{"aria-label":s(_?n.disable:n.enable),as:"a",kind:_?"danger_secondary":"primary",href:Me(t),children:s(_?n.disable:n.enable)}):null,_?(0,u.tZ)(c.zx,{kind:_?"danger_secondary":"primary",isDisabled:!i,onClick:()=>k("hubspot-oauth2"),children:s(_?n.disable:n.enable)}):null,w?(0,u.BX)(qe,{children:[(0,u.tZ)(Ke,{textType:"subtitle2",textColor:"text_danger",children:s("integrations:hubspot.old-integration-connected")}),(0,u.tZ)(c.zx,{isDisabled:!i,onClick:()=>{k("hubspot",(e=>{e?(m(),r({text:s("integrations:hubspot.old-integration-disconnected"),kind:"success"}),l(Me(t))):r({text:s("integrations:hubspot.old-integration-disconnection-error"),kind:"danger"})}))},children:s("integrations:hubspot.reconnect-with-new-integration")})]}):null]})};var Qe=n(47126);const Ye=e=>{let{isOpen:t,onRequestClose:n,onSuccess:i,onError:s,siteId:r,siteName:l}=e;const[d,g]=(0,a.useState)(!1),{t:p}=(0,o.$G)(),{refreshTokens:h}=ie(Number(r)),{showToast:m}=(0,c.d$)();return(0,u.BX)(c.u_,{contentLabel:p("integrations:ms_teams.enable-modal.content-label"),isOpen:t,onClose:n,children:[(0,u.tZ)(c.u_.Header,{title:p("integrations:ms_teams.enable-modal.title")}),(0,u.tZ)(c.u_.Body,{children:p("integrations:ms_teams.enable-modal.description-long",{siteName:l})}),(0,u.tZ)(c.u_.Footer,{children:(0,u.tZ)(c.zx,{"data-testid":"enable-ms-teams-button",kind:"primary",onClick:()=>{r&&(g(!0),(0,Qe.$j)(r).then((()=>{m({text:p("integrations:ms_teams.enable-modal.notify-success",{siteName:l}),kind:"success"}),i&&i()})).catch((e=>{e.message&&m({text:e.message,kind:"danger"}),s&&s()})).finally((()=>{g(!1),h()})))},isDisabled:d,children:p("integrations:ms_teams.enable-modal.action")})})]})},Je=e=>{let{isOpen:t,onRequestClose:n,onSuccess:i,onError:s,siteId:r,siteName:l}=e;const[d,g]=(0,a.useState)(!1),{t:p}=(0,o.$G)(),{refreshTokens:h}=ie(Number(r)),{showToast:m}=(0,c.d$)();return(0,u.BX)(c.u_,{contentLabel:p("integrations:ms_teams.disable-modal.content-label"),isOpen:t,onClose:n,children:[(0,u.tZ)(c.u_.Header,{title:p("integrations:ms_teams.disable-modal.title")}),(0,u.tZ)(c.u_.Body,{children:(0,u.tZ)("p",{children:p("integrations:ms_teams.disable-modal.description",{siteName:l})})}),(0,u.BX)(c.u_.Footer,{children:[(0,u.tZ)(c.zx,{kind:"ghost",onClick:n,isDisabled:d,children:p("integrations:ms_teams.disable-modal.cancel")}),(0,u.tZ)(c.zx,{kind:"danger",onClick:()=>{r&&(g(!0),(0,Qe.zP)(r).then((()=>{m({text:p("integrations:ms_teams.disable-modal.notify-success",{siteName:l}),kind:"success"}),i&&i()})).catch((e=>{e.message&&m({text:e.message,kind:"danger"}),s&&s()})).finally((()=>{g(!1),h()})))},type:"submit","data-testid":"confirm",isDisabled:d,children:p("integrations:ms_teams.disable-modal.action")})]})]})},et=e=>{let{siteId:t,siteName:n,actionLabel:i,isAdmin:s}=e;const[r,l]=(0,a.useState)(!1),[d,g]=(0,a.useState)(!1),[p,h]=(0,a.useState)(!1),{integrations:m}=ie(Number(t)),{t:b}=(0,o.$G)(),{isEnabled:f=!1}=m.find((e=>"teams_webhook"===e.otterName))??{};return(0,a.useEffect)((()=>{l(f)}),[f]),(0,u.BX)(u.HY,{children:[(0,u.tZ)(c.zx,{"aria-label":b(r?i.disable:i.enable),kind:r?"danger_secondary":"primary",isDisabled:!s,onClick:()=>{r?h(!0):g(!0)},children:b(r?i.disable:i.enable)}),(0,u.tZ)(Ye,{isOpen:d,onRequestClose:()=>g(!1),onSuccess:()=>g(!1),onError:()=>g(!1),siteId:t,siteName:n}),(0,u.tZ)(Je,{isOpen:p,onRequestClose:()=>h(!1),onSuccess:()=>h(!1),onError:()=>h(!1),siteId:t,siteName:n})]})},tt=(0,r.Z)("div",{target:"e1f2dqzv1"})("display:block;margin-top:",c.TV.spacer.x1,";"),nt=(0,r.Z)("form",{target:"e1f2dqzv0"})("display:flex;flex-direction:column;margin-top:",c.TV.spacer.x1,";"),it=e=>{let{canUse:t,integration:n,billingRoute:i,isAdmin:a,siteId:s,siteName:r}=e;const{buildHrefFromRoute:l}=(0,m.H)(),{t:d}=(0,o.$G)(),g={referrer:"specific-integration",i18nData:{siteName:r,integrationName:d(n.name)}},p=()=>(0,u.tZ)(tt,{children:(0,u.tZ)(c.zx,{as:"a",href:l(i,{"pb-context":encodeURIComponent(JSON.stringify(g))}),kind:"primary",icon:"crown","aria-label":d("integrations:details.header.upgrade-to-unlock"),children:d("integrations:details.header.upgrade-to-unlock")})});return"google-analytics"===n.slug?(0,u.tZ)(nt,{children:t?(0,u.tZ)(je,{siteId:s,actionLabel:n.actionLabel,isAdmin:a}):(0,u.tZ)(p,{})}):"optimizely"===n.slug?(0,u.tZ)(nt,{children:t?(0,u.tZ)(De,{siteId:s,actionLabel:n.actionLabel,isAdmin:a}):(0,u.tZ)(p,{})}):"google-optimize"===n.slug?(0,u.tZ)(nt,{children:t?(0,u.tZ)(He,{siteId:s,actionLabel:n.actionLabel,isAdmin:a}):(0,u.tZ)(p,{})}):"slack"===n.slug?(0,u.tZ)(tt,{children:t?(0,u.tZ)(Ve,{siteId:s,actionLabel:n.actionLabel,isAdmin:a,siteName:r}):(0,u.tZ)(p,{})}):"zapier"===n.slug?(0,u.tZ)(tt,{children:t?(0,u.tZ)(Xe,{}):(0,u.tZ)(p,{})}):"hubspot"===n.slug?(0,u.tZ)(tt,{children:t?(0,u.tZ)(We,{siteId:s,actionLabel:n.actionLabel,isAdmin:a}):(0,u.tZ)(p,{})}):"microsoft-teams"===n.slug?(0,u.tZ)(tt,{children:t?(0,u.tZ)(et,{siteId:s,siteName:r,actionLabel:n.actionLabel,isAdmin:a}):(0,u.tZ)(p,{})}):"segment"===n.slug||"omniconvert"===n.slug?(0,u.tZ)(tt,{children:t?(0,u.tZ)(c.zx,{icon:"open_new_window",as:"a",href:n.installUrl,isExternal:!0,kind:"secondary",children:d(n.actionLabel.enable)}):(0,u.tZ)(p,{})}):(0,u.tZ)(tt,{children:t?(0,u.tZ)(c.zx,{kind:n.isEnabled?"danger_secondary":"primary",isDisabled:!a,children:n.isEnabled?d(n.actionLabel.disable):d(n.actionLabel.enable)}):(0,u.tZ)(p,{})})},at=(0,r.Z)("div",{target:"ew4111f15"})("background-color:",c.TV.color.bg_info,";padding:",c.TV.spacer.x3," ",c.TV.spacer.x4pt5,";"),st=(0,r.Z)("section",{target:"ew4111f14"})("display:flex;padding:",c.TV.spacer.x5," 0 ",c.TV.spacer.x4,";max-width:",(e=>{let{noVideo:t}=e;return t?"600":"800"}),"px;margin:0 auto;"),rt=(0,r.Z)(st,{target:"ew4111f13"})("display:flex;flex-direction:column;padding:",c.TV.spacer.x5," 0 0;max-width:",(e=>{let{noVideo:t}=e;return t?"600":"800"}),"px;margin:0 auto;"),ot=(0,r.Z)("div",{target:"ew4111f12"})("padding:0 0 ",c.TV.spacer.x5,";max-width:",(e=>{let{noVideo:t}=e;return t?"600":"800"}),"px;margin:0 auto;"),lt=(0,r.Z)("div",{target:"ew4111f11"})("display:flex;flex-direction:column;width:",(e=>{let{fullWidth:t}=e;return t?"100%":"400px"}),";padding-right:",c.TV.spacer.x2,";"),ct=(0,r.Z)("div",{target:"ew4111f10"})("display:flex;align-items:center;padding-bottom:",c.TV.spacer.x1,";gap:",c.TV.spacer.x1,";"),dt=(0,r.Z)(c.xv,{target:"ew4111f9"})({name:"1ykowef",styles:"margin-bottom:0"}),gt=(0,r.Z)(c.xv,{target:"ew4111f8"})("padding-top:",c.TV.spacer.x0pt5,";"),ut=(0,r.Z)("div",{target:"ew4111f7"})("width:600px;margin:0 auto;padding:",c.TV.spacer.x6," 0;position:relative;"),pt=(0,r.Z)(c.xv,{target:"ew4111f6"})("margin-bottom:",c.TV.spacer.x1pt5,";"),ht=(0,r.Z)(pt,{target:"ew4111f5"})("margin-bottom:",c.TV.spacer.x1pt5,";margin-top:",c.TV.spacer.x4,";"),mt=(0,r.Z)(c.xv,{target:"ew4111f4"})("margin-bottom:",c.TV.spacer.x1,";"),bt=(0,r.Z)("span",{target:"ew4111f3"})({name:"1efi8gv",styles:"font-weight:bold"}),ft=(0,r.Z)(c.xv,{target:"ew4111f2"})("margin-bottom:",c.TV.spacer.x1,";"),yt=(0,r.Z)(c.JO,{target:"ew4111f1"})({name:"rrel8y",styles:"width:24px;height:24px"}),_t=(0,r.Z)("div",{target:"ew4111f0"})("width:320px;margin-bottom:",c.TV.spacer.x1,";"),wt=()=>{const{buildHrefFromRoute:e}=(0,m.H)(),[t,n]=(0,a.useState)(null),{integrationName:i,siteId:r}=(0,de.UO)(),{t:h}=(0,o.$G)(),{routes:b={integrations:"",integrationDetails:""},useAuthorization:f=(()=>({hasPermission:()=>!1})),usePageTitle:y=(()=>null)}=(0,a.useContext)(s),[_,w]=(0,a.useState)(void 0),{query:{data:x=[]}}=(0,l.k4)(),{hasPermission:k}=f(),v=(0,l.$n)(),T=(0,de.s0)(),E=r??v,{integrations:Z,externalIntegrations:N}=ie(Number(E)),S=(0,g.DD)(_?.gate??null,{id:E,type:"site"}),C=k("site",E,"site-integrations-update")??!1;y(`${h("integrations:page.title")} - Hotjar`);const O=(0,a.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>ge.Z;const i=x.find((t=>t.id===Number(e)));i&&(n(i),t())}),[x]),z=(0,a.useCallback)((t=>{i&&O(t,(()=>T(e(b.integrationDetails,{siteId:t,integrationName:i}))))}),[e,T,b.integrationDetails,i,O]);return(0,a.useEffect)((()=>{if(i&&E){const e=Z.find((e=>e.slug===i))||N.find((e=>e.slug===i));w(e),O(E)}}),[i,O,E,Z,N]),i&&_&&t?(0,u.tZ)(d.S,{squadSentryTag:"integrations",children:(0,u.BX)("article",{children:[(0,u.BX)(at,{children:[(0,u.BX)(c.Oo,{children:[(0,u.tZ)(c.Oo.Item,{href:e(b.integrations),children:h("integrations:details.header.breadcrumb-parent")}),(0,u.tZ)(c.Oo.Item,{isCurrent:!0,children:`${h(_.name)} ${h("integrations:details.header.breadcrumb-suffix")}`})]}),(0,u.BX)(rt,{noVideo:null===_.videoUrl,children:[(0,u.tZ)(mt,{as:"p",textType:"subtitle2",children:h("integrations:page.dropdown-title")}),(0,u.tZ)(_t,{children:x.length>0&&(0,u.tZ)(p,{value:t?.id??0,onChange:z,sites:x})})]}),(0,u.BX)(st,{noVideo:null===_.videoUrl,children:[(0,u.BX)(lt,{fullWidth:null===_.videoUrl,children:[(0,u.BX)(ct,{children:[(0,u.tZ)(yt,{icon:_.icon}),(0,u.tZ)(dt,{as:"h4",textType:"header4",children:h(_.name)}),_.isBeta&&(0,u.tZ)(c.Ct,{kind:"beta",size:"s"}),(0,u.tZ)(gt,{textType:"body1",textColor:"text_disabled",children:`${h("integrations:card.by").toLowerCase()} ${h(_.provider)}`})]}),S?null:(0,u.tZ)(ft,{textType:"caption",textColor:"text_disabled",children:(0,u.tZ)(o.cC,{i18nKey:"integrations:card.cant-use",components:[(0,u.tZ)(bt,{})],children:"Available for Business and Scale plans."})}),(0,u.tZ)(c.xv,{textType:"body1",children:h(_.description)}),(0,u.tZ)("div",{"aria-label":h("integrations:page.actions"),children:(0,u.tZ)(it,{canUse:S,integration:_,billingRoute:b.billing,isAdmin:C,siteId:E,siteName:t.name})})]}),(0,u.tZ)(Ne,{videoUrl:_.videoUrl})]}),C||!S||_.isAlwaysOn?null:(0,u.tZ)(ot,{noVideo:null===_.videoUrl,children:(0,u.tZ)(c.bZ,{actionText:h("integrations:details.header.not-admin-link-label"),actionHref:e(b.teamList),children:_.isEnabled?h("integrations:details.header.not-admin-alert-copy-disable"):h("integrations:details.header.not-admin-alert-copy-enable")})})]}),(0,u.BX)(ut,{children:[_.descriptionLarge&&(0,u.BX)(u.HY,{children:[(0,u.tZ)(pt,{as:"h4",textType:"header4",children:h("integrations:details.description")}),(0,u.tZ)(c.xv,{as:"p",textType:"body1",children:h(_.descriptionLarge)})]}),_.noticeDescription&&(0,u.tZ)(c.bZ,{kind:"warning",title:h(_.noticeTitle||""),children:h(_.noticeDescription)}),_.resources.length>0?(0,u.BX)(u.HY,{children:[(0,u.tZ)(ht,{as:"h4",textType:"header4",children:h("integrations:details.resources")}),(0,u.tZ)(me,{resources:_.resources}),_.images&&_.images.length>0&&(0,u.tZ)(Ee,{imagesUrls:_.images})]}):null]}),(0,u.tZ)("div",{id:"integrations-detail-page-widget"})]})}):null},xt=e=>{let{isOpen:t,onRequestClose:n,currentSite:i,onConnect:s,onSuccess:r,onError:l}=e;const[d,g]=(0,a.useState)(!1),{t:p}=(0,o.$G)(),{id:h,name:m}=i??{};return(0,u.BX)(c.u_,{contentLabel:p("integrations:slack.enable-modal.content-label"),isOpen:t,onClose:n,children:[(0,u.tZ)(c.u_.Header,{title:p("integrations:slack.enable-modal.title")}),(0,u.tZ)(c.u_.Body,{children:(0,u.BX)(o.cC,{i18nKey:"integrations:slack.enable-modal.description",children:["Slack isn't connected to ",{name:m}," right now. To enable it you'll be taken through the process in a Slack popup window."]})}),(0,u.tZ)(c.u_.Footer,{children:(0,u.tZ)(c.zx,{"data-testid":"enable-slack-button",kind:"primary",onClick:()=>{h&&(g(!0),Ue(h).then((e=>{s(e),g(!1),r(p("integrations:slack.enable-modal.notify-success",{name:m}))})).catch((e=>{g(!1),e.message&&l(e.message)})))},isDisabled:d,children:p("integrations:slack.enable-modal.action")})})]})},kt=()=>{const[e]=(0,h.lr)(),{buildHrefFromRoute:t}=(0,m.H)(),n=(0,de.s0)(),i=(0,a.useCallback)((async()=>{const i=e.get("error"),a=e.get("state"),s=e.get("code"),r=t(Fe.SETTINGS.INTEGRATION_DETAILS.path,{siteId:String(a),integrationName:"hubspot"});if(s&&a&&r){i&&n(`${r}?oauth-success=false`);try{const{data:e}=await((e,t)=>Ce().post(`${Pe}/${e}/integrations/hubspot`,{action:"request_keys",code:t}))(a,s);await((e,t,n)=>Ce().put(`${Pe}/${e}/oauth-tokens/hubspot-oauth2`,{access_token:t,refresh_token:n}))(a,e.access_token,e.refresh_token),n(`${r}?oauth-success=true`)}catch{n(`${r}?oauth-success=false`)}}}),[t,n,e]);return(0,a.useEffect)((()=>{i()}),[i]),null},vt=e=>{const{integrations:t}=ie(e),n=[];return t.forEach((e=>{e.isEnabled&&n.push(e.icon)})),n};var Tt,Et,Zt=n(88767);function Nt(e){return null===e?{channels:[],enabled:!1,valid:!0,dirty:!1,isConnected:null}:null}function St(e,t,n){const[i,s]=(0,a.useState)(Nt(n)),r=(0,a.useCallback)((async()=>{if(null===n)return null;const{data:i}=await(0,Zt.get)(e,t,n),a={channels:i.channels,enabled:i.enabled,valid:!0,dirty:!1,isConnected:null};return s(a),a}),[e,t,n]);return(0,a.useEffect)((()=>((async()=>{if(null!==n)try{await r()}catch{s(Nt(null))}else s(Nt(n))})(),()=>{})),[e,n,s,r,t]),[i,s,r]}function Ct(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const[s,r]=(0,a.useState)(null);return(0,a.useEffect)((()=>((async()=>{if(!i){const i="poll"===t?Qe.T4:Qe.vJ,a=await i(String(e),String(n));r(a)}})(),()=>{})),[e,t,n,i]),s}!function(e){e[e.SET_ALL_CHANNELS=0]="SET_ALL_CHANNELS",e[e.SET_CHANNELS=1]="SET_CHANNELS",e[e.SET_HAS_ERROR=2]="SET_HAS_ERROR",e[e.SET_HAS_API_ERROR=3]="SET_HAS_API_ERROR",e[e.SET_CONNECTION_STATE=4]="SET_CONNECTION_STATE",e[e.SET_IS_ENABLED=5]="SET_IS_ENABLED",e[e.TOGGLE_MODAL_OPEN=6]="TOGGLE_MODAL_OPEN",e[e.SET_IS_LOADING=7]="SET_IS_LOADING",e[e.ON_CONNECT=8]="ON_CONNECT"}(Tt||(Tt={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.CONNECTED=1]="CONNECTED",e[e.NOT_CONNECTED=2]="NOT_CONNECTED"}(Et||(Et={}));const Ot=e=>e&&e.length>0;function zt(e,t){switch(t.type){case Tt.SET_ALL_CHANNELS:return{...e,allChannels:t.payload};case Tt.SET_CHANNELS:return{...e,channels:t.payload,hasError:!Ot(t.payload)};case Tt.SET_HAS_ERROR:return{...e,hasError:!Ot(e.channels)};case Tt.SET_HAS_API_ERROR:return{...e,hasApiError:!0};case Tt.SET_CONNECTION_STATE:return{...e,connectionState:t.payload};case Tt.SET_IS_ENABLED:return{...e,isEnabled:t.payload};case Tt.TOGGLE_MODAL_OPEN:return{...e,isModalOpen:!e.isModalOpen};case Tt.SET_IS_LOADING:return{...e,isLoading:t.payload};case Tt.ON_CONNECT:return{...e,connectionState:Et.CONNECTED,isEnabled:!0,isModalOpen:!1};default:return e}}function It(e){switch(e){case Et.CONNECTED:return!0;case Et.NOT_CONNECTED:return!1;case Et.UNKNOWN:default:return null}}function At(e){let{settings:t,onChange:n,siteId:i,isMinimalPlan:s}=e;const{dirty:r}=t,[o,l]=(0,a.useReducer)(zt,{allChannels:[],channels:t.channels,hasError:r&&!t.valid,hasApiError:!1,connectionState:Et.UNKNOWN,isEnabled:t.enabled,isLoading:!1,isModalOpen:!1}),{channels:c,connectionState:d,isEnabled:g}=o;return(0,a.useEffect)((()=>{l({type:Tt.SET_CONNECTION_STATE,payload:Et.UNKNOWN})}),[i]),(0,a.useEffect)((()=>{s&&(d===Et.CONNECTED&&i&&(l({type:Tt.SET_IS_LOADING,payload:!0}),C.Ky(i).then((e=>{let{data:t}=e;l({type:Tt.SET_ALL_CHANNELS,payload:t.channels})})).catch((()=>{l({type:Tt.SET_HAS_API_ERROR,payload:!1})})).finally((()=>{l({type:Tt.SET_IS_LOADING,payload:!1})}))),d===Et.UNKNOWN&&i&&(l({type:Tt.SET_IS_LOADING,payload:!0}),C.Zp(i).then((()=>{l({type:Tt.SET_CONNECTION_STATE,payload:Et.CONNECTED})})).catch((()=>{l({type:Tt.SET_CONNECTION_STATE,payload:Et.NOT_CONNECTED})})).finally((()=>{l({type:Tt.SET_IS_LOADING,payload:!1})}))))}),[i,s,d]),(0,a.useEffect)((()=>{r&&!Ot(c)&&l({type:Tt.SET_HAS_ERROR,payload:!1})}),[r,c]),(0,a.useEffect)((()=>{d!==Et.UNKNOWN&&n({channels:c,enabled:g,valid:Ot(c),dirty:r,isConnected:It(d)})}),[n,c,g,r,d]),{state:{...o,isConnected:It(d)},actions:{toggleModalOpen(){l({type:Tt.TOGGLE_MODAL_OPEN})},setIsEnabled(e){l({type:Tt.SET_IS_ENABLED,payload:e})},setChannels(e){l({type:Tt.SET_CHANNELS,payload:e})},setHasError(e){l({type:Tt.SET_HAS_ERROR,payload:e})},setIsConnecting(){l({type:Tt.ON_CONNECT})}}}}var Lt=n(74998),$t=n(68554),jt=n(15851);const Dt="settings.integrations_zapier",Ht="business";function Rt(e,t){switch(e){case jt.k.Feedback:return(0,$t.e)(Dt,t);case jt.k.Analytics:return(0,te.y)(Dt,t);default:return(0,te.y)(Dt,t)||(0,$t.e)(Dt,t)}}const Ut="https://zapier.com/app/editor",Vt=s.Provider},15851:(e,t,n)=>{let i;n.d(t,{k:()=>i}),function(e){e.Analytics="analytics_product",e.Feedback="feedback_product"}(i||(i={}))},77029:(e,t,n)=>{n.d(t,{ZR:()=>o,_I:()=>i,fe:()=>s,fx:()=>l,ns:()=>r,uw:()=>a});const i="0",a=16,s=17,r=56,o=220,l=64},71235:(e,t,n)=>{n.d(t,{H:()=>s});var i=n(66069),a=n(77029);const s=(0,i.Z)((e=>({isSidebarMinimized:!1,setIsSidebarMinimized:t=>e({isSidebarMinimized:t}),isSidebarHidden:!1,setIsSidebarHidden:t=>e({isSidebarHidden:t}),topBarHeight:a.ns,extraBanners:0,setExtraBannersCount:t=>e((()=>{return{extraBanners:t,topBarHeight:(e=t,48*e+a.ns)};var e})),routes:{},buildHrefFromRoute:()=>"",initializeRoutes:(t,n)=>e({routes:t,buildHrefFromRoute:n})})))},56451:(e,t,n)=>{function i(){return window.settings}n.d(t,{G:()=>i})}}]);