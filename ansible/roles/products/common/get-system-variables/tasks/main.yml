---
- name: get dekstop path
  shell: xdg-user-dir DESKTOP
  register: desktop_path_shell
  when: skip_molecule_task is not defined

- name:
  set_fact: desktop_path="{{ desktop_path_shell.stdout }}"
  when: skip_molecule_task is not defined

- name:
  set_fact: desktop_path="/home/{{ user }}/Desktop"
  when: skip_molecule_task is defined

- name: Test connection to given github mirror
  uri:
    url: http://{{ github_url }}/
    method: HEAD
    timeout: 1
    return_content: yes
  register: github_connection
  failed_when: no

- name: Switch github connection if not available
  set_fact: github_url="hub.fastgit.xyz"
  when: "github_connection.status != 200"
