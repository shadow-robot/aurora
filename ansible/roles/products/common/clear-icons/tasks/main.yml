---
- name: Ensure Shadow Demos folder and contents are deleted
  file:
    path: "{{ shadow_demos_folder }}"
    state: absent
  become: yes
  changed_when: false

- name: Ensure Shadow Advanced Launchers folder and contents are deleted
  file:
    path: "{{ shadow_advanched_launchers_folder }}"
    state: absent
  become: yes
  changed_when: false

- name: Ensure shadow_launcher_app folder and contents are deleted
  file:
    path: "{{ shadow_hand_launcher_folder }}"
    state: absent
  become: yes
  changed_when: false

- name: Find all .desktop files with Shadow in the comment
  find:
    paths: "{{ desktop_path }}"
    patterns: '*.desktop'
    contains: "^.*Comment=autogenerated_aurora_{{ container_name }}"
  register: file_list

- name: Delete all .desktop files with autogenerated_aurora in the comment
  file:
    path: "{{ item.path }}"
    state: absent
  become: yes
  changed_when: false
  with_items: "{{ file_list.files }}"
