---
- name: Checking if container already exists
  shell: docker ps -a -f name={{ name }} --format {%raw%}"table {{.Status}}"{%endraw%} | awk 'FNR == 2 {print}' | awk '{print $1}'
  register: status

- block:
    - name: Container exists
      debug:
        msg: "Container Already exists"

  when: status.stdout == "Exited" or status.stdout == "Up"

- name: Log into DockerHub
  docker_login:
    username: user
    password: password

- name: Pulling the image
  docker_image:
    name: shadowrobot/flexible-hand:{{ image }}
