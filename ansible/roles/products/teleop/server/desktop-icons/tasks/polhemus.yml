---
- name: Set haptx icon
  set_fact:
    haptx_type: "bimanual"
    haptx_icon: "haptx_{{ haptx_type }}.png"
  when: bimanual|bool

- name: Install desktop icon for Teleop server container (for haptx)
  include_tasks: default-icon.yml
  vars:
    template: ../../../common/resources/templates/scripts/start-docker-container.j2
    desktop_icon_png: "{{ haptx_icon }}"
    launch_script: "shadow_launcher_exec.sh"
    desktop_icon_name: "Teleop_Container_Launch"

- name: Install desktop icon for Teleop server GUI Right (for haptx)
  include_tasks: roslaunch-icon.yml
  vars:
    desktop_icon_png: "{{ haptx_icon }}"
    launch_script: "shadow_roslaunch_Right.sh"
    desktop_icon_name: "Teleop_GUI_haptx_Right"
    project_name_input: "sr_teleop_vive_haptx"
    launch_file_input: "teleop_vive_haptx.launch external_control_loop:=true vive:=false hand_eth_interface:={{ ethercat_interface }}"

- name: Install desktop icon for running haptx mapping node right
  include_tasks: roslaunch-icon.yml
  vars:
    desktop_icon_png: "{{ haptx_icon }}"
    launch_script: "shadow_haptx_mapping_launch_Right.sh"
    desktop_icon_name: "Teleop_Haptx_Mapping_Right_Launch"
    project_name_input: "sr_teleop_vive_haptx"
    launch_file_input: "haptx_base.launch"

- name: Install desktop icon for Teleop server GUI Left (for haptx)
  include_tasks: roslaunch-icon.yml
  vars:
    desktop_icon_png: "{{ haptx_icon }}"
    launch_script: "shadow_roslaunch_Left.sh"
    desktop_icon_name: "Teleop_GUI_haptx_Left_Launch"
    project_name_input: "sr_teleop_vive_haptx"
    launch_file_input: "teleop_vive_haptx.launch external_control_loop:=true side:=left vive:=false hand_eth_interface:={{ ethercat_left_hand }}"

- name: Install desktop icon for running haptx mapping node Left
  include_tasks: roslaunch-icon.yml
  vars:
    desktop_icon_png: "{{ haptx_icon }}"
    launch_script: "shadow_haptx_mapping_launch_Left.sh"
    desktop_icon_name: "Teleop_Haptx_Mapping_Left_Launch"
    project_name_input: "sr_teleop_vive_haptx"
    launch_file_input: "haptx_base.launch hand_side_prefix:=lh"

- name: Install desktop icon for Teleop server GUI Bimanual (for haptx)
  include_tasks: roslaunch-icon.yml
  vars:
    desktop_icon_png: "{{ haptx_icon }}"
    launch_script: "shadow_roslaunch_bimanual.sh"
    desktop_icon_name: "Teleop_GUI_haptx_Bimanual_Launch"
    project_name_input: "sr_teleop_vive_haptx"
    launch_file_input: "teleop_bimanual_vive_haptx.launch external_control_loop:=true hand_eth_interface:={{ ethercat_interface }}_{{ ethercat_left_hand }}"
  when: bimanual|bool

- name: Install desktop icon for running haptx mapping node Bimanual
  include_tasks: roslaunch-icon.yml
  vars:
    desktop_icon_png: "{{ haptx_icon }}"
    launch_script: "shadow_haptx_mapping_launch_bimanual.sh"
    desktop_icon_name: "Teleop_Haptx_Mapping_Bimanual_Launch"
    project_name_input: "sr_teleop_vive_haptx"
    launch_file_input: "haptx_base_bimanual.launch"
  when: bimanual|bool

- name: Install desktop icon for Teleop server Simulation (Unimanual HaptX)
  import_tasks: roslaunch-icon.yml
  vars:
    desktop_icon_png: "haptx_right.png"
    launch_script: "shadow_sim_demo.sh"
    desktop_icon_name: "Teleop_Simulation"
    project_name_input: "sr_teleop_vive_haptx"
    launch_file_input: "teleop_vive_haptx_right.launch external_control_loop:=false sim:=true"
  when: sim_icon|bool and not bimanual|bool

- name: Install desktop icon for Teleop server Simulation (Bimanual HaptX)
  import_tasks: roslaunch-icon.yml
  vars:
    desktop_icon_png: "haptx_bimanual.png"
    launch_script: "shadow_sim_demo.sh"
    desktop_icon_name: "Teleop_Simulation"
    project_name_input: "sr_teleop_vive_haptx"
    launch_file_input: "teleop_bimanual_vive_haptx.launch external_control_loop:=false sim:=true"
  when: sim_icon|bool and bimanual|bool
