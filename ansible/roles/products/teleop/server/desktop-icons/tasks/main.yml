---
- name: Ensures that Desktop folder exists
  file:
    path: "{{ user_folder }}/Desktop"
    mode: '755'
    state: directory

- name: Ensures that shadow_hand_launcher directory exists
  file:
    path: "{{ shadow_hand_launcher_folder }}"
    state: directory

- name: Setting up icons for unimanual teleop
  include_tasks: unimanual.yml
  when: not bimanual|bool
 
- name: Setting up icons for bimanual teleop
  include_tasks: bimanual.yml
  when: bimanual|bool

- name: Setting up icons for cyberglove teleop
  include_tasks: cyberglove.yml
  when: glove=="cyberglove"

- name: Setting up icons for haptx teleop
  include_tasks: haptx.yml
  when: glove=="haptx"

- name: Install desktop icon for launching Roscore
  import_tasks: default-icon.yml
  vars:
    template: ../../../common/resources/templates/scripts/start-roscore.j2
    desktop_icon_png: "ROS_logo.png"
    launch_script: "shadow_roscore.sh"
    desktop_icon_name: "Teleop_ROSCORE"

- name: Install desktop icon for Teleop server Simulation (Cyberglove)
  import_tasks: roslaunch-icon.yml
  vars:
    desktop_icon_png: "cyberglove_teleop.png"
    launch_script: "shadow_sim_demo.sh"
    desktop_icon_name: "Teleop_Simulation"
    project_name_input: "sr_teleop_vive_cyberglove"
    launch_file_input: "sr_teleop_vive_cyberglove.launch remote_cyberglove:={{ remote_cyberglove }} external_control_loop:=false sim:=true"
  when: sim_icon|bool and glove=="cyberglove"

- name: Install desktop icon for Teleop server Simulation (Unimanual HaptX)
  import_tasks: roslaunch-icon.yml
  vars:
    desktop_icon_png: "haptx_right.png"
    launch_script: "shadow_sim_demo.sh"
    desktop_icon_name: "Teleop_Simulation"
    project_name_input: "sr_teleop_vive_haptx"
    launch_file_input: "teleop_vive_haptx_right.launch external_control_loop:=false sim:=true"
  when: sim_icon|bool and glove=="haptx" and not bimanual|bool

- name: Install desktop icon for Teleop server Simulation (Bimanual HaptX)
  import_tasks: roslaunch-icon.yml
  vars:
    desktop_icon_png: "haptx_bimanual.png"
    launch_script: "shadow_sim_demo.sh"
    desktop_icon_name: "Teleop_Simulation"
    project_name_input: "sr_teleop_vive_haptx"
    launch_file_input: "teleop_bimanual_vive_haptx.launch external_control_loop:=false sim:=true"
  when: sim_icon|bool and glove=="haptx" and bimanual|bool

- name: Include products/common/demo-icons role
  include_role:
    name: products/common/demo-icons
  when: demo_icons|bool

- name: Install the documentation desktop icon
  import_tasks: default-icon.yml
  vars:
    template: templates/scripts/show_documentation.j2
    desktop_icon_png: "documentation_icon.png"
    launch_script: "shadow_launcher_doc_exec.sh"
    desktop_icon_name: "Teleop_Documentation"
