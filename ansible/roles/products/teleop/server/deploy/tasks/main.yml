---
- name: Check if SSH public key from control-computer exists
  stat:
    path: "/tmp/ssh/id_rsa.pub"
  register: ssh_check
  ignore_errors: yes

- name: Register ssh keys with current user
  when: ssh_check.stat.exists
  authorized_key:
    user: "{{ user }}"
    key: "{{ lookup('file', '/tmp/ssh/id_rsa.pub') }}"
    state: present
