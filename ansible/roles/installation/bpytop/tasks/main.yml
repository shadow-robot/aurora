---
- name: Install snap package bpytop
  become: yes
  snap:
    name:
     - bpytop

- name: Setup Plugs for bpytop to be able to monitor resources on system
  become: yes 
  shell: 'snap connect {{ item.app }}:{{ item.plug }}'
  loop:
  - plug: mount-observe
    app: bpytop
  - plug:network-control
    app: bpytop
  - plug:hardware-observe
    app: bpytop
  - plug:system-observe
    app: bpytop
  - plug:process-control
    app: bpytop
  - plug:physical-memory-observe
    app: bpytop