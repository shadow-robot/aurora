---
- name: Copy ROS Logs Saver desktop icon
  copy: 
    src: files/log_icon.png
    dest: "{{ save_latest_ros_logs_folder }}/log_icon.png"
    mode: '664'

- name: Copy ROS Logs Saver main script
  copy: 
    src: files/save_latest_ros_logs.sh
    dest: "{{ save_latest_ros_logs_folder }}/save_latest_ros_logs.sh"
    mode: '755'
    
- name: Create ROS Logs Saver executable launch script
  copy:
    content: |
      #! /bin/bash
      exec -a shadow_save_log_app_xterm xterm -e "cd {{ save_latest_ros_logs_folder }}; ./save_latest_ros_logs.sh"
    dest: "{{ save_latest_ros_logs_folder }}/shadow_save_log_exec.sh"
    mode: '755'

- name: Create ROS Logs Saver desktop icon
  when: "not {{ customerkey  }}"
  template:
    src: templates/desktop_labels/desktop_icon.j2
    dest: "{{ user_folder }}/Desktop/ROS_Logs_Saver.desktop"
    mode: '755'
  vars:
    desktop_shortcut_name: ROS_Logs_Saver
    comment: "This application saves latest ros logs file from running docker container"
    window_title: shadow_save_log_app_xterm
    folder: "{{ save_latest_ros_logs_folder }}"
    shell_script_file_name: shadow_save_log_exec.sh
    icon_file_name: log_icon.png

- name: Create ROS Logs Saver and Uploader desktop icon
  when: "{{ customerkey  }}"
  template:
    src: templates/desktop_labels/desktop_icon.j2
    dest: "{{ user_folder }}/Desktop/ROS_Logs_Saver_And_Uploader.desktop"
    mode: '755'
  vars:
    desktop_shortcut_name: ROS_Logs_Saver_And_Uploader
    comment: "This application saves and uploads to AWS latest ros logs file from running docker container"
    window_title: shadow_save_log_app_xterm
    folder: "{{ save_latest_ros_logs_folder }}"
    shell_script_file_name: shadow_save_log_exec.sh
    icon_file_name: log_icon.png